<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>List与String互转</title>
      <link href="/posts/f6ce161d.html"/>
      <url>/posts/f6ce161d.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://www.jb51.net/program/287456fak.htm">https://www.jb51.net/program/287456fak.htm</a></p><h1>将List转换成String</h1><p>将一个Java集合List转换为String很简单，可以使用String.join()或StringBuilder等方法。下面是几个示例：</p><h2 id="使用String-joni-方法">使用String.joni()方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;C&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">joinedString</span> <span class="operator">=</span> String.join(<span class="string">&quot;, &quot;</span>, list);</span><br><span class="line">System.out.println(joinedString);  <span class="comment">// 输出: A, B, C</span></span><br></pre></td></tr></table></figure><p>**注意：以上是转换Java集合List为字符串的几种方法。需要注意的是，当集合中包含null值时，使用String.join()方法将会抛出NullPointerException异常，而使用StringBuilder或Java 8的Stream API则可以正确处理null值。 **</p><h2 id="使用StringBuilder">使用StringBuilder</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;C&quot;</span>);</span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line"><span class="keyword">for</span> (String str : list) &#123;</span><br><span class="line">    sb.append(str);</span><br><span class="line">    sb.append(<span class="string">&quot;, &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">sb.setLength(sb.length() - <span class="number">2</span>);  <span class="comment">// 删除最后一个逗号和空格</span></span><br><span class="line"><span class="type">String</span> <span class="variable">joinedString</span> <span class="operator">=</span> sb.toString();</span><br><span class="line">System.out.println(joinedString);  <span class="comment">// 输出: A, B, C</span></span><br></pre></td></tr></table></figure><h2 id="使用Java8的Stream（推荐）">使用Java8的Stream（推荐）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;C&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">joinedString</span> <span class="operator">=</span> list.stream().collect(Collectors.joining(<span class="string">&quot;, &quot;</span>));</span><br><span class="line">System.out.println(joinedString);  <span class="comment">// 输出: A, B, C</span></span><br></pre></td></tr></table></figure><h1>将String转换成List</h1><p>将一个逗号分隔的字符串转换为Java集合List也很简单，可以使用String的split()方法或者使用Java 8的Stream API的splitAsStream()方法。下面是两个示例：</p><h2 id="使用String的split-方法">使用String的split()方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;A, B, C&quot;</span>;</span><br><span class="line">List&lt;String&gt; list = Arrays.asList(str.split(<span class="string">&quot;\\s*,\\s*&quot;</span>));</span><br><span class="line">System.out.println(list);  <span class="comment">// 输出: [A, B, C]</span></span><br></pre></td></tr></table></figure><h2 id="使用Java8的Stream方法">使用Java8的Stream方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;A, B, C&quot;</span>;</span><br><span class="line">List&lt;String&gt; list = Pattern.compile(<span class="string">&quot;\\s*,\\s*&quot;</span>).splitAsStream(str).collect(Collectors.toList());</span><br><span class="line">System.out.println(list);  <span class="comment">// 输出: [A, B, C]</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数组的删除与添加</title>
      <link href="/posts/cf22e13d.html"/>
      <url>/posts/cf22e13d.html</url>
      
        <content type="html"><![CDATA[<h1>删除末尾最后一个</h1><blockquote><p>pop() 方法用于删除并返回数组的最后一个元素。并把<a href="https://so.csdn.net/so/search?q=%E6%95%B0%E7%BB%84%E9%95%BF%E5%BA%A6&amp;spm=1001.2101.3001.7020">数组长度</a>减 1</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">arr</span> <span class="operator">=</span> [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span>];</span><br><span class="line">arr.pop(); <span class="comment">//删除最后一个元素并且返回它删除的元素的值 =&gt; f</span></span><br><span class="line">arr.length; <span class="comment">//此时数组长度5</span></span><br><span class="line">arr; <span class="comment">//[&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;e&#x27;]</span></span><br></pre></td></tr></table></figure><h1>末尾添加一个或多个元素</h1><blockquote><p>push() 方法可向数组的末尾添加一个或多个元素，并返回新的长度。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">arr</span> <span class="operator">=</span> [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span>];</span><br><span class="line">arr.push(<span class="string">&#x27;g&#x27;</span>); <span class="comment">//向数组末尾push进一个新的元素,它直接修改 arrayObject，而不是创建一个新的数组</span></span><br><span class="line">arr.length; <span class="comment">//此时arr长度7</span></span><br><span class="line">arr; <span class="comment">//[&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;e&#x27;,&#x27;f&#x27;,&#x27;g&#x27;]</span></span><br></pre></td></tr></table></figure><h1>删除第一个元素</h1><blockquote><p>shift() 方法用于把数组的第一个元素从其中删除，并返回第一个元素的值。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该方法不创建新数组，而是直接修改原有的 arrayObject</span></span><br><span class="line"><span class="type">var</span> <span class="variable">arr</span> <span class="operator">=</span> [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span>];</span><br><span class="line">arr.shift(); <span class="comment">// 把数组的第一个元素从其中删除，并返回第一个元素的值 =&gt; a</span></span><br><span class="line">arr.length; <span class="comment">// 改变数组长度 =&gt; 5</span></span><br><span class="line">arr; <span class="comment">// [&quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;]</span></span><br></pre></td></tr></table></figure><h1>头部添加一个或多个元素</h1><blockquote><p>unshift() 方法可向数组的开头添加一个或更多元素，并返回新的长度。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">arr</span> <span class="operator">=</span> [<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span>];</span><br><span class="line">arr.unshift(<span class="string">&#x27;a&#x27;</span>); <span class="comment">// 向数组的开头添加一个新元素，并返回新的长度 6</span></span><br><span class="line">arr.length; <span class="comment">// 改变数组长度 =&gt; 6</span></span><br><span class="line">arr; <span class="comment">// [&quot;a&quot;,&quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;]</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot+Vue实现文件上传、下载、预览</title>
      <link href="/posts/4a1df1a2.html"/>
      <url>/posts/4a1df1a2.html</url>
      
        <content type="html"><![CDATA[<h2 id="加一个全局的异常处理">加一个全局的异常处理</h2><p><img src="https://cdn.nlark.com/yuque/0/2023/png/751015/1693142857806-95e147a7-3a9f-465c-b6e8-3164dcc07ff5.png#averageHue=%238e8753&amp;clientId=u355a6559-82c8-4&amp;from=paste&amp;height=405&amp;id=udee2de99&amp;originHeight=506&amp;originWidth=1461&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=93393&amp;status=done&amp;style=none&amp;taskId=u26b63130-ecba-4743-94e3-cab0c80142b&amp;title=&amp;width=1168.8" alt="image.png"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">globalException</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">    <span class="keyword">return</span> Result.error(<span class="string">&quot;500&quot;</span>, <span class="string">&quot;系统错误&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="单文件上传">单文件上传</h2><p>postman请求<br><img src="https://cdn.nlark.com/yuque/0/2023/png/751015/1693143162599-df755b89-8696-42ee-8ea6-dc3aea4efebd.png#averageHue=%23fdfbfb&amp;clientId=u355a6559-82c8-4&amp;from=paste&amp;height=577&amp;id=ub028263f&amp;originHeight=721&amp;originWidth=1795&amp;originalType=binary&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;size=79755&amp;status=done&amp;style=none&amp;taskId=u906db263-f2d8-4087-ad9a-09644e0d245&amp;title=&amp;width=1436" alt="image.png"><br>文件上传代码：<br>java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.hutool.core.io.FileUtil;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.common.AuthAccess;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.common.Result;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletOutputStream;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Value(&quot;$&#123;ip:localhost&#125;&quot;)</span></span><br><span class="line">String ip;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Value(&quot;$&#123;server.port&#125;&quot;)</span></span><br><span class="line">String port;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ROOT_PATH</span> <span class="operator">=</span>  System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + File.separator + <span class="string">&quot;files&quot;</span>;  <span class="comment">// D:\B站\小白做毕设2024\代码\小白做毕设2024\files</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();  <span class="comment">// 文件的原始名称</span></span><br><span class="line">    <span class="comment">// aaa.png</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">mainName</span> <span class="operator">=</span> FileUtil.mainName(originalFilename);  <span class="comment">// aaa</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">extName</span> <span class="operator">=</span> FileUtil.extName(originalFilename);<span class="comment">// png</span></span><br><span class="line">    <span class="keyword">if</span> (!FileUtil.exist(ROOT_PATH)) &#123;</span><br><span class="line">        FileUtil.mkdir(ROOT_PATH);  <span class="comment">// 如果当前文件的父级目录不存在，就创建</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (FileUtil.exist(ROOT_PATH + File.separator + originalFilename)) &#123;  <span class="comment">// 如果当前上传的文件已经存在了，那么这个时候我就要重名一个文件名称</span></span><br><span class="line">        originalFilename = System.currentTimeMillis() + <span class="string">&quot;_&quot;</span> + mainName + <span class="string">&quot;.&quot;</span> + extName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">File</span> <span class="variable">saveFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(ROOT_PATH + File.separator + originalFilename);</span><br><span class="line">    file.transferTo(saveFile);  <span class="comment">// 存储文件到本地的磁盘里面去</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;http://&quot;</span> + ip + <span class="string">&quot;:&quot;</span> + port + <span class="string">&quot;/file/download/&quot;</span> + originalFilename;</span><br><span class="line">    <span class="keyword">return</span> Result.success(url);  <span class="comment">//返回文件的链接，这个链接就是文件的下载地址，这个下载地址就是我的后台提供出来的</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>vue<br>获取用户信息：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user: JSON.parse(localStorage.getItem(<span class="string">&#x27;honey-user&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span><br></pre></td></tr></table></figure><p>文件上传组件代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-upload</span><br><span class="line">    action=&quot;http://localhost:9090/file/upload&quot;</span><br><span class="line">    :headers=&quot;&#123;token: user.token&#125;&quot;</span><br><span class="line">    :on-success=&quot;handleFileUpload&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &lt;el-button size=&quot;mini&quot; type=&quot;primary&quot;&gt;单文件上传&lt;/el-button&gt;</span><br><span class="line">&lt;/el-upload&gt;</span><br></pre></td></tr></table></figure><p>文件上传回调钩子</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">handleFileUpload(response, file, fileList) &#123;</span><br><span class="line">console.log(response, file, fileList)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>文件存储到后台，发送更新的请求</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">handleTableFileUpload(row, file, fileList) &#123;</span><br><span class="line">  console.log(row, file, fileList)</span><br><span class="line">  row.avatar = file.response.data</span><br><span class="line">  // this.$set(row, &#x27;avatar&#x27;, file.response.data)</span><br><span class="line">  console.log(row)</span><br><span class="line">  // 触发更新就可以了</span><br><span class="line">  request.put(&#x27;/user/update&#x27;, row).then(res =&gt; &#123;</span><br><span class="line">    if (res.code === &#x27;200&#x27;) &#123;</span><br><span class="line">      this.$message.success(&#x27;上传成功&#x27;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      this.$message.error(res.msg)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="多文件上传">多文件上传</h2><p>vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-upload</span><br><span class="line">      action=&quot;http://localhost:9090/file/upload&quot;</span><br><span class="line">      :headers=&quot;&#123;token: user.token&#125;&quot;</span><br><span class="line">      :on-success=&quot;handleMultipleFileUpload&quot;</span><br><span class="line">      multiple</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;el-button size=&quot;mini&quot; type=&quot;success&quot;&gt;多文件上传&lt;/el-button&gt;</span><br><span class="line">  &lt;/el-upload&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot; style=&quot;margin:  10px 0&quot; @click=&quot;showUrls&quot;&gt;显示上传的链接&lt;/el-button&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">handleMultipleFileUpload(response, file, fileList) &#123;</span><br><span class="line">  this.urls = fileList.map(v =&gt; v.response?.data)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="文件下载">文件下载</h2><p>response.addHeader(“Content-Disposition”, “attachment;filename=” + URLEncoder.encode(fileFullName, “UTF-8”));  // 附件下载</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AuthAccess</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/download/&#123;fileName&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">download</span><span class="params">(<span class="meta">@PathVariable</span> String fileName, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    response.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + URLEncoder.encode(fileFullName, <span class="string">&quot;UTF-8&quot;</span>));  <span class="comment">// 附件下载</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> ROOT_PATH  + File.separator + fileName;</span><br><span class="line">    <span class="keyword">if</span> (!FileUtil.exist(filePath)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">byte</span>[] bytes = FileUtil.readBytes(filePath);</span><br><span class="line">    <span class="type">ServletOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">    outputStream.write(bytes);  <span class="comment">// 数组是一个字节数组，也就是文件的字节流数组</span></span><br><span class="line">    outputStream.flush();</span><br><span class="line">    outputStream.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="文件预览">文件预览</h2><p>根据文件的类型区分的，一般是图片和pdf可以预览<br>response.addHeader(“Content-Disposition”, “inline;filename=” + URLEncoder.encode(fileFullName, “UTF-8”));  // 预览</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AuthAccess</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/download/&#123;fileName&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">download</span><span class="params">(<span class="meta">@PathVariable</span> String fileName, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    response.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;inline;filename=&quot;</span> + URLEncoder.encode(fileFullName, <span class="string">&quot;UTF-8&quot;</span>));  <span class="comment">// 预览</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> ROOT_PATH  + File.separator + fileName;</span><br><span class="line">    <span class="keyword">if</span> (!FileUtil.exist(filePath)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">byte</span>[] bytes = FileUtil.readBytes(filePath);</span><br><span class="line">    <span class="type">ServletOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">    outputStream.write(bytes);  <span class="comment">// 数组是一个字节数组，也就是文件的字节流数组</span></span><br><span class="line">    outputStream.flush();</span><br><span class="line">    outputStream.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TreeUtil工具使用</title>
      <link href="/posts/b2a5fe21.html"/>
      <url>/posts/b2a5fe21.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://blog.csdn.net/Anenan/article/details/113029547">https://blog.csdn.net/Anenan/article/details/113029547</a></p><pre><code> https://blog.csdn.net/Xin_101/article/details/115252284</code></pre><h1>依赖</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h1>后端代码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.查数据</span></span><br><span class="line">List&lt;Bean&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.配置</span></span><br><span class="line"><span class="type">TreeNodeConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNodeConfig</span>();</span><br><span class="line"><span class="comment">//config.setIdKey(&quot;id&quot;);//默认为id可以不设置</span></span><br><span class="line"><span class="comment">//config.setParentIdKey(&quot;parentId&quot;);//默认为parentId可以不设置</span></span><br><span class="line"><span class="comment">//config.setDeep(4);//最大递归深度</span></span><br><span class="line">config.setWeightKey(<span class="string">&quot;priority&quot;</span>);<span class="comment">//排序字段</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.转树，Tree&lt;&gt;里面泛型为id的类型</span></span><br><span class="line">List&lt;Tree&lt;Long&gt;&gt; build = TreeUtil.build(list, <span class="number">0L</span>, config, (object, tree) -&gt; &#123;</span><br><span class="line">    <span class="comment">// 也可以使用 tree.setId(object.getId());等一些默认值</span></span><br><span class="line">    tree.putExtra(<span class="string">&quot;id&quot;</span>, object.getId());</span><br><span class="line">    tree.putExtra(<span class="string">&quot;parentId&quot;</span>, object.getParentId());</span><br><span class="line">    tree.putExtra(<span class="string">&quot;icon&quot;</span>, object.getIcon());</span><br><span class="line">    tree.putExtra(<span class="string">&quot;name&quot;</span>, object.getName());</span><br><span class="line">    tree.putExtra(<span class="string">&quot;url&quot;</span>, object.getUrl());</span><br><span class="line">    tree.putExtra(<span class="string">&quot;priority&quot;</span>, object.getPriority());</span><br><span class="line">    tree.putExtra(<span class="string">&quot;type&quot;</span>, object.getType());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>树结构展示</title>
      <link href="/posts/b7fa406f.html"/>
      <url>/posts/b7fa406f.html</url>
      
        <content type="html"><![CDATA[<h1>Vue递归构造树形结构</h1><p>参考：<a href="https://blog.csdn.net/qq_17165047/article/details/99363858">https://blog.csdn.net/qq_17165047/article/details/99363858</a></p><p>搜索<a href="https://so.csdn.net/so/search?q=elementui&amp;spm=1001.2101.3001.7020">elementui</a>文档 找到一个朴实无华的demo 如下</p><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312092154811.png" alt="img"></p><p>之后查看其源码如下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-tree :data=<span class="string">&quot;data&quot;</span> :props=<span class="string">&quot;defaultProps&quot;</span> @node-click=<span class="string">&quot;handleNodeClick&quot;</span>&gt;&lt;/el-tree&gt;</span><br><span class="line"> </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">data</span>: [&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">label</span>: <span class="string">&#x27;一级 1&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">children</span>: [&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">label</span>: <span class="string">&#x27;二级 1-1&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">children</span>: [&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">label</span>: <span class="string">&#x27;三级 1-1-1&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">label</span>: <span class="string">&#x27;一级 2&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">children</span>: [&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">label</span>: <span class="string">&#x27;二级 2-1&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">children</span>: [&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">label</span>: <span class="string">&#x27;三级 2-1-1&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">label</span>: <span class="string">&#x27;二级 2-2&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">children</span>: [&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">label</span>: <span class="string">&#x27;三级 2-2-1&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">label</span>: <span class="string">&#x27;一级 3&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">children</span>: [&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">label</span>: <span class="string">&#x27;二级 3-1&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">children</span>: [&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">label</span>: <span class="string">&#x27;三级 3-1-1&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">label</span>: <span class="string">&#x27;二级 3-2&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">children</span>: [&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="attr">label</span>: <span class="string">&#x27;三级 3-2-1&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">defaultProps</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">children</span>: <span class="string">&#x27;children&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">label</span>: <span class="string">&#x27;label&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">handleNodeClick</span>(<span class="params">data</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>由此可见 elementui的tree组件所需要的数据结构 为 <strong>label 显示名</strong> 和 <strong>hildren 子节点</strong> 两个属性</p><p>于是我们去后台新建vo来构造该组件的返回数据 如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BusConfDeviceTypeVO</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//节点id</span></span><br><span class="line">    <span class="keyword">private</span> String id ;</span><br><span class="line">    <span class="comment">//节点名称</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//节点的子节点</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;BusConfDeviceTypeVO&gt; children;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我所创建的数据库非常简单 我默认-1 为数据的顶级节点的父节点</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `bus_conf_device_type` (</span><br><span class="line">  `id` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `status` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;数据有效 0 已删除 1&#x27;</span>,</span><br><span class="line">  `pid` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;父节点&#x27;</span>,</span><br><span class="line">  `device_type` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;设备类型&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br></pre></td></tr></table></figure><p>之后开始进行递归操作来构建数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Override</span></span><br><span class="line">   public List<span class="operator">&lt;</span>BusConfDeviceTypeVO<span class="operator">&gt;</span> getTreeData() &#123;</span><br><span class="line"></span><br><span class="line">       List<span class="operator">&lt;</span>BusConfDeviceTypeVO<span class="operator">&gt;</span> deviceTypeTree <span class="operator">=</span> <span class="keyword">new</span> ArrayList<span class="operator">&lt;&gt;</span>();</span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>首先获取到所有顶级节点</span><br><span class="line">       BusConfDeviceType param <span class="operator">=</span> <span class="keyword">new</span> BusConfDeviceType();</span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>查询全部</span><br><span class="line">       List<span class="operator">&lt;</span>BusConfDeviceType<span class="operator">&gt;</span> selectAll <span class="operator">=</span> this.deviceTypeMapper.select(param);</span><br><span class="line"></span><br><span class="line">       param.setPid(&quot;-1&quot;);</span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>查询顶级父节点</span><br><span class="line">       List<span class="operator">&lt;</span>BusConfDeviceType<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">=</span> this.deviceTypeMapper.select(param);</span><br><span class="line"></span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>结果判断</span><br><span class="line">       if (select.size() <span class="operator">&gt;</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> <span class="keyword">select</span> <span class="operator">!=</span> <span class="keyword">null</span>)&#123;</span><br><span class="line">           select.forEach(data <span class="operator">-</span><span class="operator">&gt;</span> &#123;</span><br><span class="line">               BusConfDeviceTypeVO deviceTypeVO <span class="operator">=</span> <span class="keyword">new</span> BusConfDeviceTypeVO();</span><br><span class="line">               <span class="operator">/</span><span class="operator">/</span>构建数据</span><br><span class="line">               deviceTypeVO.setId(data.getId());</span><br><span class="line">               deviceTypeVO.setName(data.getDeviceType());</span><br><span class="line">               <span class="operator">/</span><span class="operator">/</span>子节点递归查找添加  传递父节点</span><br><span class="line">               deviceTypeVO.setChildren(getChildren(data.getId(),selectAll));</span><br><span class="line"></span><br><span class="line">               deviceTypeTree.add(deviceTypeVO);</span><br><span class="line">           &#125;);</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> deviceTypeTree;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="operator">/</span><span class="operator">/</span>递归获取children节点</span><br><span class="line">   private List<span class="operator">&lt;</span>BusConfDeviceTypeVO<span class="operator">&gt;</span> getChildren(String pid,List<span class="operator">&lt;</span>BusConfDeviceType<span class="operator">&gt;</span> list) &#123;</span><br><span class="line"></span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>建立集合</span><br><span class="line">       List<span class="operator">&lt;</span>BusConfDeviceTypeVO<span class="operator">&gt;</span> children <span class="operator">=</span> <span class="keyword">new</span> ArrayList<span class="operator">&lt;&gt;</span>();</span><br><span class="line"></span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>参数判空</span><br><span class="line">       if (StringUtils.isNotBlank(pid))&#123;</span><br><span class="line"></span><br><span class="line">           list.forEach(data <span class="operator">-</span><span class="operator">&gt;</span>&#123;</span><br><span class="line">               <span class="operator">/</span><span class="operator">/</span>若遍历的数据中的父节点id等于参数id</span><br><span class="line">               <span class="operator">/</span><span class="operator">/</span>则判定当前节点为该参数id节点下的子节点</span><br><span class="line">               if (pid.equals(data.getPid()))&#123;</span><br><span class="line">                   <span class="operator">/</span><span class="operator">/</span>构造添加结果集合</span><br><span class="line">                   BusConfDeviceTypeVO deviceTypeVO <span class="operator">=</span> <span class="keyword">new</span> BusConfDeviceTypeVO();</span><br><span class="line">                   deviceTypeVO.setId(data.getId());</span><br><span class="line">                   deviceTypeVO.setName(data.getDeviceType());</span><br><span class="line">                   children.add(deviceTypeVO);</span><br><span class="line"></span><br><span class="line">               &#125;</span><br><span class="line">           &#125;);</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>循环添加子菜单</span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>遍历children 集合</span><br><span class="line">       <span class="keyword">for</span> (BusConfDeviceTypeVO deviceTypeVO : children) &#123;</span><br><span class="line"></span><br><span class="line">           <span class="operator">/</span><span class="operator">/</span>创建查询对象</span><br><span class="line">           BusConfDeviceType paramsChildren <span class="operator">=</span> <span class="keyword">new</span> BusConfDeviceType();</span><br><span class="line">           paramsChildren.setPid(deviceTypeVO.getId());</span><br><span class="line">           <span class="operator">/</span><span class="operator">/</span>查询该节点为父节点下的所有数据</span><br><span class="line">           List<span class="operator">&lt;</span>BusConfDeviceType<span class="operator">&gt;</span> <span class="keyword">result</span> <span class="operator">=</span> this.deviceTypeMapper.select(paramsChildren);</span><br><span class="line"></span><br><span class="line">           <span class="operator">/</span><span class="operator">/</span>若该数据存在 添加集合到子节点中</span><br><span class="line">           <span class="operator">/</span><span class="operator">/</span>启用递归 继续探索叶子节点</span><br><span class="line">           if (result.size() <span class="operator">&gt;</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> <span class="keyword">result</span> <span class="operator">!=</span> <span class="keyword">null</span>) &#123;</span><br><span class="line">               <span class="operator">/</span><span class="operator">/</span> 递归调用</span><br><span class="line">               deviceTypeVO.setChildren(getChildren(deviceTypeVO.getId(),list));</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>若最后结果为空  则停止递归 返回值为<span class="keyword">null</span>  赋予上级数据children属性</span><br><span class="line">       if (children.size() <span class="operator">=</span><span class="operator">=</span> <span class="number">0</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> children;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>之后开始进行递归操作来构建数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Override</span></span><br><span class="line">   public List<span class="operator">&lt;</span>BusConfDeviceTypeVO<span class="operator">&gt;</span> getTreeData() &#123;</span><br><span class="line"></span><br><span class="line">       List<span class="operator">&lt;</span>BusConfDeviceTypeVO<span class="operator">&gt;</span> deviceTypeTree <span class="operator">=</span> <span class="keyword">new</span> ArrayList<span class="operator">&lt;&gt;</span>();</span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>首先获取到所有顶级节点</span><br><span class="line">       BusConfDeviceType param <span class="operator">=</span> <span class="keyword">new</span> BusConfDeviceType();</span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>查询全部</span><br><span class="line">       List<span class="operator">&lt;</span>BusConfDeviceType<span class="operator">&gt;</span> selectAll <span class="operator">=</span> this.deviceTypeMapper.select(param);</span><br><span class="line"></span><br><span class="line">       param.setPid(&quot;-1&quot;);</span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>查询顶级父节点</span><br><span class="line">       List<span class="operator">&lt;</span>BusConfDeviceType<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">=</span> this.deviceTypeMapper.select(param);</span><br><span class="line"></span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>结果判断</span><br><span class="line">       if (select.size() <span class="operator">&gt;</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> <span class="keyword">select</span> <span class="operator">!=</span> <span class="keyword">null</span>)&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">           select.forEach(data <span class="operator">-</span><span class="operator">&gt;</span> &#123;</span><br><span class="line">               BusConfDeviceTypeVO deviceTypeVO <span class="operator">=</span> <span class="keyword">new</span> BusConfDeviceTypeVO();</span><br><span class="line">               <span class="operator">/</span><span class="operator">/</span>构建数据</span><br><span class="line">               deviceTypeVO.setId(data.getId());</span><br><span class="line">               deviceTypeVO.setName(data.getDeviceType());</span><br><span class="line">               <span class="operator">/</span><span class="operator">/</span>子节点递归查找添加  传递父节点</span><br><span class="line">               deviceTypeVO.setChildren(getChildren(data.getId(),selectAll));</span><br><span class="line"></span><br><span class="line">               deviceTypeTree.add(deviceTypeVO);</span><br><span class="line">           &#125;);</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> deviceTypeTree;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="operator">/</span><span class="operator">/</span>递归获取children节点</span><br><span class="line">   private List<span class="operator">&lt;</span>BusConfDeviceTypeVO<span class="operator">&gt;</span> getChildren(String pid,List<span class="operator">&lt;</span>BusConfDeviceType<span class="operator">&gt;</span> list) &#123;</span><br><span class="line"></span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>建立集合</span><br><span class="line">       List<span class="operator">&lt;</span>BusConfDeviceTypeVO<span class="operator">&gt;</span> children <span class="operator">=</span> <span class="keyword">new</span> ArrayList<span class="operator">&lt;&gt;</span>();</span><br><span class="line"></span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>参数判空</span><br><span class="line">       if (StringUtils.isNotBlank(pid))&#123;</span><br><span class="line"></span><br><span class="line">           list.forEach(data <span class="operator">-</span><span class="operator">&gt;</span>&#123;</span><br><span class="line">               <span class="operator">/</span><span class="operator">/</span>若遍历的数据中的父节点id等于参数id</span><br><span class="line">               <span class="operator">/</span><span class="operator">/</span>则判定当前节点为该参数id节点下的子节点</span><br><span class="line">               if (pid.equals(data.getPid()))&#123;</span><br><span class="line">                   <span class="operator">/</span><span class="operator">/</span>构造添加结果集合</span><br><span class="line">                   BusConfDeviceTypeVO deviceTypeVO <span class="operator">=</span> <span class="keyword">new</span> BusConfDeviceTypeVO();</span><br><span class="line">                   deviceTypeVO.setId(data.getId());</span><br><span class="line">                   deviceTypeVO.setName(data.getDeviceType());</span><br><span class="line">                   children.add(deviceTypeVO);</span><br><span class="line"></span><br><span class="line">               &#125;</span><br><span class="line">           &#125;);</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>循环添加子菜单</span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>遍历children 集合</span><br><span class="line">       <span class="keyword">for</span> (BusConfDeviceTypeVO deviceTypeVO : children) &#123;</span><br><span class="line"></span><br><span class="line">           <span class="operator">/</span><span class="operator">/</span>创建查询对象</span><br><span class="line">           BusConfDeviceType paramsChildren <span class="operator">=</span> <span class="keyword">new</span> BusConfDeviceType();</span><br><span class="line">           paramsChildren.setPid(deviceTypeVO.getId());</span><br><span class="line">           <span class="operator">/</span><span class="operator">/</span>查询该节点为父节点下的所有数据</span><br><span class="line">           List<span class="operator">&lt;</span>BusConfDeviceType<span class="operator">&gt;</span> <span class="keyword">result</span> <span class="operator">=</span> this.deviceTypeMapper.select(paramsChildren);</span><br><span class="line"></span><br><span class="line">           <span class="operator">/</span><span class="operator">/</span>若该数据存在 添加集合到子节点中</span><br><span class="line">           <span class="operator">/</span><span class="operator">/</span>启用递归 继续探索叶子节点</span><br><span class="line">           if (result.size() <span class="operator">&gt;</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> <span class="keyword">result</span> <span class="operator">!=</span> <span class="keyword">null</span>) &#123;</span><br><span class="line">               <span class="operator">/</span><span class="operator">/</span> 递归调用</span><br><span class="line">               deviceTypeVO.setChildren(getChildren(deviceTypeVO.getId(),list));</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="operator">/</span><span class="operator">/</span>若最后结果为空  则停止递归 返回值为<span class="keyword">null</span>  赋予上级数据children属性</span><br><span class="line">       if (children.size() <span class="operator">=</span><span class="operator">=</span> <span class="number">0</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> children;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>这样启动项目 利用postman 进行访问 可以得出如下结果</p><p>这样data中的数据就和组件所需要的数据相同了</p><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312092140657.png" alt="img"></p><p>之后完善前端页面 回填数据</p><p>html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-tree</span> <span class="attr">class</span>=<span class="string">&quot;treeclass&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;tree&quot;</span> <span class="attr">:data</span>=<span class="string">&quot;treeData&quot;</span>   <span class="attr">:props</span>=<span class="string">&quot;defaultProps&quot;</span> @<span class="attr">node-click</span>=<span class="string">&quot;nodeclick&quot;</span> @<span class="attr">check-change</span>=<span class="string">&quot;handleClick&quot;</span>  <span class="attr">node-key</span>=<span class="string">&quot;id&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">el-tree</span>&gt;</span></span><br></pre></td></tr></table></figure><p>javascript</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getdata</span>(<span class="params"></span>) &#123; <span class="comment">//本人自定义方法 </span></span><br><span class="line">         <span class="title class_">DeviceTypeList</span>()<span class="comment">//本人自定义方法 </span></span><br><span class="line">             .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                 <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res))</span><br><span class="line"> </span><br><span class="line">                 <span class="keyword">if</span> (res.<span class="property">status</span> == <span class="number">200</span>)&#123;</span><br><span class="line">                     <span class="variable language_">this</span>.<span class="property">treeData</span> = res.<span class="property">data</span>;</span><br><span class="line">                     <span class="variable language_">this</span>.$message(&#123;</span><br><span class="line">                         <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">                         <span class="attr">message</span>: <span class="string">&#x27;数据加载成功！&#x27;</span></span><br><span class="line">                     &#125;)</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;)</span><br><span class="line">             .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                 <span class="variable language_">this</span>.<span class="property">loading</span> = <span class="literal">false</span></span><br><span class="line">                 <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;数据获取失败，请稍后再试！&#x27;</span>)</span><br><span class="line">             &#125;)</span><br><span class="line">     &#125;,</span><br></pre></td></tr></table></figure><p>这样启动前端项目 访问后 控制台便可以打印出结果 格式化后与postman获取到的结果一致</p><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312092142009.png" alt="img"></p><p>页面效果如下</p><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312092143807.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>下载网站</title>
      <link href="/posts/c833b494.html"/>
      <url>/posts/c833b494.html</url>
      
        <content type="html"><![CDATA[<p><strong>JDK历代版本</strong>：<a href="https://www.oracle.com/java/technologies/downloads/archive/">https://www.oracle.com/java/technologies/downloads/archive/</a></p><p><strong>JDK8历代版本</strong>：<a href="https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html">https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html</a></p><p><strong>WebStorm</strong>：<a href="https://www.jetbrains.com/webstorm/download/other.html">https://www.jetbrains.com/webstorm/download/other.html</a></p><p><strong>ApiPost</strong>：<a href="https://www.apipost.cn/download.html?fr=kuangshen">https://www.apipost.cn/download.html?fr=kuangshen</a></p><p><strong>Nginx</strong>：<a href="http://nginx.org/en/download.html">http://nginx.org/en/download.html</a></p><p><strong>Node</strong>：<a href="https://nodejs.org/en/download/releases/">https://nodejs.org/en/download/releases/</a></p><p><strong>python</strong>：<a href="https://www.python.org/downloads/windows/">https://www.python.org/downloads/windows/</a></p><p><strong>Centos</strong>（阿里开源）：<a href="http://mirrors.aliyun.com/centos/7/isos/x86_64/">http://mirrors.aliyun.com/centos/7/isos/x86_64/</a></p><p><strong>git淘宝镜像下载</strong>：<a href="http://npm.taobao.org/mirrors/git-for-windows/">http://npm.taobao.org/mirrors/git-for-windows/</a></p><p><strong>git官网</strong>：<a href="https://git-scm.com/">https://git-scm.com/</a></p><h3 id="jekins">jekins</h3><ul><li></li></ul><p>jenkins官网：<a href="https://jenkins.io/">https://jenkins.io/</a></p><ul><li></li></ul><p>jenkins历史版本下载：<a href="http://mirrors.jenkins.io/">http://mirrors.jenkins.io/</a></p><ul><li></li></ul><p>清华镜像地址：<a href="https://mirrors.tuna.tsinghua.edu.cn/jenkins">https://mirrors.tuna.tsinghua.edu.cn/jenkins</a></p><h3 id="python镜像源">python镜像源:</h3><ul><li><strong>清华</strong>：<a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a></li><li><strong>阿里云</strong>：<a href="http://mirrors.aliyun.com/pypi/simple/">http://mirrors.aliyun.com/pypi/simple/</a></li><li><strong>中国科技大学</strong> <a href="https://pypi.mirrors.ustc.edu.cn/simple/">https://pypi.mirrors.ustc.edu.cn/simple/</a></li><li><strong>华中理工大学</strong>：<a href="http://pypi.hustunique.com/">http://pypi.hustunique.com/</a></li><li><strong>山东理工大学</strong>：<a href="http://pypi.sdutlinux.org/">http://pypi.sdutlinux.org/</a></li><li><strong>豆瓣</strong>：<a href="http://pypi.douban.com/simple/">http://pypi.douban.com/simple/</a></li></ul><h3 id="驱动下载">驱动下载</h3><ul><li><strong>Firefox</strong> 浏览器驱动：<a href="https://github.com/mozilla/geckodriver/releases">Firefox</a></li><li><strong>Chrome</strong> 浏览器驱动：<a href="https://chromedriver.storage.googleapis.com/index.html">Chrome</a></li><li><strong>IE</strong> 浏览器驱动：<a href="http://selenium-release.storage.googleapis.com/index.html">IE</a></li><li><strong>Edge</strong> 浏览器驱动：<a href="https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/">Edge</a></li><li><strong>PhantomJS</strong> 浏览器驱动：<a href="https://phantomjs.org/">PhantomJS</a></li><li><strong>Opera</strong> 浏览器驱动：<a href="https://github.com/operasoftware/operachromiumdriver/releases">Opera</a></li></ul><h3 id="Es">Es</h3><p><strong>ES官网</strong>：<a href="https://www.elastic.co/cn/downloads/">https://www.elastic.co/cn/downloads/</a></p><p><strong>Kibana官网：</strong><a href="https://www.elastic.co/cn/kibana/">https://www.elastic.co/cn/kibana/</a></p><p><strong>ElasticSearch</strong>: <a href="https://mirrors.huaweicloud.com/elasticsearch/?C=N&amp;O=D">https://mirrors.huaweicloud.com/elasticsearch/?C=N&amp;O=D</a></p><p><strong>logstash</strong>: <a href="https://mirrors.huaweicloud.com/logstash/?C=N&amp;O=D">https://mirrors.huaweicloud.com/logstash/?C=N&amp;O=D</a></p><p><strong>kibana</strong>: <a href="https://mirrors.huaweicloud.com/kibana/?C=N&amp;O=D">https://mirrors.huaweicloud.com/kibana/?C=N&amp;O=D</a></p><p><strong>下载head插件</strong>: <a href="https://github.com/mobz/elasticsearch-head/archive/master.zip">https://github.com/mobz/elasticsearch-head/archive/master.zip</a></p><h3 id="Docker">Docker</h3><p>Hub：<a href="https://hub.docker.com/choose-plan?ref=signup">https://hub.docker.com/choose-plan?ref=signup</a></p><p>Docs：<a href="https://docs.docker.com/engine/install/centos/">https://docs.docker.com/engine/install/centos/</a></p>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学习网站</title>
      <link href="/posts/52e318f2.html"/>
      <url>/posts/52e318f2.html</url>
      
        <content type="html"><![CDATA[<p>全面学习网站:<a href="https://github.com/XiangLinPro/IT_book">https://github.com/XiangLinPro/IT_book</a></p><p>码农教程：<a href="http://www.manongjc.com/">http://www.manongjc.com/</a></p><p>Mikuools：<a href="https://tools.miku.ac/">https://tools.miku.ac/</a></p><p>编程语言网站：<a href="http://c.biancheng.net/sitemap/">http://c.biancheng.net/sitemap/</a></p><p>Vant学习网站：<a href="https://www.w3cschool.cn/vantlesson/">https://www.w3cschool.cn/vantlesson/</a></p><p>W3CSchool：<a href="https://www.w3cschool.cn/">https://www.w3cschool.cn/</a></p><p>w3xue：<a href="https://www.w3xue.com/exp/">https://www.w3xue.com/exp/</a></p><p>ERP系统网站：<a href="http://www.dimix.cn/">http://www.dimix.cn/</a></p><h2 id="一、常用网站">一、常用网站</h2><p>力扣:<a href="https://leetcode-cn.com/problemset/all/">https://leetcode-cn.com/problemset/all/</a></p><p>牛客网:<a href="https://www.nowcoder.com/">https://www.nowcoder.com/</a></p><p>CSDN:<a href="https://www.csdn.net/">https://www.csdn.net/</a></p><p>博客园:<a href="https://www.cnblogs.com/">https://www.cnblogs.com/</a></p><p>Github:<a href="https://github.com/">https://github.com/</a></p><p>慕课网:<a href="https://www.imooc.com/">https://www.imooc.com/</a></p><p>Oracle:<a href="https://www.oracle.com/index.html">https://www.oracle.com/index.html</a></p><p>简历网站:<a href="https://www.job592.com/">https://www.job592.com/</a></p><h2 id="二、java">二、java</h2><p>java单词：<a href="https://www.cnblogs.com/hinux/articles/10201988.html">https://www.cnblogs.com/hinux/articles/10201988.html</a></p><p>java学习技术树：<a href="https://edu.csdn.net/skill/java">https://edu.csdn.net/skill/java</a></p><p>java黑马学习路线图：<a href="https://blog.csdn.net/yinuo_chao/article/details/123242105">https://blog.csdn.net/yinuo_chao/article/details/123242105</a></p><p>java基础笔记：<a href="https://mrjokersince1997.github.io/My-Notes/#/">https://mrjokersince1997.github.io/My-Notes/#/</a></p><p>java项目:<a href="https://markerhub.com/">https://markerhub.com/</a></p><p>狂神教程：<a href="https://www.kuangstudy.com/">https://www.kuangstudy.com/</a></p><p>springboot教程：<a href="http://www.chilangedu.com/course/1489582623.html">http://www.chilangedu.com/course/1489582623.html</a></p><p>springboot教程：<a href="https://lizhou.blog.csdn.net/category_9196017_2.html">https://lizhou.blog.csdn.net/category_9196017_2.html</a></p><p>创建Springboot项目官网：<a href="https://start.spring.io/">https://start.spring.io/</a></p><p>thymeleaf文档：<a href="https://www.thymeleaf.org/documentation.html">https://www.thymeleaf.org/documentation.html</a></p><p>Banner在线生成工具：<a href="https://www.bootschool.net/ascii/">https://www.bootschool.net/ascii/</a></p><p>修改Tomcat图标工具：<a href="https://www.bitbug.net/">https://www.bitbug.net/</a></p><p>修改图标操作步骤：<a href="http://www.javashuo.com/article/p-wqvgdfqf-sv.html">http://www.javashuo.com/article/p-wqvgdfqf-sv.html</a></p><p>自学小网站:<a href="https://how2j.cn/">https://how2j.cn/</a></p><p>java常用网站:<a href="https://blog.csdn.net/scmrpu/article/details/50487172">https://blog.csdn.net/scmrpu/article/details/50487172</a></p><h2 id="三、Web">三、Web</h2><p>HTML5+CSS脚本:<a href="https://sc.chinaz.com/jiaoben/">https://sc.chinaz.com/jiaoben/</a></p><p>Bootstrap(web)学习网站:<a href="https://www.bootcss.com/">https://www.bootcss.com/</a></p><p>vuetify中文官网：<a href="https://vuetifyjs.com/zh-Hans/">https://vuetifyjs.com/zh-Hans/</a></p><p>JQuery插件库：<a href="https://www.jq22.com/">https://www.jq22.com/</a></p><p>Vue cli：<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html">https://cli.vuejs.org/zh/guide/creating-a-project.html</a></p><p>element：<a href="https://element.eleme.cn/#/zh-CN/component/installation">https://element.eleme.cn/#/zh-CN/component/installation</a></p><p>React：<a href="https://react.docschina.org/">https://react.docschina.org/</a></p><p>JSON工具：<a href="https://www.bejson.com/othertools/cron/">https://www.bejson.com/othertools/cron/</a></p><h2 id="四、数据结构和算法">四、数据结构和算法</h2><p>十大经典算法:<a href="https://www.cnblogs.com/ice-line/p/11753852.html">https://www.cnblogs.com/ice-line/p/11753852.html</a></p><p>八大数据结构:<a href="https://blog.csdn.net/yeyazhishang/article/details/82353846">https://blog.csdn.net/yeyazhishang/article/details/82353846</a></p><p>数据和算法总结:<a href="https://www.cnblogs.com/xkzhangsanx/p/10888179.html">https://www.cnblogs.com/xkzhangsanx/p/10888179.html</a></p><h2 id="五、数据库">五、数据库</h2><p>mysql安装教程:</p><p>Oracle安装教程:<a href="https://www.cnblogs.com/plutozzl/p/13490348.html">https://www.cnblogs.com/plutozzl/p/13490348.html</a></p><p>PLSQL安装教程:<a href="https://www.cnblogs.com/gaozejie/p/9741186.html">https://www.cnblogs.com/gaozejie/p/9741186.html</a></p><p>注册码:<a href="https://www.cnblogs.com/jijm123/p/13393008.html">https://www.cnblogs.com/jijm123/p/13393008.html</a></p><p>Oracle和mysql区别:<a href="https://buxianshan.xyz/archives/26.html">https://buxianshan.xyz/archives/26.html</a></p><p>mysql练习题:<a href="https://blog.csdn.net/original_recipe/article/details/91958663">https://blog.csdn.net/original_recipe/article/details/91958663</a></p><p>mysql面试题:<a href="https://www.cnblogs.com/williamjie/p/11081592.html">https://www.cnblogs.com/williamjie/p/11081592.html</a></p><h2 id="六、C语言">六、C语言</h2><p>C语言学习:<a href="https://blog.csdn.net/weixin_44617968/article/details/117656810?utm_medium=distribute.pc_feed_404.none-task-blog-2">https://blog.csdn.net/weixin_44617968/article/details/117656810?utm_medium=distribute.pc_feed_404.none-task-blog-2</a>PERSONRECdefaultdefault-20.control40</p><h2 id="七、帮助文档">七、帮助文档</h2><p>HTML帮助文档:<a href="https://man.ilovefishc.com/html5/">https://man.ilovefishc.com/html5/</a></p><p>CSS帮助文档:<a href="https://man.ilovefishc.com/css3/">https://man.ilovefishc.com/css3/</a></p><p>JQuery帮助文档:<a href="https://www.jquery123.com/">https://www.jquery123.com/</a></p><p>W3school帮助文档:<a href="https://www.w3school.com.cn/">https://www.w3school.com.cn/</a></p><h2 id="八、测试">八、测试</h2><p>猪猪网站：<a href="https://www.iculture.cc/category/software">https://www.iculture.cc/category/software</a></p><p>Katalon Studio：<a href="http://www.51ste.com/front/det-12.html">http://www.51ste.com/front/det-12.html</a></p><p>jmeter黑羽教程：<a href="https://www.byhy.net/">https://www.byhy.net/</a></p><h2 id="九、面试">九、面试</h2><p>java基础：<a href="https://www.javanav.com/interview/93b0069472fd479393006c0e73043fc4.html">https://www.javanav.com/interview/93b0069472fd479393006c0e73043fc4.html</a></p><p>java全：<a href="https://blog.csdn.net/ThinkWon/article/details/103592572">https://blog.csdn.net/ThinkWon/article/details/103592572</a></p><p>八股文：<a href="http://interviewtop.top/#/index">http://interviewtop.top/#/index</a></p><p>前端面试：<a href="https://juejin.cn/post/7061588533214969892">https://juejin.cn/post/7061588533214969892</a></p><h2 id="十、导航">十、导航</h2><p>前端导航：<a href="https://www.webjike.com/web.html#row-24">https://www.webjike.com/web.html#row-24</a></p><p>web前端导航：<a href="http://www.alloyteam.com/nav/">http://www.alloyteam.com/nav/</a></p><p>前站导航：<a href="http://www.frontendjs.com/">http://www.frontendjs.com/</a></p><p>编程导航：<a href="https://www.code-nav.cn/">https://www.code-nav.cn/</a></p><p>程序员导航：<a href="http://www.cxysite.com/">http://www.cxysite.com/</a></p><p>设宝导航：<a href="https://hao.sheboo.com/qian">https://hao.sheboo.com/qian</a></p><p>破解：<a href="https://www.ypojie.com/pc">https://www.ypojie.com/pc</a></p><p>软件先锋：<a href="https://soft.macxf.com/">https://soft.macxf.com/</a></p><p>福利导航：<a href="https://www.coderfuli.com/#/home#openSource">https://www.coderfuli.com/#/home#openSource</a></p><h2 id="十一、组件">十一、组件</h2><p>图标：<a href="https://www.iconfont.cn/">https://www.iconfont.cn/</a></p><p>pixso：<a href="https://pixso.cn/">https://pixso.cn/</a></p><p>前端Vant：<a href="https://www.wenjiangs.com/doc/vant-home">https://www.wenjiangs.com/doc/vant-home</a></p><p>前端AntDesign：<a href="https://ant.design/index-cn">https://ant.design/index-cn</a></p><p>前端AntV：<a href="https://antv.vision/zh">https://antv.vision/zh</a></p><p>前端bootstrap Blazor：<a href="https://www.blazor.zone/dropdowns">https://www.blazor.zone/dropdowns</a></p><p>前端 Layui：<a href="https://layuion.com/docs/">https://layuion.com/docs/</a></p><p>前端Taro：<a href="https://taro-ui.jd.com/#/docs/swiper">https://taro-ui.jd.com/#/docs/swiper</a></p><p>前端Vuetifyjs：<a href="https://vuetifyjs.com/en/introduction/why-vuetify">https://vuetifyjs.com/en/introduction/why-vuetify</a></p><p>腾讯 TDesign企业级设计体系https://tdesign.tencent.com/</p><p>字节跳动 arco.design企业级设计系统：<a href="https://arco.design/">https://arco.design/</a></p><p>抖音的semidesign 企业应用设计系统：<a href="https://semi.design/zh-CN/">https://semi.design/zh-CN/</a></p><p>蚂蚁金服 Ant Design企业级产品设计体系：<a href="https://ant.design/index-cn">https://ant.design/index-cn</a></p><p>蚂蚁金服数据可视化AntV：<a href="https://antv.vision/zh">https://antv.vision/zh</a></p><p>饿了么 Element桌面端组件库：<a href="https://element.eleme.cn/#/zh-CN">https://element.eleme.cn/#/zh-CN</a></p><p>阿里 Alibaba Fusion Design企业级中后台设计系统：<a href="https://fusion.design/pc">https://fusion.design/pc</a></p><p>Teambition-ClarityDesign设计系统：<a href="https://design.teambition.com/">https://design.teambition.com/</a></p><p>阿里云管控平台Xconsole：<a href="https://xconsole.cloud/">https://xconsole.cloud/</a></p><p>阿里飞冰：<a href="https://ice.work/">https://ice.work/</a></p><p>华为 华为云DevUI中后台产品设计系统：<a href="https://devui.design/home">https://devui.design/home</a></p><p>百度 百度智能云CxD·规范：<a href="http://yunshe.design/#/guide">http://yunshe.design/#/guide</a></p><p>京东 UDC Design前中后台设计体系：<a href="https://findesign.jd.com/#/home">https://findesign.jd.com/#/home</a></p><h2 id="十二、学习项目">十二、学习项目</h2><p>瑞吉外卖：<a href="https://gitee.com/xuleiProject/delivery-springboot">https://gitee.com/xuleiProject/delivery-springboot</a></p><p><a href="https://github.com/twbs/bootstrap/releases/download/v3.4.1/bootstrap-3.4.1-dist.zip">https://github.com/twbs/bootstrap/releases/download/v3.4.1/bootstrap-3.4.1-dist.zip</a></p><p><a href="https://github.com/twbs/bootstrap/archive/v3.4.1.zip">https://github.com/twbs/bootstrap/archive/v3.4.1.zip</a></p><p><a href="https://github.com/twbs/bootstrap-sass/archive/v3.4.1.tar.gz">https://github.com/twbs/bootstrap-sass/archive/v3.4.1.tar.gz</a></p>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>发送mail</title>
      <link href="/posts/38a355ba.html"/>
      <url>/posts/38a355ba.html</url>
      
        <content type="html"><![CDATA[<h3 id="1-添加依赖">1.添加依赖</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-配置文件">2.配置文件</h3><p>properties：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.mail.username</span>=<span class="string">XXXXXXXX@qq.com</span></span><br><span class="line"><span class="attr">spring.mail.password</span>=<span class="string">你的qq授权码</span></span><br><span class="line"><span class="attr">spring.mail.host</span>=<span class="string">smtp.qq.com</span></span><br><span class="line"><span class="comment"># qq需要配置ssl</span></span><br><span class="line"><span class="attr">spring.mail.properties.mail.smtp.ssl.enable</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure><p>yaml：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mail:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">XXXXXXXXX@qq.com</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">你的qq授权码</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">smtp.qq.com</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">smtp</span></span><br></pre></td></tr></table></figure><p>获取授权码：在QQ邮箱中的设置-&gt;账户-&gt;开启pop3和smtp服务</p><h3 id="3-测试">3.测试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">JavaMailSenderImpl mailSender;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="comment">//邮件设置1：一个简单的邮件</span></span><br><span class="line">   <span class="type">SimpleMailMessage</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleMailMessage</span>();</span><br><span class="line">   message.setSubject(<span class="string">&quot;通知-明天早起上班&quot;</span>);</span><br><span class="line">   message.setText(<span class="string">&quot;明天9:00开会&quot;</span>);</span><br><span class="line"></span><br><span class="line">   message.setTo(<span class="string">&quot;24736743@qq.com&quot;</span>);</span><br><span class="line">   message.setFrom(<span class="string">&quot;24736743@qq.com&quot;</span>);</span><br><span class="line">   mailSender.send(message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextLoads2</span><span class="params">()</span> <span class="keyword">throws</span> MessagingException &#123;</span><br><span class="line">   <span class="comment">//邮件设置2：一个复杂的邮件</span></span><br><span class="line">   <span class="type">MimeMessage</span> <span class="variable">mimeMessage</span> <span class="operator">=</span> mailSender.createMimeMessage();</span><br><span class="line">   <span class="type">MimeMessageHelper</span> <span class="variable">helper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(mimeMessage, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">   helper.setSubject(<span class="string">&quot;通知-明天来狂神这听课&quot;</span>);</span><br><span class="line">   helper.setText(<span class="string">&quot;&lt;b style=&#x27;color:red&#x27;&gt;今天 7:30来开会&lt;/b&gt;&quot;</span>,<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//发送附件</span></span><br><span class="line">   helper.addAttachment(<span class="string">&quot;1.jpg&quot;</span>,<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;&quot;</span>));</span><br><span class="line">   helper.addAttachment(<span class="string">&quot;2.jpg&quot;</span>,<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line">   helper.setTo(<span class="string">&quot;24736743@qq.com&quot;</span>);</span><br><span class="line">   helper.setFrom(<span class="string">&quot;24736743@qq.com&quot;</span>);</span><br><span class="line"></span><br><span class="line">   mailSender.send(mimeMessage);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hibernate Validator</title>
      <link href="/posts/8899488c.html"/>
      <url>/posts/8899488c.html</url>
      
        <content type="html"><![CDATA[<h2 id="Hibernate-Validator">Hibernate Validator</h2><h4 id="引入依赖">引入依赖</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--web--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--校验依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="常用注解">常用注解</h4><table><thead><tr><th>注解</th><th>说明</th></tr></thead><tbody><tr><td><a href="/Nul">@Nul </a></td><td>被注释的元素必须为 null</td></tr><tr><td><a href="/NotNull">@NotNull </a></td><td>被注释的元素必须不为 null</td></tr><tr><td><a href="/AssertTrue">@AssertTrue </a></td><td>被注释的元素必须为 true</td></tr><tr><td><a href="/AssertFalse">@AssertFalse </a></td><td>被注释的元素必须为 false</td></tr><tr><td><a href="/value">@Min(value) </a></td><td>被注释的元素必须是一个数字，其值必须大于等于指定的最小值</td></tr><tr><td><a href="/value">@Max(value) </a></td><td>被注释的元素必须是一个数字，其值必须小于等于指定的最大值</td></tr><tr><td><a href="/value">@DecimalMin(value) </a></td><td>被注释的元素必须是一个数字，其值必须大于等于指定的最小值</td></tr><tr><td><a href="/value">@DecimalMax(value) </a></td><td>被注释的元素必须是一个数字，其值必须小于等于指定的最大值</td></tr><tr><td>@Size(max, min)</td><td>被注释的元素的大小必须在指定的范围内，元素必须为集合，代表集合个数</td></tr><tr><td>[@Pattern(regexp ](/Pattern(regexp )</td><td></td></tr><tr><td>= )</td><td>正则表达式校验</td></tr><tr><td><a href="/Digits">@Digits </a></td><td></td></tr><tr><td>(integer, fraction)</td><td>被注释的元素必须是一个数字，其值必须在可接受的范围内</td></tr><tr><td><a href="/Past">@Past </a></td><td>被注释的元素必须是一个过去的日期</td></tr><tr><td><a href="/Future">@Future </a></td><td>被注释的元素必须是一个将来的日期</td></tr><tr><td><a href="/Email">@Email </a></td><td>被注释的元素必须是电子邮箱地址</td></tr><tr><td>@Length(min=, max=)</td><td>被注释的字符串的大小必须在指定的范围内，必须为数组或者字符串，若微数组则表示为数组长度，字符串则表示为字符串长度</td></tr><tr><td><a href="/NotEmpty">@NotEmpty </a></td><td>被注释的字符串的必须非空</td></tr><tr><td>@Range(min=, max=)</td><td>被注释的元素必须在合适的范围内</td></tr><tr><td><a href="/NotBlank">@NotBlank </a></td><td>被注释的字符串的必须非空</td></tr><tr><td><a href="/URI">@URI </a></td><td>字符串是否是一个有效的URL</td></tr></tbody></table><h3 id="注意">注意</h3><ul><li><a href="/NotEmpty">@NotEmpty </a> 用在集合类上面</li><li><a href="/NotBlank">@NotBlank </a> 用在String上面</li><li><a href="/NotNull">@NotNull </a> 用在基本类型上</li></ul><h3 id="基本使用">基本使用</h3><h4 id="对象（entity）">对象（entity）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.validator.constraints.Length;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="comment">// @NotNull 不能为null</span></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;用户id不能为空&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @NotEmpty 不能为空，这里的空是指空字符串</span></span><br><span class="line">    <span class="meta">@NotEmpty(message = &quot;用户名不能为空&quot;)</span></span><br><span class="line">    <span class="comment">// @Length(min=,max=) 检查所属的字段的长度是否在min和max之间，只能用于字符串</span></span><br><span class="line">    <span class="meta">@Length(max = 50, message = &quot;用户名长度不能超过50&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Max(value = 80,message = &quot;年龄最大为80&quot;)</span></span><br><span class="line">    <span class="meta">@Min(value = 18,message = &quot;年龄最小为18&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Pattern(regex=) 被注释的元素必须符合指定的正则表达式</span></span><br><span class="line">    <span class="meta">@Pattern(regexp = &quot;[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$&quot;,</span></span><br><span class="line"><span class="meta">            message = &quot;邮箱格式不正确&quot;)</span></span><br><span class="line">    <span class="comment">// @Email(message = &quot;请输入正确的邮箱&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"> <span class="meta">@Size(min = 2, max = 5, message = &quot;长度不符合要求&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Min(value = 10, message = &quot;不合法年龄&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;用户列表不能为空&quot;)</span></span><br><span class="line">    <span class="meta">@Valid</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;User&gt; users;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;订单信息不能为空&quot;)</span></span><br><span class="line">    <span class="meta">@Valid</span></span><br><span class="line">    <span class="keyword">private</span> Order order;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//内嵌的用户对象</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;地址不能为空&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String addr;</span><br><span class="line">    <span class="meta">@Email(message = &quot;邮箱格式不正确&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//内嵌的订单对象</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Order</span> &#123;</span><br><span class="line">    <span class="meta">@DecimalMin(value = &quot;1.00&quot;, message = &quot;价格不正确&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal price;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Controller层">Controller层</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.itcast.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.annotation.Validated;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotBlank;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Validated</span> <span class="comment">// 开启hibernate-validator校验功能</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 简单数据类型校验，</span></span><br><span class="line">    <span class="comment">// 这里用@RequestMapping的原因是我们通过浏览器的方式进行测试，对请求方式没有要求，只要路径匹配即可</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(<span class="meta">@NotBlank(message = &quot;id不能为空&quot;)</span> String id)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;delete...&quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 对象属性校验 @Validated</span></span><br><span class="line">    <span class="comment">// 这里用@RequestMapping的原因是我们通过浏览器的方式进行测试，对请求方式没有要求，只要路径匹配即可</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(<span class="meta">@Validated</span> User user)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;save...&quot;</span> + user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEA</title>
      <link href="/posts/3c1e27f1.html"/>
      <url>/posts/3c1e27f1.html</url>
      
        <content type="html"><![CDATA[<h2 id="IDEA配置">IDEA配置</h2><h3 id="调节颜色">调节颜色</h3><p><img src="https://cdn.staticaly.com/gh/qiqiCSDN/Cartographic_bed@main/2023/1image-20230109141943280.png#id=fXFsz&amp;originHeight=879&amp;originWidth=1465&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="忽略大小写">忽略大小写</h3><p><img src="https://cdn.staticaly.com/gh/qiqiCSDN/Cartographic_bed@main/2023/1image-20230109142842731.png#id=dimvx&amp;originHeight=879&amp;originWidth=1465&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="自动导包">自动导包</h3><p><img src="https://cdn.staticaly.com/gh/qiqiCSDN/Cartographic_bed@main/2023/1image-20230109143112310.png#id=WDhUo&amp;originHeight=879&amp;originWidth=1465&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="设置文件编码">设置文件编码</h3><p><img src="https://cdn.staticaly.com/gh/qiqiCSDN/Cartographic_bed@main/2023/1image-20230109143221915.png#id=SJnmd&amp;originHeight=879&amp;originWidth=1465&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="配置JDK版本">配置JDK版本</h3><p><img src="https://cdn.staticaly.com/gh/qiqiCSDN/Cartographic_bed@main/2023/1image-20230109143730151.png#id=gNCze&amp;originHeight=879&amp;originWidth=1465&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="序列化自动生成serialVersionUID">序列化自动生成serialVersionUID</h3><p>File --&gt; Settings --&gt; Editor --&gt; Inspections --&gt; Java --&gt; Serialization issues --&gt; 勾选Serializable class without ‘serialVersionUID’ 如下图所<br><img src="https://cdn.staticaly.com/gh/qiqiCSDN/Cartographic_bed@main/2023/1image-20230109144003598.png#id=ddirX&amp;originHeight=879&amp;originWidth=1465&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="设置新项目打开方式">设置新项目打开方式</h3><p><img src="https://cdn.staticaly.com/gh/qiqiCSDN/Cartographic_bed@main/2023/1image-20230109144211687.png#id=zCO9Y&amp;originHeight=879&amp;originWidth=1465&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="设置exit">设置exit</h3><p>Settings→<a href="https://so.csdn.net/so/search?q=System&amp;spm=1001.2101.3001.7020">System</a> Settings→Startup/Shutdown<br><img src="https://cdn.staticaly.com/gh/qiqiCSDN/Cartographic_bed@main/2023/1image-20230109144312285.png#id=VNRau&amp;originHeight=879&amp;originWidth=1465&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="注释设置">注释设置</h3><p><img src="https://cdn.staticaly.com/gh/qiqiCSDN/Cartographic_bed@main/2023/1image-20230109155623368.png#id=Spl1N&amp;originHeight=879&amp;originWidth=1465&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h3 id="去除黄线警告">去除黄线警告</h3><p>第一步：取消勾选 No data sources configured<br>Editor ⇒ Inspections ⇒ SQL ⇒ No data sources configure<br><img src="https://cdn.staticaly.com/gh/qiqiCSDN/Cartographic_bed@main/2023/1image-20230110095855599.png#id=KTw5E&amp;originHeight=887&amp;originWidth=1481&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>第二步：去掉 SQL dialect is not configured 警告<br>在No data sources configure的下方，有个SQL dialect datection，取消勾选后apply<br><img src="https://cdn.staticaly.com/gh/qiqiCSDN/Cartographic_bed@main/2023/1image-20230110100225700.png#id=ShJri&amp;originHeight=887&amp;originWidth=1481&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h1>IDEA插件</h1><p>在IDEA中，Ctrl + Alt + S 选择 Plugins，可以添加很多帮助我们开发的插件，这里推荐几个我个人认为比较实用的插件。<br>（插件虽好，可不能贪多哦，插件多了IDEA运行起来会很卡。）</p><h3 id="1-GitHub-Copilot">1.GitHub Copilot</h3><p>GitHub Copilot 是 GitHub 官方和 OpenAI联合发布一款 IDEA 插件，支持代码自动补全。<br>我们只需要编写好相关的方法名或注释，copilot 就会自动根据我们的描述提示代码。<br>注意：如果想用Copilot的话，需要将 IntelliJ IDEA 升级到 2021.2 或以上版本<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986565305-f9e302ca-a6ec-4b1d-91cf-87b1cd471d23.png#averageHue=%232e323a&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=uf90ba3cd&amp;originHeight=1291&amp;originWidth=1451&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ua5f177ca-408d-4247-84b3-76d9b4747fa&amp;title=" alt=""><br>安装之后，会在下方有一个小机器人的标识，需要和 GitHub 账号进行绑定。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986565435-f3341655-1d36-4380-84da-6ddaf4fa1096.png#averageHue=%232f343d&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=ud39e9111&amp;originHeight=305&amp;originWidth=574&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ub65dd744-81c6-46b0-8d09-7c48c2e5e18&amp;title=" alt=""><br>Tab：采用这段代码<br>Alt + [：切换上一条推荐<br>Alt + ]：切换下一条推荐<br>Esc：拒绝推荐<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986565357-e1676afa-48c9-4c01-907c-be67f01a2995.png#averageHue=%23212326&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u9ed63eaf&amp;originHeight=229&amp;originWidth=867&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ue28847c4-e227-407a-af91-4bc6d4a51bd&amp;title=" alt=""><br><strong>官网地址：</strong><a href="https://github.com/features/copilot/">https://github.com/features/copilot/</a><br>需要说明的是，这个插件需要绑定 paypal，前两个月是不收费的，后面会自动扣款。价格如下：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986565232-7f245d30-5a13-44d7-9b16-002319e0c501.png#averageHue=%2331363d&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=uba0968aa&amp;originHeight=947&amp;originWidth=1795&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u2deeab49-833c-4fc3-a05a-65b17d915d1&amp;title=" alt=""></p><h3 id="2-MyBatisCodeHelperPro">2.MyBatisCodeHelperPro</h3><p>破解：（3.2.4以下）   <a href="http://ytxy.xyz/pages/e0c8bf/">http://ytxy.xyz/pages/e0c8bf/</a><br>（3.2.4以上） <a href="http://ytxy.xyz/pages/mchp_new/">http://ytxy.xyz/pages/mchp_new/</a><br>MyBatisCodeHelperPro 是国人开发的一款 MyBatis 开发辅助插件。功能丰富，包含了 MyBatisX 的 java 和 xml 文件互跳功能、xml 中字段提示功能、代码生成功能、xml 中 SQL 执行功能等。<img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986565217-3df1dc86-0c0a-49e1-9fd2-cb07a2682787.png#averageHue=%23303439&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=uac957dde&amp;originHeight=1281&amp;originWidth=1511&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=uda772def-70e5-41f1-a4e8-95ff60d26d0&amp;title=" alt=""><br>官方说明中已经包含了自动提示功能的截图，这里介绍一下 xml 中 SQL 执行功能。<br>安装插件之后，在 xml 文件的 SQL 语句左边会有一个执行按钮，<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986566531-e2937c9d-51c3-4366-a023-b99e9a78e98a.png#averageHue=%233a4839&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u0dae8447&amp;originHeight=448&amp;originWidth=1438&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u1f13b055-0803-4812-8e71-7952153b1b3&amp;title=" alt=""><br>点击执行按钮，如果需要入参，输入指定的入参，可以将 SQL 动态拼接好，如果有在 IDEA 中连接数据库，就可以直接在相应的数据库中执行。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986566488-aaef3b90-68ed-4e24-9998-ee11466e14e7.png#averageHue=%232c2e32&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u50ac8e4d&amp;originHeight=1491&amp;originWidth=1446&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ufd8521d2-70f9-4850-8acb-59c66a8d022&amp;title=" alt=""></p><h3 id="3-Maven-Helper">3.Maven Helper</h3><p>Maven Helper 是一款 Maven 依赖管理的辅助插件，主要方便我们处理依赖冲突。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986566519-ac7c532d-2a9b-4578-80ca-c09435c2df44.png#averageHue=%2331353a&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=uafb7caf8&amp;originHeight=1282&amp;originWidth=1509&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ueca342d5-e900-44d1-a193-d081db83d89&amp;title=" alt=""><br>安装插件之后，会在 pom.xml 文件下方增加一栏 Dependency Analyzer。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986566492-92c8ccd3-4ca2-49c8-90a5-998fe905183b.png#averageHue=%232d2f33&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u823d8ac2&amp;originHeight=738&amp;originWidth=985&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u00ff084d-56b0-4f52-8b8d-45f38703d97&amp;title=" alt=""><br>如果 pom 中存在依赖冲突，这里会显示出来，我们可以选择查看冲突依赖的具体位置，或者直接排除。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986566489-46db8669-7c68-4995-8e5b-1862ae84dbae.png#averageHue=%232f3236&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u251e913a&amp;originHeight=892&amp;originWidth=1428&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u471e665a-32ef-4217-a53b-cb562276520&amp;title=" alt=""></p><h3 id="4-Translation">4.Translation</h3><p>Translation 是一款非常好用的翻译插件，阅读源码时可以将注释翻译成中文。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986567232-f33fb3c6-687e-4499-a38e-0fdce7f0880e.png#averageHue=%2335393e&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u834469e4&amp;originHeight=1253&amp;originWidth=1514&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=uc36a34a5-4163-4929-99bb-bc46f92ac73&amp;title=" alt=""><br>这款软件在使用之前，需要先配置自己的翻译引擎信息。<br>Ctrl + Alt + S -&gt; Tools -&gt; Translation，选择配置。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986567269-71e2990c-ef0e-4e71-b4f5-9ae27625b3a2.png#averageHue=%232e3135&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=ue55aeb3e&amp;originHeight=1459&amp;originWidth=1970&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u741ac2bb-b469-4c42-a3f1-7da61ed5177&amp;title=" alt=""><br>这里我们可以输入翻译引擎的配置信息，没有的话可以点击链接去免费申请。<br>申请有道翻译地址：<a href="https://ai.youdao.com/#/">https://ai.youdao.com/#/</a><br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986567406-fee4d7d0-f8c2-426e-ae1b-3d6ca386b983.png#averageHue=%232f333b&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u1020374d&amp;originHeight=478&amp;originWidth=652&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ubbf68dd2-b52a-448d-aee8-284a06fc590&amp;title=" alt=""><br>登录之后，点击右上方进入个人中心。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986567762-734a56b5-742d-486c-9dcd-c1e7f8d83f7f.png#averageHue=%235184ea&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=ua2c88904&amp;originHeight=1298&amp;originWidth=2560&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u6a2f87b9-36a6-4d0f-af78-b937bb01367&amp;title=" alt=""><br>点击 应用总览 -&gt; 创建应用<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986567768-27046a8f-bc1a-40ec-8318-5cc5df43dd0e.png#averageHue=%23eee797&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=ued0c5cea&amp;originHeight=458&amp;originWidth=2560&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u4d886937-cf13-4dc9-acaf-51860c27fdd&amp;title=" alt=""><br>输入相关信息，点击 确定。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986568225-ee9de554-7fcb-4920-b742-ebe84abc265a.png#averageHue=%23e1cca9&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u3db402f0&amp;originHeight=1177&amp;originWidth=1598&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u92753dfa-7f9c-4e7f-817f-8d17ed2a7c6&amp;title=" alt=""><br>创建好之后，将我们的应用ID和密钥填到 IDEA 的配置中即可。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986568597-cf79d518-6077-4325-bf79-c9929ce6bddd.png#averageHue=%23e5c89b&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u79bed5fa&amp;originHeight=641&amp;originWidth=2560&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=uc8bd4535-5719-450d-b9b2-03ce70135a5&amp;title=" alt=""><br>使用的时候可以选择想要翻译的文本，右键，选择 Translate Selection。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986568627-46158f30-8a30-4391-b14d-78a05702a713.png#averageHue=%2322252b&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=uc0aedada&amp;originHeight=718&amp;originWidth=1629&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u7acea2f8-6919-4468-91e6-1ef053b56f6&amp;title=" alt=""><br>就可以看到翻译后的结果了。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986568900-ed1ace75-f48a-4e74-a538-6e4805dc4904.png#averageHue=%23262a31&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=ubbbf2a62&amp;originHeight=547&amp;originWidth=1569&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u06ea82b9-2a9e-4c09-8072-1dd0af053b0&amp;title=" alt=""></p><h3 id="5-Api-Savior">5.Api Savior</h3><p>Api Savior 是一款接口文档导出插件。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986569272-dad4542c-f59b-4371-bba3-2d8858fb8553.png#averageHue=%232d3238&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u157d24fc&amp;originHeight=1025&amp;originWidth=1501&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u7a686406-d7e4-4694-ae51-84538de982d&amp;title=" alt=""><br>我们可以在想要导出类名右键，选择 Generate Api Interface Doc，就会帮我们生成接口文档的 MarkDown 格式文件内容，也可以在包结构中右键批量导出。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986569426-0dbdadf7-0159-437e-ab82-e7060851e516.png#averageHue=%2327292e&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u1b96417d&amp;originHeight=813&amp;originWidth=1251&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=uc8eb5ed0-54b5-4de7-9558-32ed509fcf6&amp;title=" alt=""><br>我们将弹窗中的内容，复制粘贴到 MarkDown 文件中即可。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986569700-57599580-d216-4f91-979a-2fa4edf36560.png#averageHue=%232f3540&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u7fe48a67&amp;originHeight=536&amp;originWidth=681&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=uacf1e4b0-2c86-43e0-b4a3-bc14abce181&amp;title=" alt=""><br>MarkDown中文件的展示效果如下：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986569710-60d0a267-1e7b-45f8-82be-f09140273b7b.png#averageHue=%23363a3e&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=ua00036bc&amp;originHeight=1018&amp;originWidth=2158&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u9adcc8f5-93ab-4b0c-a7ca-2002800f997&amp;title=" alt=""><br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986570112-96411a30-25b5-4998-b9a9-ceabc24f39b4.png#averageHue=%235f8560&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=ue2e8a338&amp;originHeight=1018&amp;originWidth=2158&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u7302e173-24d8-479a-b64d-57660fed4b1&amp;title=" alt=""></p><h3 id="6-Alibaba-Java-Coding-Guidelines">6.Alibaba Java Coding Guidelines</h3><p>Alibaba Java Coding Guidelines 是一款基于 阿里规约 进行代码规范扫描的插件。可以帮助我们排查一些类似于空指针、代码重复等代码不规范问题。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986570225-99af0d59-6b23-4228-890b-1b65aac39d6a.png#averageHue=%232f333a&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u98a38b5b&amp;originHeight=714&amp;originWidth=1494&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ua2d5de96-c977-49e5-8c1d-d2ec1330ebd&amp;title=" alt=""></p><h3 id="7-Sequence-Diagram">7.Sequence Diagram</h3><p>Sequence Diagram 是一款将方法调用关系转换为时序图展示的插件。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986570247-9a5fc2c9-7c05-40ed-8485-7866250cc75b.png#averageHue=%232f3339&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u273e258d&amp;originHeight=1213&amp;originWidth=1498&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u4fa7457a-12db-43db-85d5-b4ca29178ba&amp;title=" alt=""><br>无论是在我们接手别人的代码，还是阅读源码，都需要了解整个逻辑大致调用了哪些方法，就需要用到这个插件。<br>例如：我们用 IDEA 打开 JDK8 的源码包，定位到 HashMap 的 put() 方法，右键选择 Sequence Diagram<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986570595-f7a32929-5501-4a6d-bae2-91964f57e331.png#averageHue=%23212328&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u938ff7c1&amp;originHeight=555&amp;originWidth=1724&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u0efdb343-a2b5-4586-9b83-5e721d9177b&amp;title=" alt=""><br>我们可以点击具体的方法，就会跳转到相应的位置。<br>也可以对时序图的深度和展示内容进行设置。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986570737-b1c48a00-d375-4a46-b742-a1bb3af24edf.png#averageHue=%232d3033&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=uf2222a62&amp;originHeight=528&amp;originWidth=1229&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ua8b3d9cd-7a40-4284-be66-a414a000e9e&amp;title=" alt=""><br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986571254-bfa6dd53-8279-4f9b-b45f-6aca4dd95204.png#averageHue=%2331363d&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u5dfcdaa4&amp;originHeight=406&amp;originWidth=715&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u53890c24-feca-44cd-a8da-2b62230f075&amp;title=" alt=""><br>还可以将时序图进行保存或导出。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986571178-bffe3dad-d1b0-40af-83f0-aafed79ff6a9.png#averageHue=%232d3034&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=uf1e0037b&amp;originHeight=502&amp;originWidth=1068&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ua38784a5-bc67-435e-9d6c-fb98118175d&amp;title=" alt=""></p><h3 id="8-Key-Promoter-X">8.Key Promoter X</h3><p>Key Promoter X 是一款帮助我们学习和掌握快捷键的插件。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986571506-74137e21-9d7f-4441-a935-df68dd37b79e.png#averageHue=%232e3137&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u641caaed&amp;originHeight=1276&amp;originWidth=1514&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u0d3e2542-829a-4cd1-afb0-7c2a6126009&amp;title=" alt=""></p><h3 id="9-Restfultoolkit-fix">9.Restfultoolkit-fix</h3><p>Restfultoolkit-fix 是一套 RESTful 服务开发辅助工具集插件。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986571699-3256dcd8-2eb6-4999-a1fd-5d188eb7e6e8.png#averageHue=%2330343b&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u4c5c5acf&amp;originHeight=919&amp;originWidth=1519&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u9b9c5fd8-7bd1-46e6-85a9-f77d9045e11&amp;title=" alt=""><br>我们在接口右键，可以根据需要进行如下操作：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986571985-b6489c1c-85e4-420c-8444-cfa0c2326bfc.png#averageHue=%23292c30&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=ubdf73e3c&amp;originHeight=1096&amp;originWidth=1297&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u7e3a97f6-b28f-4b18-ad2f-23cc3c134c4&amp;title=" alt=""></p><ul><li>生成并复制 query 类型的查询参数。type=1&amp;username=ACGkaka</li><li>生成并复制请求体。</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;pageNum&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pageSize&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>生成并复制相对路径URL/user/list</li><li>生成并复制绝对路径URLhttp://localhost:8081/user/list</li></ul><h3 id="10-CamelCase">10.CamelCase</h3><p>CamelCase 可以轻松地将各种不同格式转换成指定的格式 支持格式: foo_bar, fooBar, FooBar, FOO_BAR 支持自定义快键 支持同时转换多个块的文本内容。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1696986572078-f15397b3-efa9-4d44-a4b9-a27dd298da24.png#averageHue=%2330333a&amp;clientId=u0813ce58-ebd8-4&amp;from=paste&amp;id=u95f86c78&amp;originHeight=1029&amp;originWidth=1507&amp;originalType=url&amp;ratio=1.25&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ufb6e8644-aaae-48ba-8b56-5860aa8d8cd&amp;title=" alt=""><br>安装后重新打开idea,选中内容，快捷键 shit+alt+u，选中内容中的单词 就会变，直到变成你想要的。<br>整理完毕，完结撒花~ 🌻</p>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Map与List互转</title>
      <link href="/posts/3c1e27f1.html"/>
      <url>/posts/3c1e27f1.html</url>
      
        <content type="html"><![CDATA[<h2 id="Map转List">Map转List</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//例子</span></span><br><span class="line">Map&lt;Integer, String&gt; mapDemo = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">      map.put(<span class="number">10</span>, <span class="string">&quot;apple&quot;</span>);</span><br><span class="line">      map.put(<span class="number">20</span>, <span class="string">&quot;orange&quot;</span>);</span><br><span class="line">      map.put(<span class="number">30</span>, <span class="string">&quot;banana&quot;</span>);</span><br><span class="line">      map.put(<span class="number">40</span>, <span class="string">&quot;watermelon&quot;</span>);</span><br><span class="line">      map.put(<span class="number">50</span>, <span class="string">&quot;dragonfruit&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="Map-Integer-Object-转-List">Map&lt;Integer, Object&gt; 转 List</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法1</span></span><br><span class="line">List&lt;Integer&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>(mapDemo.keySet());</span><br><span class="line"><span class="comment">//方法2</span></span><br><span class="line">List&lt;Integer&gt; list2 = mapDemo.keySet().stream().collect(Collectors.toList());</span><br></pre></td></tr></table></figure><h3 id="Map-Integer-Object-转-List-2">Map&lt;Integer, Object&gt; 转 List</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法1</span></span><br><span class="line"> List&lt;String&gt; list3 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>(mapDemo.values());</span><br><span class="line"> <span class="comment">//方法2</span></span><br><span class="line"> List&lt;String&gt; list4 = mapDemo.values().stream().collect(Collectors.toList());</span><br></pre></td></tr></table></figure><h2 id="List转Map">List转Map</h2><h3 id="第一种（会出现键重复异常）">第一种（会出现键重复异常）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以id为主键转为map</span></span><br><span class="line">Map&lt;Long, User&gt; map = list.stream().collect(Collectors.toMap(User::getId,Function.identity()));</span><br></pre></td></tr></table></figure><h3 id="第二种（针对第一种方法会出现情况）">第二种（针对第一种方法会出现情况）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//给出key重复时，使用哪个key作为主键，以下代码中的(key1, key2) -&gt; key2)代表key1和key2键重复时返回key2做主键</span></span><br><span class="line">Map&lt;Long, User&gt; map = list.stream().collect(Collectors.toMap(User::getId, Function.identity(), (key1, key2) -&gt; key2));</span><br></pre></td></tr></table></figure><h3 id="第三种（只返回对象里某个属性时）">第三种（只返回对象里某个属性时）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不想返回对象，只返回对象里某个属性时 采用这种方式</span></span><br><span class="line">Map&lt;Long, String&gt; map = list.stream().collect(Collectors.toMap(User::getId, User::getAge, (key1, key2) -&gt; key2));</span><br></pre></td></tr></table></figure><h3 id="第四种（以某个属性分组）">第四种（以某个属性分组）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;Integer, List&gt; map = list.stream().collect(Collectors.groupingBy(User::getId));</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot里参数校验参数验证</title>
      <link href="/posts/25d579af.html"/>
      <url>/posts/25d579af.html</url>
      
        <content type="html"><![CDATA[<h2 id="SpringBoot里参数校验-参数验证">SpringBoot里参数校验/参数验证</h2><h3 id="1、前言">1、前言</h3><p>在控制器类的方法里自己写校验逻辑代码当然也可以，只是代码比较丑陋，有点“low”。业界有更好的处理方法，分别阐述如下。</p><h3 id="2、PathVariable校验">2、PathVariable校验</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/path/&#123;group:[a-zA-Z0-9_]+&#125;/&#123;userid&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">path</span><span class="params">(<span class="meta">@PathVariable(&quot;group&quot;)</span> String group, <span class="meta">@PathVariable(&quot;userid&quot;)</span> Integer userid)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> group + <span class="string">&quot;:&quot;</span> + userid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>用法是：路径变量:正则表达式。当请求URI不满足正则表达式时，客户端将收到404错误码。不方便的地方是，不能通过捕获异常的方式，向前端返回统一的、自定义格式的响应参数。</p><h4 id="3、方法参数校验">3、方法参数校验</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/validate1&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">validate1</span><span class="params">(</span></span><br><span class="line"><span class="params">        <span class="meta">@Size(min = 1,max = 10,message = &quot;姓名长度必须为1到10&quot;)</span><span class="meta">@RequestParam(&quot;name&quot;)</span> String name,</span></span><br><span class="line"><span class="params">        <span class="meta">@Min(value = 10,message = &quot;年龄最小为10&quot;)</span><span class="meta">@Max(value = 100,message = &quot;年龄最大为100&quot;)</span> <span class="meta">@RequestParam(&quot;age&quot;)</span> Integer age)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;validate1&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果前端传递的参数不满足规则，则抛出异常。注解Size、Min、Max来自validation-api.jar，更多注解参见相关标准小节。</p><h3 id="4、表单对象-VO对象校验">4、表单对象/VO对象校验</h3><p>当参数是VO时，可以在VO类的属性上添加校验注解。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@Size(min = 1,max = 10,message = &quot;姓名长度必须为1到10&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotEmpty</span></span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Min(value = 10,message = &quot;年龄最小为10&quot;)</span><span class="meta">@Max(value = 100,message = &quot;年龄最大为100&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Future</span></span><br><span class="line">    <span class="meta">@JSONField(format=&quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    。。。</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中，Future注解要求必须是相对当前时间来讲“未来的”某个时间。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/validate2&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">validate2</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@RequestBody</span> User user)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5、自定义校验规则">5、自定义校验规则</h3><h4 id="5-1-自定义注解校验">5.1 自定义注解校验</h4><p>需要自定义一个注解类和一个校验类。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.validation.Constraint;</span><br><span class="line"><span class="keyword">import</span> javax.validation.Payload;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.PARAMETER,ElementType.FIELD&#125;)</span></span><br><span class="line"><span class="meta">@Constraint(validatedBy = FlagValidatorClass.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> FlagValidator &#123;</span><br><span class="line">    <span class="comment">// flag的有效值，多个使用,隔开</span></span><br><span class="line">    String <span class="title function_">values</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// flag无效时的提示内容</span></span><br><span class="line">    String <span class="title function_">message</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;flag必须是预定义的那几个值，不能随便写&quot;</span>;</span><br><span class="line"></span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Payload</span>&gt;[] payload() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.validation.ConstraintValidator;</span><br><span class="line"><span class="keyword">import</span> javax.validation.ConstraintValidatorContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FlagValidatorClass</span> <span class="keyword">implements</span> <span class="title class_">ConstraintValidator</span>&lt;FlagValidator,Object&gt; &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * FlagValidator注解规定的那些有效值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String values;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">(FlagValidator flagValidator)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.values = flagValidator.values();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户输入的值，必须是FlagValidator注解规定的那些值其中之一。</span></span><br><span class="line"><span class="comment">     * 否则，校验不通过。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 用户输入的值，如从前端传入的某个值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(Object value, ConstraintValidatorContext constraintValidatorContext)</span> &#123;</span><br><span class="line">        <span class="comment">// 切割获取值</span></span><br><span class="line">        String[] value_array = values.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">isFlag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; value_array.length; i++)&#123;</span><br><span class="line">            <span class="comment">// 存在一致就跳出循环</span></span><br><span class="line">            <span class="keyword">if</span> (value_array[i] .equals(value))&#123;</span><br><span class="line">                isFlag = <span class="literal">true</span>; <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> isFlag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>使用我们自定义的注解：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="comment">// 前端传入的flag值必须是1或2或3，否则校验失败</span></span><br><span class="line">    <span class="meta">@FlagValidator(values = &quot;1,2,3&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String flag ;</span><br><span class="line">    。。。</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-2-分组校验">5.2 分组校验</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.hibernate.validator.constraints.Length;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Min;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotNull;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Resume</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Default</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Update</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;id不能为空&quot;, groups = Update.class)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;名字不能为空&quot;, groups = Default.class)</span></span><br><span class="line">    <span class="meta">@Length(min = 4, max = 10, message = &quot;name 长度必须在 &#123;min&#125; - &#123;max&#125; 之间&quot;, groups = Default.class)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;年龄不能为空&quot;, groups = Default.class)</span></span><br><span class="line">    <span class="meta">@Min(value = 18, message = &quot;年龄不能小于18岁&quot;, groups = Default.class)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    。。。</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用Defaul分组进行验证</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resume</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/validate5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">addUser</span><span class="params">(<span class="meta">@Validated(value = Resume.Default.class)</span> <span class="meta">@RequestBody</span> Resume resume)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;validate5&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用Default、Update分组进行验证</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resume</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PutMapping(&quot;/validate6&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">updateUser</span><span class="params">(<span class="meta">@Validated(value = &#123;Resume.Update.class, Resume.Default.class&#125;)</span> <span class="meta">@RequestBody</span> Resume resume)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;validate6&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>建立了两个分组，名称分别为Default、Update。POST方法提交时使用Defaut分组的校验规则，PUT方法提交时同时使用两个分组规则。</p><h3 id="6、异常拦截器">6、异常拦截器</h3><p>通过设置全局异常处理器，统一向前端返回校验失败信息。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.scj.springbootdemo.WebResult;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.CollectionUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.ObjectError;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.MethodArgumentNotValidException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.ConstraintViolation;</span><br><span class="line"><span class="keyword">import</span> javax.validation.ConstraintViolationException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 全局异常处理器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(GlobalExceptionHandler.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用来处理bean validation异常</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(ConstraintViolationException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span>  WebResult <span class="title function_">resolveConstraintViolationException</span><span class="params">(ConstraintViolationException ex)</span>&#123;</span><br><span class="line">        <span class="type">WebResult</span> <span class="variable">errorWebResult</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WebResult</span>(WebResult.FAILED);</span><br><span class="line">        Set&lt;ConstraintViolation&lt;?&gt;&gt; constraintViolations = ex.getConstraintViolations();</span><br><span class="line">        <span class="keyword">if</span>(!CollectionUtils.isEmpty(constraintViolations))&#123;</span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">msgBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            <span class="keyword">for</span>(ConstraintViolation constraintViolation :constraintViolations)&#123;</span><br><span class="line">                msgBuilder.append(constraintViolation.getMessage()).append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">String</span> <span class="variable">errorMessage</span> <span class="operator">=</span> msgBuilder.toString();</span><br><span class="line">            <span class="keyword">if</span>(errorMessage.length()&gt;<span class="number">1</span>)&#123;</span><br><span class="line">                errorMessage = errorMessage.substring(<span class="number">0</span>,errorMessage.length()-<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            errorWebResult.setInfo(errorMessage);</span><br><span class="line">            <span class="keyword">return</span> errorWebResult;</span><br><span class="line">        &#125;</span><br><span class="line">        errorWebResult.setInfo(ex.getMessage());</span><br><span class="line">        <span class="keyword">return</span> errorWebResult;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> WebResult <span class="title function_">resolveMethodArgumentNotValidException</span><span class="params">(MethodArgumentNotValidException ex)</span>&#123;</span><br><span class="line">        <span class="type">WebResult</span> <span class="variable">errorWebResult</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WebResult</span>(WebResult.FAILED);</span><br><span class="line">        List&lt;ObjectError&gt;  objectErrors = ex.getBindingResult().getAllErrors();</span><br><span class="line">        <span class="keyword">if</span>(!CollectionUtils.isEmpty(objectErrors)) &#123;</span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">msgBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            <span class="keyword">for</span> (ObjectError objectError : objectErrors) &#123;</span><br><span class="line">                msgBuilder.append(objectError.getDefaultMessage()).append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">String</span> <span class="variable">errorMessage</span> <span class="operator">=</span> msgBuilder.toString();</span><br><span class="line">            <span class="keyword">if</span> (errorMessage.length() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                errorMessage = errorMessage.substring(<span class="number">0</span>, errorMessage.length() - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            errorWebResult.setInfo(errorMessage);</span><br><span class="line">            <span class="keyword">return</span> errorWebResult;</span><br><span class="line">        &#125;</span><br><span class="line">        errorWebResult.setInfo(ex.getMessage());</span><br><span class="line">        <span class="keyword">return</span> errorWebResult;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7、相关标准与依赖">7、相关标准与依赖</h3><p>包含 javax.validation.constraints 、org.hibernate.validator.constraints</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>是Bean验证的规范 ，<br>是该规范的参考实现，它除了实现规范要求的注解外，还额外实现了一些注解。<br>validation-api-1.1.0.jar 包括如下约束注解：</p><table><thead><tr><th>约束注解</th><th>针对类型</th><th>说明</th></tr></thead><tbody><tr><td><a href="/AssertFalse">@AssertFalse </a></td><td>布尔</td><td>被注释的元素必须为 false</td></tr><tr><td><a href="/AssertTrue">@AssertTrue </a></td><td>布尔</td><td>被注释的元素必须为 true</td></tr><tr><td><a href="/value">@DecimalMax(value) </a></td><td></td><td>被注释的元素必须是一个数字，其值必须小于等于指定的最大值</td></tr><tr><td><a href="/value">@DecimalMin(value) </a></td><td></td><td>被注释的元素必须是一个数字，其值必须大于等于指定的最小值</td></tr><tr><td><a href="/Digits">@Digits </a></td><td></td><td></td></tr><tr><td>(integer, fraction)</td><td></td><td>被注释的元素必须是一个数字，其值必须在可接受的范围内</td></tr><tr><td><a href="/Null">@Null </a></td><td>对象</td><td>被注释的元素必须为 null</td></tr><tr><td><a href="/NotNull">@NotNull </a></td><td>对象</td><td>被注释的元素必须不为 null</td></tr><tr><td><a href="/value">@Min(value) </a></td><td>物资</td><td>被注释的元素必须是一个数字，其值必须大于等于指定的最小值</td></tr><tr><td><a href="/value">@Max(value) </a></td><td>数字</td><td>被注释的元素必须是一个数字，其值必须小于等于指定的最大值</td></tr><tr><td>@Size(max, min)</td><td>集合、数组、字符串</td><td>被注释的元素的大小必须在指定的范围内</td></tr><tr><td><a href="/Past">@Past </a></td><td>日期</td><td>被注释的元素必须是一个过去的日期</td></tr><tr><td><a href="/Future">@Future </a></td><td>日期</td><td>被注释的元素必须是一个将来的日期</td></tr><tr><td><a href="/value">@Pattern(value) </a></td><td>对象</td><td>被注释的元素必须符合指定的正则表达式</td></tr></tbody></table><p><strong>hibernate-validator-5.3.6.jar 包括如下约束注解：</strong></p><table><thead><tr><th>约束注解</th><th>针对类型</th><th>说明</th></tr></thead><tbody><tr><td><a href="/Email">@Email </a></td><td>字符串</td><td>被注释的元素必须是电子邮箱地址</td></tr><tr><td><a href="/Length">@Length </a></td><td>字符串</td><td>被注释的字符串的大小必须在指定的范围内</td></tr><tr><td><a href="/NotBlank">@NotBlank </a></td><td>字符串</td><td>被注释的字符串的必须非空</td></tr><tr><td><a href="/NotEmpty">@NotEmpty </a></td><td>字符串、集合、数组</td><td>被注释的字符串、集合、Map、数组必须非空</td></tr><tr><td><a href="/Range">@Range </a></td><td>数字、字符串</td><td>被注释的元素必须在合适的范围内</td></tr><tr><td><a href="/SafeHtml">@SafeHtml </a></td><td>字符串</td><td>被注释的元素必须是安全Html</td></tr><tr><td><a href="/URL">@URL </a></td><td>字符串</td><td>被注释的元素必须是有效URL</td></tr></tbody></table><h3 id="8、参数校验原理">8、参数校验原理</h3><p>这篇文章 写得比较深入，我没有太理解。</p><h3 id="9、本文源码">9、本文源码</h3><p>公司不让上传源码到GitHub，可以参加这篇文章。</p><h3 id="10、同时校验2个或更多个字段-参数">10、同时校验2个或更多个字段/参数</h3><p>常见的场景之一是，查询某信息时要输入开始时间和结束时间。显然，结束时间要≥开始时间。可以在查询VO类上使用自定义注解，下面的例子来自这里。划重点：@ValidAddress使用在类上。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ValidAddress</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Size(max = 50)</span></span><br><span class="line">    <span class="keyword">private</span> String street1;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Size(max = 50)</span></span><br><span class="line">    <span class="keyword">private</span> String street2;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Size(max = 10)</span></span><br><span class="line">    <span class="keyword">private</span> String zipCode;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Size(max = 20)</span></span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Valid</span></span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> Country country;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Country</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Size(min = 2, max = 2)</span></span><br><span class="line">    <span class="keyword">private</span> String iso2;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Target(TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RUNTIME)</span></span><br><span class="line"><span class="meta">@Constraint(validatedBy = &#123; MultiCountryAddressValidator.class &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ValidAddress &#123;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">message</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&#123;com.example.validation.ValidAddress.message&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Payload</span>&gt;[] payload() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MultiCountryAddressValidator</span> </span><br><span class="line">       <span class="keyword">implements</span> <span class="title class_">ConstraintValidator</span>&lt;ValidAddress, Address&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">(ValidAddress constraintAnnotation)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(Address address, </span></span><br><span class="line"><span class="params">                           ConstraintValidatorContext constraintValidatorContext)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Country</span> <span class="variable">country</span> <span class="operator">=</span> address.getCountry();</span><br><span class="line">        <span class="keyword">if</span> (country == <span class="literal">null</span> || country.getIso2() == <span class="literal">null</span> || address.getZipCode() == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (country.getIso2()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;FR&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="comment">// Check if address.getZipCode() is valid for France</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;GR&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="comment">// Check if address.getZipCode() is valid for Greece</span></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Stream多字段排序</title>
      <link href="/posts/d10c6b9a.html"/>
      <url>/posts/d10c6b9a.html</url>
      
        <content type="html"><![CDATA[<h2 id="Stream多字段排序">Stream多字段排序</h2><p>很多情况下sql不好解决的多表查询,临时表分组,排序,尽量用java8新特性stream进行处理<br>使用java8新特性,下面先来点基础的</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">List&lt;类&gt; list; 代表某集合</span><br><span class="line"> </span><br><span class="line"><span class="comment">//返回 对象集合以类属性一升序排序</span></span><br><span class="line"> </span><br><span class="line">list.stream().sorted(Comparator.comparing(类::属性一));</span><br><span class="line"> </span><br><span class="line"><span class="comment">//返回 对象集合以类属性一降序排序 注意两种写法</span></span><br><span class="line"> </span><br><span class="line">list.stream().sorted(Comparator.comparing(类::属性一).reversed());<span class="comment">//先以属性一升序,结果进行属性一降序</span></span><br><span class="line"> </span><br><span class="line">list.stream().sorted(Comparator.comparing(类::属性一,Comparator.reverseOrder()));<span class="comment">//以属性一降序</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//返回 对象集合以类属性一升序 属性二升序</span></span><br><span class="line"> </span><br><span class="line">list.stream().sorted(Comparator.comparing(类::属性一).thenComparing(类::属性二));</span><br><span class="line"> </span><br><span class="line"><span class="comment">//返回 对象集合以类属性一降序 属性二升序 注意两种写法</span></span><br><span class="line"> </span><br><span class="line">list.stream().sorted(Comparator.comparing(类::属性一).reversed().thenComparing(类::属性二));<span class="comment">//先以属性一升序,升序结果进行属性一降序,再进行属性二升序</span></span><br><span class="line"> </span><br><span class="line">list.stream().sorted(Comparator.comparing(类::属性一,Comparator.reverseOrder()).thenComparing(类::属性二));<span class="comment">//先以属性一降序,再进行属性二升序</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//返回 对象集合以类属性一降序 属性二降序 注意两种写法</span></span><br><span class="line"> </span><br><span class="line">list.stream().sorted(Comparator.comparing(类::属性一).reversed().thenComparing(类::属性二,Comparator.reverseOrder()));<span class="comment">//先以属性一升序,升序结果进行属性一降序,再进行属性二降序</span></span><br><span class="line"> </span><br><span class="line">list.stream().sorted(Comparator.comparing(类::属性一,Comparator.reverseOrder()).thenComparing(类::属性二,Comparator.reverseOrder()));<span class="comment">//先以属性一降序,再进行属性二降序</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//返回 对象集合以类属性一升序 属性二降序 注意两种写法</span></span><br><span class="line"> </span><br><span class="line">list.stream().sorted(Comparator.comparing(类::属性一).reversed().thenComparing(类::属性二).reversed());<span class="comment">//先以属性一升序,升序结果进行属性一降序,再进行属性二升序,结果进行属性一降序属性二降序</span></span><br><span class="line"> </span><br><span class="line">list.stream().sorted(Comparator.comparing(类::属性一).thenComparing(类::属性二,Comparator.reverseOrder()));<span class="comment">//先以属性一升序,再进行属性二降序&lt;br&gt;&lt;br&gt;&lt;br&gt;</span></span><br></pre></td></tr></table></figure><p>通过以上例子我们可以发现</p><p>Comparator.comparing(类::属性一).reversed();<br>Comparator.comparing(类::属性一,Comparator.reverseOrder());</p><p>两种排序是完全不一样的,一定要区分开来 1 是得到排序结果后再排序,2 是直接进行排序,很多人会混淆导致理解出错,2更好理解,建议使用2<br>实际例子:<br>现有一个类test 有两个属性:state 状态 time 时间,需要状态顺序且时间倒序</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">test</span> &#123;</span><br><span class="line">    <span class="comment">//状态</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> state;</span><br><span class="line">    <span class="comment">//时间</span></span><br><span class="line">    <span class="keyword">private</span> Date time;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> state, Date time)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = state;</span><br><span class="line">        <span class="built_in">this</span>.time = time;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setState</span><span class="params">(<span class="type">int</span> state)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = state;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getTime</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> time;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTime</span><span class="params">(Date time)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.time = time;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;state=&quot;</span> + state +</span><br><span class="line">                <span class="string">&quot;, time=&quot;</span> + DateUtils.formatDateYMD(time) +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">testRun</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;test&gt; testList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">Date</span> <span class="variable">d</span> <span class="operator">=</span> DateUtils.now();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">            <span class="type">test</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">test</span>(i, DateUtils.addDays(d, i));</span><br><span class="line">            testList.add(t);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">            <span class="type">test</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">test</span>(i, DateUtils.addMonths(d, i));</span><br><span class="line">            testList.add(t);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        testList.forEach(o -&gt; &#123;</span><br><span class="line">            System.out.println(o.toString());</span><br><span class="line">        &#125;);</span><br><span class="line">        List&lt;test&gt; sort = testList.stream().sorted(Comparator.comparing(test::getState).thenComparing(test::getTime,Comparator.reverseOrder())).collect(toList());</span><br><span class="line">        System.out.println(<span class="string">&quot;------------------------------------&quot;</span>);</span><br><span class="line">        sort.forEach(o -&gt; &#123;</span><br><span class="line">            System.out.println(o.toString());</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">排序前:</span><br><span class="line">test&#123;state=<span class="number">1</span>, time=<span class="number">2019</span>-<span class="number">07</span>-<span class="number">24</span>&#125;</span><br><span class="line">test&#123;state=<span class="number">2</span>, time=<span class="number">2019</span>-<span class="number">07</span>-<span class="number">25</span>&#125;</span><br><span class="line">test&#123;state=<span class="number">3</span>, time=<span class="number">2019</span>-<span class="number">07</span>-<span class="number">26</span>&#125;</span><br><span class="line">test&#123;state=<span class="number">1</span>, time=<span class="number">2019</span>-08-<span class="number">23</span>&#125;</span><br><span class="line">test&#123;state=<span class="number">2</span>, time=<span class="number">2019</span>-09-<span class="number">23</span>&#125;</span><br><span class="line">test&#123;state=<span class="number">3</span>, time=<span class="number">2019</span>-<span class="number">10</span>-<span class="number">23</span>&#125;</span><br><span class="line">------------------------------------</span><br><span class="line">排序后:</span><br><span class="line">test&#123;state=<span class="number">1</span>, time=<span class="number">2019</span>-08-<span class="number">23</span>&#125;</span><br><span class="line">test&#123;state=<span class="number">1</span>, time=<span class="number">2019</span>-<span class="number">07</span>-<span class="number">24</span>&#125;</span><br><span class="line">test&#123;state=<span class="number">2</span>, time=<span class="number">2019</span>-09-<span class="number">23</span>&#125;</span><br><span class="line">test&#123;state=<span class="number">2</span>, time=<span class="number">2019</span>-<span class="number">07</span>-<span class="number">25</span>&#125;</span><br><span class="line">test&#123;state=<span class="number">3</span>, time=<span class="number">2019</span>-<span class="number">10</span>-<span class="number">23</span>&#125;</span><br><span class="line">test&#123;state=<span class="number">3</span>, time=<span class="number">2019</span>-<span class="number">07</span>-<span class="number">26</span>&#125;</span><br><span class="line"> </span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>后端项目搭建</title>
      <link href="/posts/38a355ba.html"/>
      <url>/posts/38a355ba.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>后端项目采用多模块项目模式来进行编写</p></blockquote><h2 id="1、新建父模块项目">1、新建父模块项目</h2><h3 id="1-1、SpringBoot项目新建">1.1、SpringBoot项目新建</h3><blockquote><p>Name：MuZiNan-Server =&gt; [项目名称]<br>Location：D:\project\many\MuZiNan-Server =&gt; [项目位置 ]<br>Jdk：1.8 =&gt; [版本]<br>packing：jar =&gt; [打包方式]</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081555130.png" alt=""></p><blockquote><p>springboot版本随意，先选择一个web依赖即可！</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081555765.png" alt=""></p><h3 id="1-2、maven信息配制">1.2、maven信息配制</h3><blockquote><p>IDEA默认maven配制下载速度<strong>极慢</strong>，我们将其修改为我们自己的配置。<br>Maven home path: <strong>Maven安装位置</strong><br>User setting file: <strong>setting.xml文件位置</strong><br>Local respository：<strong>依赖存放仓库位置</strong></p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081555478.png" alt=""></p><h3 id="1-3、删除多余文件">1.3、删除多余文件</h3><blockquote><p>除了pom.xml文件保留，其他文件全部删除</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081555866.png" alt=""></p><blockquote><p>删除完毕之后</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081555197.png" alt=""></p><h3 id="1-4、pom-xml修改">1.4、pom.xml修改</h3><blockquote><p>1、SpringBoot版本修改为 2.5.5版本<br>2、项目基本信息修改<br>3、版本控制 依赖的版本管理通过properties内部进行控制<br>4、依赖管理 [<strong>dependencyManagement</strong>]<br>使用dependencyManagement包裹dependencies，这样可以做到依赖的声明，但是不引用。</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081556698.png" alt=""></p><h3 id="1-5、pom-xml文件">1.5、pom.xml文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- SpringBoot 版本 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- 木字楠服务基本信息 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>space.muzinan<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>MuZiNan-Server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>MuZiNan-Server<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>木字楠博客后台服务~<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- 版本控制 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--===================== SpringBoot相关依赖版本  =========================--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">springboot.version</span>&gt;</span>2.5.5<span class="tag">&lt;/<span class="name">springboot.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- 依赖管理 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--===================== SpringBoot相关依赖  =========================--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Web模块 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springboot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 测试模块 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springboot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2、新建子模块项目">2、新建子模块项目</h2><blockquote><p>右击父级项目<br>New -&gt; Module</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081556930.png" alt=""></p><h3 id="2-1、Web模块-interface模块">2.1、Web模块[interface模块]</h3><blockquote><p>新建一个maven项目<br>父级模块选用MuZiNan-Server<br>Jdk版本与父级保持一致<br>GroupId、ArtifactId 默认即可</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081556416.png" alt=""></p><blockquote><p>新建成功</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081556274.png" alt=""></p><h3 id="2-2、Business模块-service模块">2.2、Business模块[service模块]</h3><blockquote><p>新建一个maven项目<br>父级模块选用MuZiNan-Server<br>Jdk版本与父级保持一致<br>GroupId、ArtifactId 默认即可</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081556929.png" alt=""></p><blockquote><p>新建成功</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081556535.png" alt=""></p><h3 id="2-3、Mapper模块-dao模块">2.3、Mapper模块[dao模块]</h3><blockquote><p>新建一个maven项目<br>父级模块选用MuZiNan-Server<br>Jdk版本与父级保持一致<br>GroupId、ArtifactId 默认即可</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081556128.png" alt=""></p><blockquote><p>新建成功</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081556572.png" alt=""></p><h3 id="2-4、Api模块-实体类存放">2.4、Api模块[实体类存放]</h3><blockquote><p>新建一个maven项目<br>父级模块选用MuZiNan-Server<br>Jdk版本与父级保持一致<br>GroupId、ArtifactId 默认即可</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081556239.png" alt=""></p><blockquote><p>新建成功</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081556071.png" alt=""></p><h3 id="2-5、common模块-共用类存放">2.5、common模块[共用类存放]</h3><blockquote><p>新建一个maven项目<br>父级模块选用MuZiNan-Server<br>Jdk版本与父级保持一致<br>GroupId、ArtifactId 默认即可</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081556631.png" alt=""></p><blockquote><p>新建成功</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081556853.png" alt=""></p><h2 id="3、模块依赖关系配制">3、模块依赖关系配制</h2><h3 id="3-1、保留web模块主启动类">3.1、保留web模块主启动类</h3><blockquote><p>只保留web模块中的主启动类，删除其他模块的主启动类（多模块项目仅需要一个主启动类）</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081556397.png" alt=""></p><blockquote><p>修改主启动类名称（当然也可以不修改，单纯觉得Main很难看，不像是SPringBoot项目）</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081556144.png" alt=""></p><h3 id="3-2、模块依赖引入">3.2、模块依赖引入</h3><blockquote><p>项目中的<strong>各个模块</strong>的职能：<br>web模块： 服务的<strong>接口入口</strong>，也就是存放<strong>Controller</strong>以及<strong>runne</strong>r等…<br>business模块： 存放<strong>业务具体的实现类</strong>的位置以及相关<strong>配置信息</strong>等…<br>mapper模块： 存放<strong>Mapper接口</strong>以及部分<strong>配置信息</strong>等…<br>api模块： 存放<strong>实体类</strong>、<strong>api接口</strong>以及<strong>request</strong>等信息…<br>common模块： 存放共用<strong>工具类</strong>，<strong>共用服务</strong>等…</p></blockquote><blockquote><p>根据<strong>MVC思想</strong>，我们正常的思路是通过controller来调用<strong>service</strong>层，然后通过<strong>service</strong>层调用dao层来实现一个<strong>具体的业务</strong>。<br><strong>多模块</strong>项目也是如此，只不过各个部分被<strong>分割为不同模块</strong>，我们需要使用<strong>依赖引入</strong>的方式来联通各个模块，是<strong>各个模块之间</strong>可以进行调用</p></blockquote><blockquote><p>引入顺序：web模块 引入 business模块（这样controller中可以调用business中的具体实现类）<br>business模块 引入 mapper模块（business引入了mapper，controller可以间接调用mapper）<br>mapper模块 引入 api模块（同上）<br>api模块 引入 common模块（同上）</p></blockquote><blockquote><p>${parent.groupId}：父级模块的groupId<br>${parent.version}：父级模块的version</p></blockquote><h4 id="3-2-1、web模块pom-xml">3.2.1、web模块pom.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Business模块引入 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>$&#123;parent.groupId&#125;<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>muzinan-business<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;parent.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-2-2、business模块pom-xml">3.2.2、business模块pom.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Mapper模块引入 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>$&#123;parent.groupId&#125;<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>muzinan-mapper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;parent.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-2-3、mapper模块pom-xml">3.2.3、mapper模块pom.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Api模块引入 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>$&#123;parent.groupId&#125;<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>muzinan-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;parent.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-2-4、api模块pom-xml">3.2.4、api模块pom.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Common模块引入 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>$&#123;parent.groupId&#125;<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>muzinan-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;parent.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-2-5、依赖引入成功">3.2.5、依赖引入成功</h4><blockquote><p>依赖引入成功，这样我们的几个模块以及相互引入成功</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081557071.png" alt=""></p><h3 id="3-3、基础spring依赖引入">3.3、基础spring依赖引入</h3><blockquote><p>因为我们<strong>所有模块</strong>都需要使用<strong>spring依赖信息</strong>，所有我们会将<strong>所有的基础依赖</strong>在<strong>common模块</strong>进行引入。</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081557502.png" alt=""></p><h2 id="4、启动项目">4、启动项目</h2><h3 id="4-1、Web模块配制文件配制">4.1、Web模块配制文件配制</h3><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081557332.png" alt=""></p><h3 id="4-2、主启动类配制">4.2、主启动类配制</h3><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081557576.png" alt=""></p><h3 id="4-3、启动项目">4.3、启动项目</h3><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081557070.png" alt=""></p><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081557309.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>时间自动填充</title>
      <link href="/posts/431d6fb7.html"/>
      <url>/posts/431d6fb7.html</url>
      
        <content type="html"><![CDATA[<h2 id="自动填充数据功能与逻辑删除">自动填充数据功能与逻辑删除</h2><p>（1）简介<br>添加、修改数据时，每次都会使用相同的方式进行填充。比如 数据的创建时间、修改时间等。<br><code>Mybatis-plus</code> 支持自动填充这些字段的数据。<br>给之前的数据表新增两个字段：创建时间、修改时间、逻辑删除。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> sys_user</span><br><span class="line">(</span><br><span class="line">    id <span class="type">BIGINT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">    age <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">    `sex` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;性别(女:0,男:1)&#x27;</span>,</span><br><span class="line">    username <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;账号&#x27;</span>,</span><br><span class="line">    password <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">    email <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line">    `create_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">    `update_time` datetime <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">    `is_deleted` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;删除状态(否:0,是:1)&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>（2）使用自动填充功能与逻辑删除。<br>   Step1：使用 <code>@TableField</code> 注解，标注需要进行填充的字段。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建时间</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> Date createTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 最后修改时间</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line"><span class="keyword">private</span> Date updateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 逻辑删除（0 未删除、1 删除）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@TableLogic(value = &quot;0&quot;, delval = &quot;1&quot;)</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> Integer isDeleted;</span><br></pre></td></tr></table></figure><p>Step2：自定义一个类(为该类创建一个hander包)，实现 <code>MetaObjectHandler</code>接口，并重写方法。<br>   添加 <code>@Component</code> 注解，交给 Spring 去管理。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;createTime&quot;</span>, Date.class, <span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, Date.class, <span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;isDeleted&quot;</span>, Integer.class, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.strictUpdateFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, Date.class, <span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Step3：简单测试一下。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自动填充</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAutoFill</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="type">Users</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Users</span>();</span><br><span class="line">       user.setName(<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">       user.setAge(<span class="number">20</span>);</span><br><span class="line">       user.setEmail(<span class="string">&quot;tom@163.com&quot;</span>);</span><br><span class="line">       <span class="keyword">if</span> (usersService.save(user)) &#123;</span><br><span class="line">           usersService.list().forEach(System.out::println);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           System.out.println(<span class="string">&quot;添加数据失败&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//逻辑删除</span></span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">if</span> (usersService.removeById(<span class="number">1444840211061186561L</span>)) &#123;</span><br><span class="line">           System.out.println(<span class="string">&quot;删除数据成功&quot;</span>);</span><br><span class="line">           usersService.list().forEach(System.out::println);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           System.out.println(<span class="string">&quot;删除数据失败&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>验证码+登录</title>
      <link href="/posts/14927b65.html"/>
      <url>/posts/14927b65.html</url>
      
        <content type="html"><![CDATA[<h2 id="实现vue验证码">实现vue验证码</h2><h3 id="前端：">前端：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;login&quot;&gt;</span><br><span class="line">    &lt;el-form ref=&quot;loginForm&quot; :model=&quot;loginForm&quot; :rules=&quot;loginRules&quot; class=&quot;login-form&quot;&gt;</span><br><span class="line">      &lt;h3 class=&quot;title&quot;&gt;酒店后台管理系统&lt;/h3&gt;</span><br><span class="line">      &lt;el-form-item prop=&quot;username&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;loginForm.username&quot;</span><br><span class="line">          type=&quot;text&quot;</span><br><span class="line">          auto-complete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;账号&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;svg-icon slot=&quot;prefix&quot; icon-class=&quot;user&quot; class=&quot;el-input__icon input-icon&quot; /&gt;</span><br><span class="line">        &lt;/el-input&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item prop=&quot;password&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;loginForm.password&quot;</span><br><span class="line">          type=&quot;password&quot;</span><br><span class="line">          auto-complete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;密码&quot;</span><br><span class="line">          @keyup.enter.native=&quot;handleLogin&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;svg-icon slot=&quot;prefix&quot; icon-class=&quot;password&quot; class=&quot;el-input__icon input-icon&quot; /&gt;</span><br><span class="line">        &lt;/el-input&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item prop=&quot;code&quot; v-if=&quot;captchaEnabled&quot;&gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          v-model=&quot;loginForm.code&quot;</span><br><span class="line">          auto-complete=&quot;off&quot;</span><br><span class="line">          placeholder=&quot;验证码&quot;</span><br><span class="line">          style=&quot;width: 63%&quot;</span><br><span class="line">          @keyup.enter.native=&quot;handleLogin&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;svg-icon slot=&quot;prefix&quot; icon-class=&quot;validCode&quot; class=&quot;el-input__icon input-icon&quot; /&gt;</span><br><span class="line">        &lt;/el-input&gt;</span><br><span class="line">        &lt;div class=&quot;login-code&quot;&gt;</span><br><span class="line">          &lt;img :src=&quot;codeUrl&quot; @click=&quot;getCode&quot; class=&quot;login-code-img&quot;/&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-checkbox v-model=&quot;loginForm.rememberMe&quot; style=&quot;margin:0px 0px 25px 0px;&quot;&gt;记住密码&lt;/el-checkbox&gt;</span><br><span class="line">      &lt;el-form-item style=&quot;width:100%;&quot;&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          :loading=&quot;loading&quot;</span><br><span class="line">          size=&quot;medium&quot;</span><br><span class="line">          type=&quot;primary&quot;</span><br><span class="line">          style=&quot;width:100%;&quot;</span><br><span class="line">          @click.native.prevent=&quot;handleLogin&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;span v-if=&quot;!loading&quot;&gt;登 录&lt;/span&gt;</span><br><span class="line">          &lt;span v-else&gt;登 录 中...&lt;/span&gt;</span><br><span class="line">        &lt;/el-button&gt;</span><br><span class="line">        &lt;div style=&quot;float: right;&quot; v-if=&quot;register&quot;&gt;</span><br><span class="line">          &lt;router-link class=&quot;link-type&quot; :to=&quot;&#x27;/register&#x27;&quot;&gt;立即注册&lt;/router-link&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;!--  底部  --&gt;</span><br><span class="line">    &lt;div class=&quot;el-login-footer&quot;&gt;</span><br><span class="line">      &lt;span&gt;Copyright © 2018-2022 ruoyi.vip All Rights Reserved.&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#123; getCodeImg &#125; from &quot;@/api/login&quot;;</span><br><span class="line">  import Cookies from &quot;js-cookie&quot;;</span><br><span class="line">  import &#123; encrypt, decrypt &#125; from &#x27;@/utils/jsencrypt&#x27;</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &quot;Login&quot;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        codeUrl: &quot;&quot;,</span><br><span class="line">        loginForm: &#123;</span><br><span class="line">          username: &quot;admin&quot;,</span><br><span class="line">          password: &quot;admin123&quot;,</span><br><span class="line">          rememberMe: false,</span><br><span class="line">          code: &quot;&quot;,</span><br><span class="line">          uuid: &quot;&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        loginRules: &#123;</span><br><span class="line">          username: [</span><br><span class="line">            &#123; required: true, trigger: &quot;blur&quot;, message: &quot;请输入您的账号&quot; &#125;</span><br><span class="line">          ],</span><br><span class="line">          password: [</span><br><span class="line">            &#123; required: true, trigger: &quot;blur&quot;, message: &quot;请输入您的密码&quot; &#125;</span><br><span class="line">          ],</span><br><span class="line">          code: [&#123; required: true, trigger: &quot;change&quot;, message: &quot;请输入验证码&quot; &#125;]</span><br><span class="line">        &#125;,</span><br><span class="line">        loading: false,</span><br><span class="line">        // 验证码开关</span><br><span class="line">        captchaEnabled: false,</span><br><span class="line">        // 注册开关</span><br><span class="line">        register: true,</span><br><span class="line">        redirect: undefined</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line">      $route: &#123;</span><br><span class="line">        handler: function(route) &#123;</span><br><span class="line">          this.redirect = route.query &amp;&amp; route.query.redirect;</span><br><span class="line">        &#125;,</span><br><span class="line">        immediate: true</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">      this.getCode();</span><br><span class="line">      this.getCookie();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      getCode() &#123;</span><br><span class="line">        getCodeImg().then(res =&gt; &#123;</span><br><span class="line">          this.captchaEnabled = res.captchaEnabled === undefined ? true : res.captchaEnabled;</span><br><span class="line">          if (this.captchaEnabled) &#123;</span><br><span class="line">            this.codeUrl = &quot;data:image/gif;base64,&quot; + res.img;</span><br><span class="line">            this.loginForm.uuid = res.uuid;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      getCookie() &#123;</span><br><span class="line">        const username = Cookies.get(&quot;username&quot;);</span><br><span class="line">        const password = Cookies.get(&quot;password&quot;);</span><br><span class="line">        const rememberMe = Cookies.get(&#x27;rememberMe&#x27;)</span><br><span class="line">        this.loginForm = &#123;</span><br><span class="line">          username: username === undefined ? this.loginForm.username : username,</span><br><span class="line">          password: password === undefined ? this.loginForm.password : decrypt(password),</span><br><span class="line">          rememberMe: rememberMe === undefined ? false : Boolean(rememberMe)</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;,</span><br><span class="line">      handleLogin() &#123;</span><br><span class="line">        this.$refs.loginForm.validate(valid =&gt; &#123;</span><br><span class="line">          if (valid) &#123;</span><br><span class="line">            this.loading = true;</span><br><span class="line">            if (this.loginForm.rememberMe) &#123;</span><br><span class="line">              Cookies.set(&quot;username&quot;, this.loginForm.username, &#123; expires: 30 &#125;);</span><br><span class="line">              Cookies.set(&quot;password&quot;, encrypt(this.loginForm.password), &#123; expires: 30 &#125;);</span><br><span class="line">              Cookies.set(&#x27;rememberMe&#x27;, this.loginForm.rememberMe, &#123; expires: 30 &#125;);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              Cookies.remove(&quot;username&quot;);</span><br><span class="line">              Cookies.remove(&quot;password&quot;);</span><br><span class="line">              Cookies.remove(&#x27;rememberMe&#x27;);</span><br><span class="line">            &#125;</span><br><span class="line">            this.$store.dispatch(&quot;Login&quot;, this.loginForm).then(() =&gt; &#123;</span><br><span class="line">              this.$router.push(&#123; path: this.redirect || &quot;/&quot; &#125;).catch(()=&gt;&#123;&#125;);</span><br><span class="line">            &#125;).catch(() =&gt; &#123;</span><br><span class="line">              this.loading = false;</span><br><span class="line">              if (this.captchaEnabled) &#123;</span><br><span class="line">                this.getCode();</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style rel=&quot;stylesheet/scss&quot; lang=&quot;scss&quot;&gt;</span><br><span class="line">  .login &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">    height: 100%;</span><br><span class="line">    background-image: url(&quot;../assets/images/login-background.jpg&quot;);</span><br><span class="line">    background-size: cover;</span><br><span class="line">  &#125;</span><br><span class="line">  .title &#123;</span><br><span class="line">    margin: 0px auto 30px auto;</span><br><span class="line">    text-align: center;</span><br><span class="line">    color: #707070;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .login-form &#123;</span><br><span class="line">    border-radius: 6px;</span><br><span class="line">    background: #ffffff;</span><br><span class="line">    width: 400px;</span><br><span class="line">    padding: 25px 25px 5px 25px;</span><br><span class="line">    .el-input &#123;</span><br><span class="line">      height: 38px;</span><br><span class="line">      input &#123;</span><br><span class="line">        height: 38px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .input-icon &#123;</span><br><span class="line">      height: 39px;</span><br><span class="line">      width: 14px;</span><br><span class="line">      margin-left: 2px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .login-tip &#123;</span><br><span class="line">    font-size: 13px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    color: #bfbfbf;</span><br><span class="line">  &#125;</span><br><span class="line">  .login-code &#123;</span><br><span class="line">    width: 33%;</span><br><span class="line">    height: 38px;</span><br><span class="line">    float: right;</span><br><span class="line">    img &#123;</span><br><span class="line">      cursor: pointer;</span><br><span class="line">      vertical-align: middle;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .el-login-footer &#123;</span><br><span class="line">    height: 40px;</span><br><span class="line">    line-height: 40px;</span><br><span class="line">    position: fixed;</span><br><span class="line">    bottom: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    text-align: center;</span><br><span class="line">    color: #fff;</span><br><span class="line">    font-family: Arial;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    letter-spacing: 1px;</span><br><span class="line">  &#125;</span><br><span class="line">  .login-code-img &#123;</span><br><span class="line">    height: 38px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="后端：">后端：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.FastByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> com.google.code.kaptcha.Producer;</span><br><span class="line"><span class="keyword">import</span> com.ruoyi.common.config.RuoYiConfig;</span><br><span class="line"><span class="keyword">import</span> com.ruoyi.common.constant.CacheConstants;</span><br><span class="line"><span class="keyword">import</span> com.ruoyi.common.constant.Constants;</span><br><span class="line"><span class="keyword">import</span> com.ruoyi.common.core.domain.AjaxResult;</span><br><span class="line"><span class="keyword">import</span> com.ruoyi.common.core.redis.RedisCache;</span><br><span class="line"><span class="keyword">import</span> com.ruoyi.common.utils.sign.Base64;</span><br><span class="line"><span class="keyword">import</span> com.ruoyi.common.utils.uuid.IdUtils;</span><br><span class="line"><span class="keyword">import</span> com.ruoyi.system.service.ISysConfigService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 验证码操作处理</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CaptchaController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;captchaProducer&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Producer captchaProducer;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = &quot;captchaProducerMath&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Producer captchaProducerMath;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisCache redisCache;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ISysConfigService configService;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成验证码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/captchaImage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> AjaxResult <span class="title function_">getCode</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">AjaxResult</span> <span class="variable">ajax</span> <span class="operator">=</span> AjaxResult.success();</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">captchaEnabled</span> <span class="operator">=</span> configService.selectCaptchaEnabled();</span><br><span class="line">        ajax.put(<span class="string">&quot;captchaEnabled&quot;</span>, captchaEnabled);</span><br><span class="line">        <span class="keyword">if</span> (!captchaEnabled)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> ajax;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 保存验证码信息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uuid</span> <span class="operator">=</span> IdUtils.simpleUUID();</span><br><span class="line">        <span class="type">String</span> <span class="variable">verifyKey</span> <span class="operator">=</span> CacheConstants.CAPTCHA_CODE_KEY + uuid;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">capStr</span> <span class="operator">=</span> <span class="literal">null</span>, code = <span class="literal">null</span>;</span><br><span class="line">        <span class="type">BufferedImage</span> <span class="variable">image</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 生成验证码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">captchaType</span> <span class="operator">=</span> RuoYiConfig.getCaptchaType();</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;math&quot;</span>.equals(captchaType))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">capText</span> <span class="operator">=</span> captchaProducerMath.createText();</span><br><span class="line">            capStr = capText.substring(<span class="number">0</span>, capText.lastIndexOf(<span class="string">&quot;@&quot;</span>));</span><br><span class="line">            code = capText.substring(capText.lastIndexOf(<span class="string">&quot;@&quot;</span>) + <span class="number">1</span>);</span><br><span class="line">            image = captchaProducerMath.createImage(capStr);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;char&quot;</span>.equals(captchaType))</span><br><span class="line">        &#123;</span><br><span class="line">            capStr = code = captchaProducer.createText();</span><br><span class="line">            image = captchaProducer.createImage(capStr);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        redisCache.setCacheObject(verifyKey, code, Constants.CAPTCHA_EXPIRATION, TimeUnit.MINUTES);</span><br><span class="line">        <span class="comment">// 转换流信息写出</span></span><br><span class="line">        <span class="type">FastByteArrayOutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FastByteArrayOutputStream</span>();</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            ImageIO.write(image, <span class="string">&quot;jpg&quot;</span>, os);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> AjaxResult.error(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ajax.put(<span class="string">&quot;uuid&quot;</span>, uuid);</span><br><span class="line">        ajax.put(<span class="string">&quot;img&quot;</span>, Base64.encode(os.toByteArray()));</span><br><span class="line">        <span class="keyword">return</span> ajax;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现vue验证码-2">实现vue验证码</h2>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现时间加减</title>
      <link href="/posts/188f8d1d.html"/>
      <url>/posts/188f8d1d.html</url>
      
        <content type="html"><![CDATA[<h2 id="JAVA的时间加减">JAVA的时间加减</h2><h3 id="1-获取当前系统时间">1.获取当前系统时间</h3><blockquote><p>Date date = new Date();</p></blockquote><h3 id="2-实现时间的加减的两种方法">2.实现时间的加减的两种方法</h3><h4 id="第一种-用java-text-SimpleDateFormat来实现">第一种: 用java.text.<a href="https://so.csdn.net/so/search?q=SimpleDateFormat&amp;spm=1001.2101.3001.7020">SimpleDateFormat</a>来实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SimpleDateFormat df=<span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);  </span><br><span class="line">System.out.println(<span class="string">&quot;现在时间：&quot;</span>+df.format(date));  </span><br><span class="line">System.out.println(<span class="string">&quot;昨天该时间：&quot;</span> + df.format(<span class="keyword">new</span> <span class="title class_">Date</span>(date.getTime() - <span class="number">1</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>)));  </span><br><span class="line">System.out.println(<span class="string">&quot;明天该时间：&quot;</span> + df.format(<span class="keyword">new</span> <span class="title class_">Date</span>(date.getTime() + <span class="number">1</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>)));</span><br></pre></td></tr></table></figure><blockquote><p>获取当前毫秒值进行加减.</p></blockquote><h4 id="第二种-用java-util-Calender来实现">第二种:用java.util.Calender来实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Calendar</span> <span class="variable">calendar</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">calendar.setTime(date);<span class="comment">//设置起时间</span></span><br><span class="line">calendar.add(Calendar.YEAR, <span class="number">1</span>);<span class="comment">//增加一年</span></span><br><span class="line"><span class="comment">//calendar.add(Calendar.DATE, 1);//增加1天  </span></span><br><span class="line"><span class="comment">//calendar.add(Calendar.DATE, -1);//减1天  </span></span><br><span class="line"><span class="comment">//calendar.add(Calendar.MONTH, 1);//增加一个月   </span></span><br><span class="line">System.out.println(<span class="string">&quot;输出::&quot;</span>+calendar.getTime());</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数字换成自定义格式字符串</title>
      <link href="/posts/e282dc36.html"/>
      <url>/posts/e282dc36.html</url>
      
        <content type="html"><![CDATA[<h2 id="java中MessageFormat自动将数字转换成自定格式的字符串">java中MessageFormat自动将数字转换成自定格式的字符串</h2><p><strong>如 45转化成 00045 同样可以转换时间</strong></p><p>代码如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> MessageFormat.format(<span class="string">&quot;&#123;0,number,00000&#125;&quot;</span>, <span class="number">45</span>);</span><br><span class="line">System.out.println(str);<span class="comment">//结果就是00045</span></span><br><span class="line"></span><br><span class="line">System.out.println(MessageFormat.format(<span class="string">&quot;&#123;0,date,yyyy-MM-dd&#125;&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>()));</span><br><span class="line"><span class="comment">//输出时间 2016-11-15 </span></span><br><span class="line"></span><br><span class="line">System.out.println(MessageFormat.format(<span class="string">&quot;&#123;0,date,yyyy-MM-dd HH:mm:ss&#125;&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>()));</span><br><span class="line"><span class="comment">//输出时间 2016-11-15 15:16:14</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>统一返回类</title>
      <link href="/posts/798a5d1e.html"/>
      <url>/posts/798a5d1e.html</url>
      
        <content type="html"><![CDATA[<h3 id="Result类">Result类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">3960261604605958516L</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line">  <span class="keyword">private</span> String msg;</span><br><span class="line">  <span class="keyword">private</span> T data;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// get set方法，限于篇幅问题，这里不写了，大家操作的时候自己生成一下。或者使用lombok</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 成功,默认状态码,返回消息,自定义返回数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 自定义返回数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;  返回类泛型,不能为String</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 通用返回Result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">(T data)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(data);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 成功,默认状态码,自定义返回消息,无返回数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg 自定义返回消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt; 返回类泛型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 通用返回Result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(msg);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 成功,默认状态码,自定义返回消息,返回数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg  自定义返回消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 自定义返回数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;  返回类泛型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 通用返回Result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">(String msg, T data)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(msg, data);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 失败,默认状态码,返回消息,无返回数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt; 返回类泛型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 通用返回Result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">error</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(ResultCode.ERROR);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 失败,默认状态码,自定义返回消息,无返回数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt; 返回类泛型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 通用返回Result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">error</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(ResultCode.ERROR.getCode(), msg);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 失败,自定义状态码,返回消息,无返回数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code 自定义状态码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg  自定义返回消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;  返回类泛型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 通用返回Result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">error</span><span class="params">(<span class="type">int</span> code, String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(code, msg);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 失败,使用CodeMsg状态码,返回消息,无返回数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resultCode CodeMsg,参数如下:</span></span><br><span class="line"><span class="comment">     *                   &lt;p&gt; code 状态码</span></span><br><span class="line"><span class="comment">     *                   &lt;p&gt; msg  返回消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;        返回类泛型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 通用返回Result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">error</span><span class="params">(ResultCode resultCode)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(resultCode);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 成功构造器,无返回数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Result</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(ResultCode.SUCCESS);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 成功构造器,自定义返回数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 返回数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Result</span><span class="params">(T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(ResultCode.SUCCESS, data);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 成功构造器,自定义返回消息,无返回数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg 返回消息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Result</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(ResultCode.SUCCESS.getCode(), msg);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 成功构造器,自定义返回信息,返回数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg  返回信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 返回数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Result</span><span class="params">(String msg, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(ResultCode.SUCCESS.getCode(), msg, data);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造器,自定义状态码,返回消息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code 状态码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg  返回消息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Result</span><span class="params">(<span class="type">int</span> code, String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造器,自定义状态码,返回消息,返回数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code 状态码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg  返回消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 返回数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Result</span><span class="params">(<span class="type">int</span> code, String msg, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(code, msg);</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造器,使用CodeMsg状态码与返回信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resultCode CodeMsg,参数如下:</span></span><br><span class="line"><span class="comment">     *                   &lt;p&gt; code 状态码</span></span><br><span class="line"><span class="comment">     *                   &lt;p&gt; msg  返回消息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Result</span><span class="params">(ResultCode resultCode)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(resultCode.getCode(), resultCode.getMsg());</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造器,使用CodeMsg状态码与返回信息,自定义返回数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resultCode CodeMsg,参数如下:</span></span><br><span class="line"><span class="comment">     *                   &lt;p&gt; code 状态码</span></span><br><span class="line"><span class="comment">     *                   &lt;p&gt; msg  返回消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data       返回数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Result</span><span class="params">(ResultCode resultCode, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(resultCode);</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ResultCode类">ResultCode类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultCode</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">6269841958947880397L</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 状态码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 状态信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 默认成功</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">ResultCode</span> <span class="variable">SUCCESS</span> <span class="operator">=</span> dispose(ResultCodeEnum.SUCCESS);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 默认失败</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">ResultCode</span> <span class="variable">ERROR</span> <span class="operator">=</span> dispose(ResultCodeEnum.ERROR);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通用业务异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">ResultCode</span> <span class="variable">BIZ_ERROR</span> <span class="operator">=</span> dispose(ResultCodeEnum.BIZ_ERROR);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文件超出最大限制</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">ResultCode</span> <span class="variable">FILE_OUT_MAX</span> <span class="operator">=</span> dispose(ResultCodeEnum.FILE_OUT_MAX);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文件格式不正确</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">ResultCode</span> <span class="variable">FILE_FORMAT_ERROR</span> <span class="operator">=</span> dispose(ResultCodeEnum.FILE_FORMAT_ERROR);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 参数错误</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">ResultCode</span> <span class="variable">PARAM_ERROR</span> <span class="operator">=</span> dispose(ResultCodeEnum.PARAM_ERROR);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Json解析异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">ResultCode</span> <span class="variable">JSON_FORMAT_ERROR</span> <span class="operator">=</span> dispose(ResultCodeEnum.JSON_FORMAT_ERROR);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Sql解析异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">ResultCode</span> <span class="variable">SQL_ERROR</span> <span class="operator">=</span> dispose(ResultCodeEnum.SQL_ERROR);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 网络超时</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">ResultCode</span> <span class="variable">NETWORK_TIMEOUT</span> <span class="operator">=</span> dispose(ResultCodeEnum.NETWORK_TIMEOUT);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 未知的接口</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">ResultCode</span> <span class="variable">UNKNOWN_INTERFACE</span> <span class="operator">=</span> dispose(ResultCodeEnum.UNKNOWN_INTERFACE);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求方式不支持</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">ResultCode</span> <span class="variable">REQ_MODE_NOT_SUPPORTED</span> <span class="operator">=</span> dispose(ResultCodeEnum.REQ_MODE_NOT_SUPPORTED);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 系统异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">ResultCode</span> <span class="variable">SYS_ERROR</span> <span class="operator">=</span> dispose(ResultCodeEnum.SYS_ERROR);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ResultCode <span class="title function_">dispose</span><span class="params">(ResultCodeEnum codeEnum)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ResultCode.builder().code(codeEnum.getCode()).msg(codeEnum.getMsg()).build();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ResultCode</span><span class="params">(<span class="type">int</span> code, String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ResultCodeEnum类">ResultCodeEnum类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> 赵文龙</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2023/12/12 8:46</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Desc</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ResultCodeEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2xx-成功</span></span><br><span class="line">    SUCCESS(<span class="number">200</span>, <span class="string">&quot;操作成功&quot;</span>),</span><br><span class="line">    <span class="comment">//4xx-客户端请求错误</span></span><br><span class="line">    PARAM_ERROR(<span class="number">400</span>, <span class="string">&quot;输入参数不合法&quot;</span>),</span><br><span class="line">    NO_LOGIN_AUTH(<span class="number">401</span>, <span class="string">&quot;请重新登录&quot;</span>),</span><br><span class="line">    NO_OPERATION_AUTH(<span class="number">402</span>, <span class="string">&quot;缺少操作权限&quot;</span>),</span><br><span class="line">    NO_DATA_AUTH(<span class="number">403</span>, <span class="string">&quot;缺少数据权限&quot;</span>),</span><br><span class="line">    ACCOUNT_ALREADY_EXISTS(<span class="number">405</span>, <span class="string">&quot;账号已存在&quot;</span>),</span><br><span class="line">    USER_NOT_LOGIN(<span class="number">406</span>, <span class="string">&quot;获取用户信息失败&quot;</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5xx-服务器错误</span></span><br><span class="line">    SYSTEM_ERROR(<span class="number">500</span>, <span class="string">&quot;系统异常&quot;</span>),</span><br><span class="line">    SYSTEM_BUSY_ERROR(<span class="number">501</span>, <span class="string">&quot;系统繁忙&quot;</span>),</span><br><span class="line"></span><br><span class="line">    SYSTEM_EM_ERROR(<span class="number">601</span>, <span class="string">&quot;连接影像系统异常&quot;</span>),</span><br><span class="line"></span><br><span class="line">    BIZ_ERROR(<span class="number">1000</span>, <span class="string">&quot;通用业务异常&quot;</span>),</span><br><span class="line"></span><br><span class="line">    FILE_OUT_MAX(<span class="number">9000</span>, <span class="string">&quot;文件超出最大限制&quot;</span>),</span><br><span class="line"></span><br><span class="line">    FILE_FORMAT_ERROR(<span class="number">9001</span>, <span class="string">&quot;文件格式不正确&quot;</span>),</span><br><span class="line"></span><br><span class="line">    JSON_FORMAT_ERROR(<span class="number">9051</span>, <span class="string">&quot;Json解析异常&quot;</span>),</span><br><span class="line"></span><br><span class="line">    SQL_ERROR(<span class="number">9052</span>, <span class="string">&quot;Sql解析异常&quot;</span>),</span><br><span class="line"></span><br><span class="line">    NETWORK_TIMEOUT(<span class="number">9510</span>, <span class="string">&quot;网络超时&quot;</span>),</span><br><span class="line"></span><br><span class="line">    UNKNOWN_INTERFACE(<span class="number">9520</span>, <span class="string">&quot;未知的接口&quot;</span>),</span><br><span class="line"></span><br><span class="line">    REQ_MODE_NOT_SUPPORTED(<span class="number">9530</span>, <span class="string">&quot;请求方式不支持&quot;</span>),</span><br><span class="line"></span><br><span class="line">    SYS_ERROR(<span class="number">9999</span>, <span class="string">&quot;系统异常&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 状态码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> code;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 状态信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMsg</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ResultCodeEnum(<span class="type">int</span> code, String msg) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>优化</title>
      <link href="/posts/b0a72714.html"/>
      <url>/posts/b0a72714.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-使用Objects-equals比较对象">1. 使用Objects.equals比较对象</h2><p>这种方法相信大家并不陌生，甚至很多人都经常使用。是JDK7提供的一种方法，可以快速实现对象的比较，有效避免烦人的空指针检查。但是这种方法很容易用错，例如：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Long</span> <span class="string">longValue = 123L;</span></span><br><span class="line"><span class="attr">System.out.println(longValue</span>=<span class="string">=123); //true</span></span><br><span class="line"><span class="attr">System.out.println(Objects.equals(longValue,123));</span> <span class="string">//false</span></span><br></pre></td></tr></table></figure><p>为什么替换<code>==</code>为<code>Objects.equals()</code>会导致不同的结果？这是因为使用<code>==</code>编译器会得到封装类型对应的基本数据类型<code>longValue</code>，然后与这个基本数据类型进行比较，相当于编译器会自动将常量转换为比较基本数据类型, 而不是包装类型。<br>使用该<code>Objects.equals()</code>方法后，编译器默认常量的基本数据类型为<code>int</code>。下面是源码<code>Objects.equals()</code>，其中<code>a.equals(b)</code>使用的是<code>Long.equals()</code>会判断对象类型，因为编译器已经认为常量是<code>int</code>类型，所以比较结果一定是<code>false</code>。</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">public</span> <span class="string">static boolean equals(Object a, Object b) &#123;</span></span><br><span class="line">    <span class="attr">return</span> <span class="string">(a == b) || (a != null &amp;&amp; a.equals(b));</span></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">public</span> <span class="string">boolean equals(Object obj) &#123;</span></span><br><span class="line">    <span class="attr">if</span> <span class="string">(obj instanceof Long) &#123;</span></span><br><span class="line">        <span class="attr">return</span> <span class="string">value == ((Long)obj).longValue();</span></span><br><span class="line">    <span class="attr">&#125;</span></span><br><span class="line">    <span class="attr">return</span> <span class="string">false;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br></pre></td></tr></table></figure><p>知道了原因，解决方法就很简单了。直接声明常量的数据类型，如<code>Objects.equals(longValue,123L)</code>。其实如果逻辑严密，就不会出现上面的问题。我们需要做的是保持良好的编码习惯。</p><h2 id="2-日期格式错误">2. 日期格式错误</h2><p>在我们日常的开发中，经常需要对日期进行格式化，但是很多人使用的格式不对，导致出现意想不到的情况。请看下面的例子。</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Instant</span> <span class="string">instant = Instant.parse(&quot;2021-12-31T00:00:00.00Z&quot;);</span></span><br><span class="line"><span class="attr">DateTimeFormatter</span> <span class="string">formatter = DateTimeFormatter.ofPattern(&quot;YYYY-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line"><span class="attr">.withZone(ZoneId.systemDefault());</span></span><br><span class="line"><span class="attr">System.out.println(formatter.format(instant));//2022-12-31</span> <span class="string">08:00:00</span></span><br></pre></td></tr></table></figure><p>以上用于<code>YYYY-MM-dd</code>格式化, 年从<code>2021</code> 变成了 <code>2022</code>。为什么？这是因为 <code>java</code> 的<code>DateTimeFormatter</code> 模式<code>YYYY</code>和<code>yyyy</code>之间存在细微的差异。它们都代表一年，但是<code>yyyy</code>代表日历年，而<code>YYYY</code>代表星期。这是一个细微的差异，仅会导致一年左右的变更问题，因此您的代码本可以一直正常运行，而仅在新的一年中引发问题。12月31日按周计算的年份是2022年，正确的方式应该是使用<code>yyyy-MM-dd</code>格式化日期。<br>这个<code>bug</code>特别隐蔽。这在平时不会有问题。它只会在新的一年到来时触发。我公司就因为这个bug造成了生产事故。</p><h2 id="3-在-ThreadPool-中使用-ThreadLocal">3. 在 ThreadPool 中使用 ThreadLocal</h2><p>如果创建一个<code>ThreadLocal</code> 变量，访问该变量的线程将创建一个线程局部变量。合理使用<code>ThreadLocal</code>可以避免线程安全问题。<br>但是，如果在线程池中使用<code>ThreadLocal</code> ，就要小心了。您的代码可能会产生意想不到的结果。举个很简单的例子，假设我们有一个电商平台，用户购买商品后需要发邮件确认。</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">private</span> <span class="string">ThreadLocal&lt;User&gt; currentUser = ThreadLocal.withInitial(() -&gt; null);</span></span><br><span class="line"></span><br><span class="line"><span class="attr">private</span> <span class="string">ExecutorService executorService = Executors.newFixedThreadPool(4);</span></span><br><span class="line"></span><br><span class="line"><span class="attr">public</span> <span class="string">void executor() &#123;</span></span><br><span class="line">    <span class="attr">executorService.submit(()-&gt;&#123;</span></span><br><span class="line">        <span class="attr">User</span> <span class="string">user = currentUser.get();</span></span><br><span class="line">        <span class="attr">Integer</span> <span class="string">userId = user.getId();</span></span><br><span class="line">        <span class="attr">sendEmail(userId);</span></span><br><span class="line">    <span class="attr">&#125;);</span></span><br><span class="line"><span class="attr">&#125;</span></span><br></pre></td></tr></table></figure><p>如果我们使用<code>ThreadLocal</code>来保存用户信息，这里就会有一个隐藏的bug。因为使用了线程池，线程是可以复用的，所以在使用<code>ThreadLocal</code>获取用户信息的时候，很可能会误获取到别人的信息。您可以使用会话来解决这个问题。</p><h2 id="4-使用HashSet去除重复数据">4. 使用HashSet去除重复数据</h2><p>在编码的时候，我们经常会有去重的需求。一想到去重，很多人首先想到的就是用<code>HashSet</code>去重。但是，不小心使用 <code>HashSet</code> 可能会导致去重失败</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">User</span> <span class="string">user1 = new User();</span></span><br><span class="line"><span class="attr">user1.setUsername(&quot;test&quot;);</span></span><br><span class="line"></span><br><span class="line"><span class="attr">User</span> <span class="string">user2 = new User();</span></span><br><span class="line"><span class="attr">user2.setUsername(&quot;test&quot;);</span></span><br><span class="line"></span><br><span class="line"><span class="attr">List&lt;User&gt;</span> <span class="string">users = Arrays.asList(user1, user2);</span></span><br><span class="line"><span class="attr">HashSet&lt;User&gt;</span> <span class="string">sets = new HashSet&lt;&gt;(users);</span></span><br><span class="line"><span class="attr">System.out.println(sets.size());//</span> <span class="string">the size is 2</span></span><br></pre></td></tr></table></figure><p>细心的读者应该已经猜到失败的原因了。<code>HashSet</code>使用<code>hashcode</code>对哈希表进行寻址，使用<code>equals</code>方法判断对象是否相等。如果自定义对象没有重写<code>hashcode</code>方法和equals方法，则默认使用父对象的<code>hashcode</code>方法和<code>equals</code>方法。所以<code>HashSet</code>会认为这是两个不同的对象，所以导致去重失败。</p><h2 id="5-线程池中的异常被吃掉">5. 线程池中的异常被吃掉</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ExecutorService</span> <span class="string">executorService = Executors.newFixedThreadPool(1);</span></span><br><span class="line"><span class="attr">executorService.submit(()-&gt;&#123;</span></span><br><span class="line">    <span class="attr">//do</span> <span class="string">something</span></span><br><span class="line">    <span class="attr">double</span> <span class="string">result = 10/0;</span></span><br><span class="line"><span class="attr">&#125;);</span></span><br></pre></td></tr></table></figure><p>上面的代码模拟了一个线程池抛出异常的场景。我们真正的业务代码要处理各种可能出现的情况，所以很有可能因为某些特定的原因而触发<code>RuntimeException</code> 。<code>手动</code><br>但是如果没有特殊处理，这个异常就会被线程池吃掉。这样就会导出出现问题你都不知道，这是很严重的后果。因此，最好在线程池中<code>try catch</code>捕获异常。<br>链接：<a href="https://juejin.cn/post/7182184496517611576">https://juejin.cn/post/7182184496517611576</a></p>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自动生成实体类</title>
      <link href="/posts/27bda675.html"/>
      <url>/posts/27bda675.html</url>
      
        <content type="html"><![CDATA[<h3 id="xml添加依赖">xml添加依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--自动生成实体类依赖--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.freemarker<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.29<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--swagger测试工具--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.swagger<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="CodeGenerator自动生成工具">CodeGenerator自动生成工具</h3><h4 id="方式一（推荐使用）：">方式一（推荐使用）：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.toolkit.StringPool;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.AutoGenerator;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.InjectionConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.DataSourceConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.FileOutConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.GlobalConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.PackageConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.StrategyConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.TemplateConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.po.TableInfo;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 演示例子，执行 main 方法控制台输入模块表名回车自动生成对应项目目录中</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeGenerator</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">author</span> <span class="operator">=</span> <span class="string">&quot;zwl&quot;</span>;<span class="comment">//作者</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3307/svm?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC&quot;</span>;<span class="comment">//数据库</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">driverName</span> <span class="operator">=</span> <span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>;<span class="comment">//驱动</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">DbType</span> <span class="variable">dbType</span> <span class="operator">=</span> DbType.MYSQL;<span class="comment">//驱动</span></span><br><span class="line">    <span class="comment">//private static final String url = &quot;jdbc:oracle:thin:@172.1.1.44:1521:ecm&quot;;//数据库</span></span><br><span class="line">    <span class="comment">//private static final String driverName = &quot;oracle.jdbc.driver.OracleDriver&quot;;//驱动</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;zwl123&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">projectName</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;<span class="comment">//项目名称</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">packageName</span> <span class="operator">=</span> <span class="string">&quot;com.zwl&quot;</span>;<span class="comment">//包名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] tableName = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;</span><br><span class="line"><span class="comment">//            &quot;sys_menu&quot;, &quot;sys_role&quot;, &quot;sys_role_menu&quot;</span></span><br><span class="line">            <span class="string">&quot;sys_role_user&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 代码生成器</span></span><br><span class="line">        <span class="type">AutoGenerator</span> <span class="variable">mpg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AutoGenerator</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 全局配置</span></span><br><span class="line">        <span class="type">GlobalConfig</span> <span class="variable">gc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GlobalConfig</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">projectPath</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">        gc.setOutputDir(projectPath + projectName + <span class="string">&quot;/src/main/java&quot;</span>);</span><br><span class="line">        gc.setAuthor(author);</span><br><span class="line">        gc.setOpen(<span class="literal">false</span>);</span><br><span class="line">        <span class="comment">// gc.setSwagger2(true); 实体属性 Swagger2 注解</span></span><br><span class="line">        gc.setFileOverride(<span class="literal">true</span>);<span class="comment">// 是否覆盖文件</span></span><br><span class="line">        <span class="comment">//globalConfig.setEnableCache(false)// XML 二级缓存</span></span><br><span class="line">        gc.setBaseColumnList(<span class="literal">true</span>);<span class="comment">// XML columList</span></span><br><span class="line">        gc.setBaseResultMap(<span class="literal">true</span>);<span class="comment">// XML ResultMap</span></span><br><span class="line">        gc.setActiveRecord(<span class="literal">false</span>);<span class="comment">// 不需要ActiveRecord特性的请改为false</span></span><br><span class="line">        gc.setIdType(IdType.ASSIGN_ID);</span><br><span class="line">        <span class="comment">//设置service名</span></span><br><span class="line">        gc.setServiceName(<span class="string">&quot;%sService&quot;</span>);</span><br><span class="line">        gc.setXmlName(<span class="string">&quot;%sMapper&quot;</span>);</span><br><span class="line">        gc.setMapperName(<span class="string">&quot;%sMapper&quot;</span>);</span><br><span class="line">        gc.setControllerName(<span class="string">&quot;%sController&quot;</span>);</span><br><span class="line">        gc.setServiceImplName(<span class="string">&quot;%sServiceImpl&quot;</span>);</span><br><span class="line">        mpg.setGlobalConfig(gc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 数据源配置</span></span><br><span class="line">        <span class="type">DataSourceConfig</span> <span class="variable">dsc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceConfig</span>();</span><br><span class="line">        dsc.setDbType(dbType); <span class="comment">//类型</span></span><br><span class="line">        dsc.setUrl(url);</span><br><span class="line">        <span class="comment">// dsc.setSchemaName(&quot;public&quot;);</span></span><br><span class="line">        dsc.setDriverName(driverName);</span><br><span class="line">        dsc.setUsername(userName);</span><br><span class="line">        dsc.setPassword(password);</span><br><span class="line">        mpg.setDataSource(dsc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 包配置</span></span><br><span class="line">        <span class="type">PackageConfig</span> <span class="variable">pc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PackageConfig</span>();</span><br><span class="line"><span class="comment">//        pc.setModuleName(scanner(&quot;模块名&quot;));</span></span><br><span class="line">        pc.setParent(packageName);</span><br><span class="line">        mpg.setPackageInfo(pc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 自定义配置</span></span><br><span class="line">        <span class="type">InjectionConfig</span> <span class="variable">cfg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InjectionConfig</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initMap</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="comment">// to do nothing</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果模板引擎是 freemarker</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">templatePath</span> <span class="operator">=</span> <span class="string">&quot;/templates/mapper.xml.ftl&quot;</span>;</span><br><span class="line">        <span class="comment">// 如果模板引擎是 velocity</span></span><br><span class="line">        <span class="comment">// String templatePath = &quot;/templates/mapper.xml.vm&quot;;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 自定义输出配置</span></span><br><span class="line">        List&lt;FileOutConfig&gt; focList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 自定义配置会被优先输出</span></span><br><span class="line">        focList.add(<span class="keyword">new</span> <span class="title class_">FileOutConfig</span>(templatePath) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> String <span class="title function_">outputFile</span><span class="params">(TableInfo tableInfo)</span> &#123;</span><br><span class="line">                <span class="comment">// 自定义输出文件名 ， 如果你 Entity 设置了前后缀、此处注意 xml 的名称会跟着发生变化！！</span></span><br><span class="line">                <span class="keyword">return</span> projectPath + <span class="string">&quot;/src/main/resources/mapper/&quot;</span> + pc.getModuleName()</span><br><span class="line">                        + <span class="string">&quot;/&quot;</span> + tableInfo.getEntityName() + <span class="string">&quot;Mapper&quot;</span> + StringPool.DOT_XML;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        cfg.setFileOutConfigList(focList);</span><br><span class="line">        mpg.setCfg(cfg);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 配置模板</span></span><br><span class="line">        <span class="type">TemplateConfig</span> <span class="variable">templateConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TemplateConfig</span>();</span><br><span class="line">        templateConfig.setXml(<span class="literal">null</span>);</span><br><span class="line">        mpg.setTemplate(templateConfig);</span><br><span class="line">        <span class="comment">// 策略配置</span></span><br><span class="line">        <span class="type">StrategyConfig</span> <span class="variable">strategy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StrategyConfig</span>();</span><br><span class="line">        strategy.setNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">        strategy.setColumnNaming(NamingStrategy.underline_to_camel);</span><br><span class="line"><span class="comment">//        strategy.setSuperEntityClass(&quot;你自己的父类实体,没有就不用设置!&quot;);</span></span><br><span class="line">        strategy.setEntityLombokModel(<span class="literal">true</span>);</span><br><span class="line">        strategy.setRestControllerStyle(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">// 公共父类</span></span><br><span class="line"><span class="comment">//        strategy.setSuperControllerClass(&quot;你自己的父类控制器,没有就不用设置!&quot;);</span></span><br><span class="line">        <span class="comment">// 写于父类中的公共字段</span></span><br><span class="line">        strategy.setSuperEntityColumns(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        strategy.setInclude(tableName);</span><br><span class="line">        strategy.setControllerMappingHyphenStyle(<span class="literal">false</span>); <span class="comment">//取消&quot;-&quot;</span></span><br><span class="line">        strategy.setTablePrefix(pc.getModuleName() + <span class="string">&quot;_&quot;</span>);</span><br><span class="line">        mpg.setStrategy(strategy);</span><br><span class="line">        mpg.setTemplateEngine(<span class="keyword">new</span> <span class="title class_">FreemarkerTemplateEngine</span>());</span><br><span class="line">        mpg.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="方式二：">方式二：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.toolkit.StringPool;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.AutoGenerator;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.InjectionConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.DataSourceConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.FileOutConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.GlobalConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.PackageConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.StrategyConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.TemplateConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.po.TableInfo;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 演示例子，执行 main 方法控制台输入模块表名回车自动生成对应项目目录中</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeGenerator</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">author</span> <span class="operator">=</span> <span class="string">&quot;zwl&quot;</span>;<span class="comment">//作者</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3307/svm?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC&quot;</span>;<span class="comment">//数据库</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">driverName</span> <span class="operator">=</span> <span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>;<span class="comment">//驱动</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">DbType</span> <span class="variable">dbType</span> <span class="operator">=</span> DbType.MYSQL;<span class="comment">//驱动</span></span><br><span class="line">    <span class="comment">//private static final String url = &quot;jdbc:oracle:thin:@172.1.1.44:1521:ecm&quot;;//数据库</span></span><br><span class="line">    <span class="comment">//private static final String driverName = &quot;oracle.jdbc.driver.OracleDriver&quot;;//驱动</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;zwl123&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">projectName</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;<span class="comment">//项目名称</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">packageName</span> <span class="operator">=</span> <span class="string">&quot;com.zwl&quot;</span>;<span class="comment">//包名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] tableName = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;</span><br><span class="line">            <span class="string">&quot;sys_menu&quot;</span>, <span class="string">&quot;sys_role&quot;</span>, <span class="string">&quot;sys_role_menu&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 代码生成器</span></span><br><span class="line">        <span class="type">AutoGenerator</span> <span class="variable">mpg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AutoGenerator</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 全局配置</span></span><br><span class="line">        <span class="type">GlobalConfig</span> <span class="variable">gc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GlobalConfig</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">projectPath</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">        gc.setOutputDir(projectPath + projectName + <span class="string">&quot;/src/main/java&quot;</span>);</span><br><span class="line">        gc.setAuthor(author);</span><br><span class="line">        gc.setOpen(<span class="literal">false</span>);</span><br><span class="line">        <span class="comment">// gc.setSwagger2(true); 实体属性 Swagger2 注解</span></span><br><span class="line">        gc.setFileOverride(<span class="literal">true</span>);<span class="comment">// 是否覆盖文件</span></span><br><span class="line">        <span class="comment">//globalConfig.setEnableCache(false)// XML 二级缓存</span></span><br><span class="line">        gc.setBaseColumnList(<span class="literal">true</span>);<span class="comment">// XML columList</span></span><br><span class="line">        gc.setBaseResultMap(<span class="literal">true</span>);<span class="comment">// XML ResultMap</span></span><br><span class="line">        gc.setActiveRecord(<span class="literal">false</span>);<span class="comment">// 不需要ActiveRecord特性的请改为false</span></span><br><span class="line">        gc.setIdType(IdType.ASSIGN_ID);</span><br><span class="line">        <span class="comment">//设置service名</span></span><br><span class="line">        gc.setServiceName(<span class="string">&quot;%sService&quot;</span>);</span><br><span class="line">        gc.setXmlName(<span class="string">&quot;%sMapper&quot;</span>);</span><br><span class="line">        gc.setMapperName(<span class="string">&quot;%sMapper&quot;</span>);</span><br><span class="line">        gc.setControllerName(<span class="string">&quot;%sController&quot;</span>);</span><br><span class="line">        gc.setServiceImplName(<span class="string">&quot;%sServiceImpl&quot;</span>);</span><br><span class="line">        mpg.setGlobalConfig(gc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 数据源配置</span></span><br><span class="line">        <span class="type">DataSourceConfig</span> <span class="variable">dsc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceConfig</span>();</span><br><span class="line">        dsc.setDbType(dbType); <span class="comment">//类型</span></span><br><span class="line">        dsc.setUrl(url);</span><br><span class="line">        <span class="comment">// dsc.setSchemaName(&quot;public&quot;);</span></span><br><span class="line">        dsc.setDriverName(driverName);</span><br><span class="line">        dsc.setUsername(userName);</span><br><span class="line">        dsc.setPassword(password);</span><br><span class="line">        mpg.setDataSource(dsc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 包配置</span></span><br><span class="line">        <span class="type">PackageConfig</span> <span class="variable">pc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PackageConfig</span>();</span><br><span class="line"><span class="comment">//        pc.setModuleName(scanner(&quot;模块名&quot;));</span></span><br><span class="line">        pc.setParent(packageName);</span><br><span class="line">        mpg.setPackageInfo(pc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 自定义配置</span></span><br><span class="line">        <span class="type">InjectionConfig</span> <span class="variable">cfg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InjectionConfig</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initMap</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="comment">// to do nothing</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果模板引擎是 freemarker</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">templatePath</span> <span class="operator">=</span> <span class="string">&quot;/templates/mapper.xml.ftl&quot;</span>;</span><br><span class="line">        <span class="comment">// 如果模板引擎是 velocity</span></span><br><span class="line">        <span class="comment">// String templatePath = &quot;/templates/mapper.xml.vm&quot;;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 自定义输出配置</span></span><br><span class="line">        List&lt;FileOutConfig&gt; focList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 自定义配置会被优先输出</span></span><br><span class="line">        focList.add(<span class="keyword">new</span> <span class="title class_">FileOutConfig</span>(templatePath) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> String <span class="title function_">outputFile</span><span class="params">(TableInfo tableInfo)</span> &#123;</span><br><span class="line">                <span class="comment">// 自定义输出文件名 ， 如果你 Entity 设置了前后缀、此处注意 xml 的名称会跟着发生变化！！</span></span><br><span class="line">                <span class="keyword">return</span> projectPath + <span class="string">&quot;/src/main/resources/mapper/&quot;</span> + pc.getModuleName()</span><br><span class="line">                        + <span class="string">&quot;/&quot;</span> + tableInfo.getEntityName() + <span class="string">&quot;Mapper&quot;</span> + StringPool.DOT_XML;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        cfg.setFileOutConfigList(focList);</span><br><span class="line">        mpg.setCfg(cfg);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 配置模板</span></span><br><span class="line">        <span class="type">TemplateConfig</span> <span class="variable">templateConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TemplateConfig</span>();</span><br><span class="line">        templateConfig.setXml(<span class="literal">null</span>);</span><br><span class="line">        mpg.setTemplate(templateConfig);</span><br><span class="line">        <span class="comment">// 策略配置</span></span><br><span class="line">        <span class="type">StrategyConfig</span> <span class="variable">strategy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StrategyConfig</span>();</span><br><span class="line">        strategy.setNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">        strategy.setColumnNaming(NamingStrategy.underline_to_camel);</span><br><span class="line"><span class="comment">//        strategy.setSuperEntityClass(&quot;你自己的父类实体,没有就不用设置!&quot;);</span></span><br><span class="line">        strategy.setEntityLombokModel(<span class="literal">true</span>);</span><br><span class="line">        strategy.setRestControllerStyle(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">// 公共父类</span></span><br><span class="line"><span class="comment">//        strategy.setSuperControllerClass(&quot;你自己的父类控制器,没有就不用设置!&quot;);</span></span><br><span class="line">        <span class="comment">// 写于父类中的公共字段</span></span><br><span class="line">        strategy.setSuperEntityColumns(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        strategy.setInclude(tableName);</span><br><span class="line">        strategy.setControllerMappingHyphenStyle(<span class="literal">false</span>); <span class="comment">//取消&quot;-&quot;</span></span><br><span class="line">        strategy.setTablePrefix(pc.getModuleName() + <span class="string">&quot;_&quot;</span>);</span><br><span class="line">        mpg.setStrategy(strategy);</span><br><span class="line">        mpg.setTemplateEngine(<span class="keyword">new</span> <span class="title class_">FreemarkerTemplateEngine</span>());</span><br><span class="line">        mpg.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="自动生成Work实体类">自动生成Work实体类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwl.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.FieldFill;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.EqualsAndHashCode;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 工作信息表</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-01-13</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = false)</span></span><br><span class="line"><span class="meta">@ApiModel(value=&quot;Work对象&quot;, description=&quot;工作信息表&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Work</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;主键ID&quot;)</span></span><br><span class="line">    <span class="meta">@TableId(value = &quot;id&quot;, type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;工作标题字&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;工作内容&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;创建时间&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;更新时间&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> Date updateTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>字符串自增</title>
      <link href="/posts/31b9efad.html"/>
      <url>/posts/31b9efad.html</url>
      
        <content type="html"><![CDATA[<h3 id="实现字符串自增">实现字符串自增</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 字符串+1方法，该方法将其结尾的整数+1,适用于任何以整数结尾的字符串,不限格式，不限分隔符。</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> testStr 要+1的字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> +1后的字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NumberFormatException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">addOne</span><span class="params">(String testStr)</span> &#123;</span><br><span class="line">        String[] strs;</span><br><span class="line">        <span class="keyword">if</span> (testStr.length() &gt;= <span class="number">5</span>) &#123;</span><br><span class="line">            strs = testStr.substring(testStr.length() - <span class="number">5</span>).split(<span class="string">&quot;[^0-9]&quot;</span>);<span class="comment">//根据不是数字的字符拆分字符串</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            strs = testStr.split(<span class="string">&quot;[^0-9]&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.isEmpty(strs)) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">numStr</span> <span class="operator">=</span> strs[strs.length - <span class="number">1</span>];<span class="comment">//取出最后一组数字</span></span><br><span class="line">            <span class="keyword">if</span> (numStr != <span class="literal">null</span> &amp;&amp; numStr.length() &gt; <span class="number">0</span>) &#123;<span class="comment">//如果最后一组没有数字(也就是不以数字结尾)，抛NumberFormatException异常</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> numStr.length();<span class="comment">//取出字符串的长度</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> Integer.parseInt(numStr) + <span class="number">1</span>;<span class="comment">//将该数字加一</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">added</span> <span class="operator">=</span> String.valueOf(num);</span><br><span class="line">                n = Math.min(n, added.length());</span><br><span class="line">                <span class="comment">//拼接字符串</span></span><br><span class="line">                <span class="keyword">return</span> testStr.subSequence(<span class="number">0</span>, testStr.length() - n) + added;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> getRandomString(<span class="number">5</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> getRandomString(<span class="number">5</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="自定义产生字符串的长度">自定义产生字符串的长度</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户根据length产生字符串的长度</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> length</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getRandomString</span><span class="params">(Integer length)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">            sb.append(str);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> StringUtil.addOne(sb.toString());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npm 淘宝</title>
      <link href="/posts/53499a93.html"/>
      <url>/posts/53499a93.html</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># 替换npm模块为淘宝镜像</span><br><span class="line">npm set registry https:<span class="comment">//registry.npm.taobao.org</span></span><br><span class="line"></span><br><span class="line">#下载install</span><br><span class="line">npm install --registry=https:<span class="comment">//registry.npm.taobao.org</span></span><br><span class="line">#设置git用户名与密码 用户名随便写</span><br><span class="line">git config --global user.name <span class="string">&quot;pary&quot;</span> </span><br><span class="line"></span><br><span class="line">git config --global user.email <span class="string">&quot;374623337@qq.com&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#python 添加镜像源下载</span><br><span class="line">pip install numpy -i https:<span class="comment">//pypi.tuna.tsinghua.edu.cn/simple</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#pip版本升级</span><br><span class="line">python -m pip install --upgrade pip</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#pip版本降低</span><br><span class="line">python -m pip install pip==<span class="number">21.3</span><span class="number">.9</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#npm升级</span><br><span class="line">npm install npm -g</span><br><span class="line"></span><br><span class="line">#清缓存</span><br><span class="line">npm cache clean --force</span><br><span class="line"></span><br><span class="line">D:\Development\Save_code\Mars3d</span><br><span class="line"></span><br><span class="line">npm config set prefix <span class="string">&quot;E:\development\Node\node_global&quot;</span></span><br><span class="line"></span><br><span class="line">npm config set cache <span class="string">&quot;E:\development\Node\node_cache&quot;</span></span><br><span class="line"></span><br><span class="line">E:\development\Node\node_global</span><br><span class="line">E:\development\Node\node_global\node_modules</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日志集成配置文件</title>
      <link href="/posts/9bb4f7f.html"/>
      <url>/posts/9bb4f7f.html</url>
      
        <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/L170311/article/details/128875046"> springboot集成logback配置文件，配置日志_springboot集成日志logback_别活在过去i的博客-CSDN博客</a></p><p>其实在实际开发中我们不需要直接添加该依赖，你会发现<a href="https://so.csdn.net/so/search?q=spring-boot&amp;spm=1001.2101.3001.7020">spring-boot</a>-starter其中包含了spring-boot-starter-logging，该依赖内容就是 Spring Boot 默认的日志框架就是logback。</p><h3 id="导入依赖">导入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 排除默认的logback日志，使用log4j--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="logback-xml">logback.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--定义日志文件的存储地址,使用绝对路径--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;LOG_HOME&quot;</span> <span class="attr">value</span>=<span class="string">&quot;e:/logs&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Console 输出设置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;CONSOLE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>utf8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 按照每天生成日志文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志文件输出的文件名--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LOG_HOME&#125;/leadnews.%d&#123;yyyy-MM-dd&#125;.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 异步输出 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ASYNC&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.AsyncAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 不丢失日志.默认的,如果队列的80%已满,则会丢弃TRACT、DEBUG、INFO级别的日志 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">discardingThreshold</span>&gt;</span>0<span class="tag">&lt;/<span class="name">discardingThreshold</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 更改默认的队列的深度,该值会影响性能.默认值为256 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">queueSize</span>&gt;</span>512<span class="tag">&lt;/<span class="name">queueSize</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 添加附加的appender,最多只能添加一个 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.apache.ibatis.cache.decorators.LoggingCache&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.springframework.boot&quot;</span> <span class="attr">level</span>=<span class="string">&quot;debug&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;appender-ref ref=&quot;ASYNC&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yaml配置</title>
      <link href="/posts/3ee04349.html"/>
      <url>/posts/3ee04349.html</url>
      
        <content type="html"><![CDATA[<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据源配置</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">    <span class="attr">datasource:</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">        <span class="attr">driverClassName:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">        <span class="attr">druid:</span></span><br><span class="line">            <span class="comment"># 主库数据源</span></span><br><span class="line">            <span class="attr">master:</span></span><br><span class="line">                <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3307/ruoyi?useUnicode=true&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span></span><br><span class="line">                <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">                <span class="attr">password:</span> <span class="string">zwl123</span></span><br><span class="line">            <span class="comment"># 从库数据源</span></span><br><span class="line">            <span class="attr">slave:</span></span><br><span class="line">                <span class="comment"># 从数据源开关/默认关闭</span></span><br><span class="line">                <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">                <span class="attr">url:</span></span><br><span class="line">                <span class="attr">username:</span></span><br><span class="line">                <span class="attr">password:</span></span><br><span class="line">            <span class="comment"># 初始连接数</span></span><br><span class="line">            <span class="attr">initialSize:</span> <span class="number">5</span></span><br><span class="line">            <span class="comment"># 最小连接池数量</span></span><br><span class="line">            <span class="attr">minIdle:</span> <span class="number">10</span></span><br><span class="line">            <span class="comment"># 最大连接池数量</span></span><br><span class="line">            <span class="attr">maxActive:</span> <span class="number">20</span></span><br><span class="line">            <span class="comment"># 配置获取连接等待超时的时间</span></span><br><span class="line">            <span class="attr">maxWait:</span> <span class="number">60000</span></span><br><span class="line">            <span class="comment"># 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒</span></span><br><span class="line">            <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span></span><br><span class="line">            <span class="comment"># 配置一个连接在池中最小生存的时间，单位是毫秒</span></span><br><span class="line">            <span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span></span><br><span class="line">            <span class="comment"># 配置一个连接在池中最大生存的时间，单位是毫秒</span></span><br><span class="line">            <span class="attr">maxEvictableIdleTimeMillis:</span> <span class="number">900000</span></span><br><span class="line">            <span class="comment"># 配置检测连接是否有效</span></span><br><span class="line">            <span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">            <span class="attr">testWhileIdle:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">testOnBorrow:</span> <span class="literal">false</span></span><br><span class="line">            <span class="attr">testOnReturn:</span> <span class="literal">false</span></span><br><span class="line">            <span class="attr">webStatFilter:</span></span><br><span class="line">                <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">statViewServlet:</span></span><br><span class="line">                <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">                <span class="comment"># 设置白名单，不填则允许所有访问</span></span><br><span class="line">                <span class="attr">allow:</span></span><br><span class="line">                <span class="attr">url-pattern:</span> <span class="string">/druid/*</span></span><br><span class="line">                <span class="comment"># 控制台管理用户名和密码</span></span><br><span class="line">                <span class="attr">login-username:</span> <span class="string">ruoyi</span></span><br><span class="line">                <span class="attr">login-password:</span> <span class="number">123456</span></span><br><span class="line">            <span class="attr">filter:</span></span><br><span class="line">                <span class="attr">stat:</span></span><br><span class="line">                    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">                    <span class="comment"># 慢SQL记录</span></span><br><span class="line">                    <span class="attr">log-slow-sql:</span> <span class="literal">true</span></span><br><span class="line">                    <span class="attr">slow-sql-millis:</span> <span class="number">1000</span></span><br><span class="line">                    <span class="attr">merge-sql:</span> <span class="literal">true</span></span><br><span class="line">                <span class="attr">wall:</span></span><br><span class="line">                    <span class="attr">config:</span></span><br><span class="line">                        <span class="attr">multi-statement-allow:</span> <span class="literal">true</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># mybatis配置</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="comment"># xml文件路径</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:mapper/**/*.xml</span></span><br><span class="line">  <span class="comment"># 实体类路径</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.zwl.entity</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment"># 驼峰转换</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 是否开启缓存</span></span><br><span class="line">    <span class="attr">cache-enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># 打印sql</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="comment"># 全局配置</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="comment"># 数据库字段驼峰下划线转换</span></span><br><span class="line">    <span class="attr">db-column-underline:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># id自增类型(数据库id自增)</span></span><br><span class="line">    <span class="attr">id-type:</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#配置控制台打印日志Debug</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">    <span class="attr">level:</span></span><br><span class="line">        <span class="attr">com.jd.mapper:</span> <span class="string">debug</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mybatis自动填充</title>
      <link href="/posts/a32defae.html"/>
      <url>/posts/a32defae.html</url>
      
        <content type="html"><![CDATA[<h3 id="添加依赖">添加依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="实体类">实体类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.FieldFill;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonFormat;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.annotation.JsonSerialize;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ser.std.ToStringSerializer;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Builder;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonSerialize(using = ToStringSerializer.class)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String idNumber;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long createUser;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long updateUser;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="controller">controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.sky.dto.CategoryDTO;</span><br><span class="line"><span class="keyword">import</span> com.sky.dto.CategoryPageQueryDTO;</span><br><span class="line"><span class="keyword">import</span> com.sky.entity.Category;</span><br><span class="line"><span class="keyword">import</span> com.sky.result.PageResult;</span><br><span class="line"><span class="keyword">import</span> com.sky.result.Result;</span><br><span class="line"><span class="keyword">import</span> com.sky.service.CategoryService;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分类管理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin/category&quot;)</span></span><br><span class="line"><span class="meta">@Api(tags = &quot;分类相关接口&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CategoryController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CategoryService categoryService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增分类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> categoryDTO</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;新增分类&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;String&gt; <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> CategoryDTO categoryDTO)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;新增分类：&#123;&#125;&quot;</span>, categoryDTO);</span><br><span class="line">        categoryService.save(categoryDTO);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分类分页查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> categoryPageQueryDTO</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/page&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;分类分页查询&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;PageResult&gt; <span class="title function_">page</span><span class="params">(CategoryPageQueryDTO categoryPageQueryDTO)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;分页查询：&#123;&#125;&quot;</span>, categoryPageQueryDTO);</span><br><span class="line">        <span class="type">PageResult</span> <span class="variable">pageResult</span> <span class="operator">=</span> categoryService.pageQuery(categoryPageQueryDTO);</span><br><span class="line">        <span class="keyword">return</span> Result.success(pageResult);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除分类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@DeleteMapping</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;删除分类&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;String&gt; <span class="title function_">deleteById</span><span class="params">(Long id)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;删除分类：&#123;&#125;&quot;</span>, id);</span><br><span class="line">        categoryService.deleteById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改分类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> categoryDTO</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PutMapping</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;修改分类&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;String&gt; <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> CategoryDTO categoryDTO)</span>&#123;</span><br><span class="line">        categoryService.update(categoryDTO);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 启用、禁用分类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> status</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/status/&#123;status&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;启用禁用分类&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;String&gt; <span class="title function_">startOrStop</span><span class="params">(<span class="meta">@PathVariable(&quot;status&quot;)</span> Integer status, Long id)</span>&#123;</span><br><span class="line">        categoryService.startOrStop(status,id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据类型查询分类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> type</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;根据类型查询分类&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;List&lt;Category&gt;&gt; <span class="title function_">list</span><span class="params">(Integer type)</span>&#123;</span><br><span class="line">        List&lt;Category&gt; list = categoryService.list(type);</span><br><span class="line">        <span class="keyword">return</span> Result.success(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="service">service</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.sky.dto.CategoryDTO;</span><br><span class="line"><span class="keyword">import</span> com.sky.dto.CategoryPageQueryDTO;</span><br><span class="line"><span class="keyword">import</span> com.sky.entity.Category;</span><br><span class="line"><span class="keyword">import</span> com.sky.result.PageResult;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CategoryService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增分类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> categoryDTO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(CategoryDTO categoryDTO)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> categoryPageQueryDTO</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    PageResult <span class="title function_">pageQuery</span><span class="params">(CategoryPageQueryDTO categoryPageQueryDTO)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id删除分类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改分类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> categoryDTO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(CategoryDTO categoryDTO)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 启用、禁用分类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> status</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">startOrStop</span><span class="params">(Integer status, Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据类型查询分类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> type</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Category&gt; <span class="title function_">list</span><span class="params">(Integer type)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="serviceImpl">serviceImpl</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.github.pagehelper.Page;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.sky.constant.MessageConstant;</span><br><span class="line"><span class="keyword">import</span> com.sky.constant.StatusConstant;</span><br><span class="line"><span class="keyword">import</span> com.sky.context.BaseContext;</span><br><span class="line"><span class="keyword">import</span> com.sky.dto.CategoryDTO;</span><br><span class="line"><span class="keyword">import</span> com.sky.dto.CategoryPageQueryDTO;</span><br><span class="line"><span class="keyword">import</span> com.sky.entity.Category;</span><br><span class="line"><span class="keyword">import</span> com.sky.exception.DeletionNotAllowedException;</span><br><span class="line"><span class="keyword">import</span> com.sky.mapper.CategoryMapper;</span><br><span class="line"><span class="keyword">import</span> com.sky.mapper.DishMapper;</span><br><span class="line"><span class="keyword">import</span> com.sky.mapper.SetmealMapper;</span><br><span class="line"><span class="keyword">import</span> com.sky.result.PageResult;</span><br><span class="line"><span class="keyword">import</span> com.sky.service.CategoryService;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.BeanUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分类业务层</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CategoryServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">CategoryService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CategoryMapper categoryMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DishMapper dishMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SetmealMapper setmealMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增分类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> categoryDTO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(CategoryDTO categoryDTO)</span> &#123;</span><br><span class="line">        <span class="type">Category</span> <span class="variable">category</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Category</span>();</span><br><span class="line">        <span class="comment">//属性拷贝</span></span><br><span class="line">        BeanUtils.copyProperties(categoryDTO, category);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//分类状态默认为禁用状态0</span></span><br><span class="line">        category.setStatus(StatusConstant.DISABLE);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置创建时间、修改时间、创建人、修改人</span></span><br><span class="line">        category.setCreateTime(LocalDateTime.now());</span><br><span class="line">        category.setUpdateTime(LocalDateTime.now());</span><br><span class="line">        category.setCreateUser(BaseContext.getCurrentId());</span><br><span class="line">        category.setUpdateUser(BaseContext.getCurrentId());</span><br><span class="line"></span><br><span class="line">        categoryMapper.insert(category);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> categoryPageQueryDTO</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> PageResult <span class="title function_">pageQuery</span><span class="params">(CategoryPageQueryDTO categoryPageQueryDTO)</span> &#123;</span><br><span class="line">        PageHelper.startPage(categoryPageQueryDTO.getPage(),categoryPageQueryDTO.getPageSize());</span><br><span class="line">        <span class="comment">//下一条sql进行分页，自动加入limit关键字分页</span></span><br><span class="line">        Page&lt;Category&gt; page = categoryMapper.pageQuery(categoryPageQueryDTO);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageResult</span>(page.getTotal(), page.getResult());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id删除分类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="comment">//查询当前分类是否关联了菜品，如果关联了就抛出业务异常</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> dishMapper.countByCategoryId(id);</span><br><span class="line">        <span class="keyword">if</span>(count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//当前分类下有菜品，不能删除</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">DeletionNotAllowedException</span>(MessageConstant.CATEGORY_BE_RELATED_BY_DISH);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//查询当前分类是否关联了套餐，如果关联了就抛出业务异常</span></span><br><span class="line">        count = setmealMapper.countByCategoryId(id);</span><br><span class="line">        <span class="keyword">if</span>(count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//当前分类下有菜品，不能删除</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">DeletionNotAllowedException</span>(MessageConstant.CATEGORY_BE_RELATED_BY_SETMEAL);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//删除分类数据</span></span><br><span class="line">        categoryMapper.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改分类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> categoryDTO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(CategoryDTO categoryDTO)</span> &#123;</span><br><span class="line">        <span class="type">Category</span> <span class="variable">category</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Category</span>();</span><br><span class="line">        BeanUtils.copyProperties(categoryDTO,category);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置修改时间、修改人</span></span><br><span class="line">        category.setUpdateTime(LocalDateTime.now());</span><br><span class="line">        category.setUpdateUser(BaseContext.getCurrentId());</span><br><span class="line"></span><br><span class="line">        categoryMapper.update(category);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">                               * 启用、禁用分类</span></span><br><span class="line"><span class="comment">                               * <span class="doctag">@param</span> status</span></span><br><span class="line"><span class="comment">                               * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">                               */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">startOrStop</span><span class="params">(Integer status, Long id)</span> &#123;</span><br><span class="line">        <span class="type">Category</span> <span class="variable">category</span> <span class="operator">=</span> Category.builder()</span><br><span class="line">        .id(id)</span><br><span class="line">        .status(status)</span><br><span class="line">        .updateTime(LocalDateTime.now())</span><br><span class="line">        .updateUser(BaseContext.getCurrentId())</span><br><span class="line">        .build();</span><br><span class="line">        categoryMapper.update(category);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">                               * 根据类型查询分类</span></span><br><span class="line"><span class="comment">                               * <span class="doctag">@param</span> type</span></span><br><span class="line"><span class="comment">                               * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">                               */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Category&gt; <span class="title function_">list</span><span class="params">(Integer type)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> categoryMapper.list(type);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="mapper">mapper</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.github.pagehelper.Page;</span><br><span class="line"><span class="keyword">import</span> com.sky.annotation.AutoFill;</span><br><span class="line"><span class="keyword">import</span> com.sky.enumeration.OperationType;</span><br><span class="line"><span class="keyword">import</span> com.sky.dto.CategoryPageQueryDTO;</span><br><span class="line"><span class="keyword">import</span> com.sky.entity.Category;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Delete;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Insert;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CategoryMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 插入数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> category</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into category(type, name, sort, status, create_time, update_time, create_user, update_user)&quot; +</span></span><br><span class="line"><span class="meta">            &quot; VALUES&quot; +</span></span><br><span class="line"><span class="meta">            &quot; (#&#123;type&#125;, #&#123;name&#125;, #&#123;sort&#125;, #&#123;status&#125;, #&#123;createTime&#125;, #&#123;updateTime&#125;, #&#123;createUser&#125;, #&#123;updateUser&#125;)&quot;)</span></span><br><span class="line">    <span class="meta">@AutoFill(OperationType.INSERT)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Category category)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页查询</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> categoryPageQueryDTO</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Page&lt;Category&gt; <span class="title function_">pageQuery</span><span class="params">(CategoryPageQueryDTO categoryPageQueryDTO)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id删除分类</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from category where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据id修改分类</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> category</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@AutoFill(OperationType.UPDATE)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Category category)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据类型查询分类</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> type</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Category&gt; <span class="title function_">list</span><span class="params">(Integer type)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="mapper-xml">mapper.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.sky.mapper.CategoryMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;pageQuery&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.sky.entity.Category&quot;</span>&gt;</span></span><br><span class="line">    select * from category</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">        and name like concat(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;type != null&quot;</span>&gt;</span></span><br><span class="line">        and type = #&#123;type&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    order by sort asc , create_time desc</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.sky.entity.Category&quot;</span>&gt;</span></span><br><span class="line">    update category</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;type != null&quot;</span>&gt;</span></span><br><span class="line">        type = #&#123;type&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span></span><br><span class="line">        name = #&#123;name&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sort != null&quot;</span>&gt;</span></span><br><span class="line">        sort = #&#123;sort&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;status != null&quot;</span>&gt;</span></span><br><span class="line">        status = #&#123;status&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateTime != null&quot;</span>&gt;</span></span><br><span class="line">        update_time = #&#123;updateTime&#125;,</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateUser != null&quot;</span>&gt;</span></span><br><span class="line">        update_user = #&#123;updateUser&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.sky.entity.Category&quot;</span>&gt;</span></span><br><span class="line">    select * from category</span><br><span class="line">    where status = 1</span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;type != null&quot;</span>&gt;</span></span><br><span class="line">      and type = #&#123;type&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    order by sort asc,create_time desc</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="枚举">枚举</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 公共字段自动填充相关常量</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoFillConstant</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实体类中的方法名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SET_CREATE_TIME</span> <span class="operator">=</span> <span class="string">&quot;setCreateTime&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SET_UPDATE_TIME</span> <span class="operator">=</span> <span class="string">&quot;setUpdateTime&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SET_CREATE_USER</span> <span class="operator">=</span> <span class="string">&quot;setCreateUser&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SET_UPDATE_USER</span> <span class="operator">=</span> <span class="string">&quot;setUpdateUser&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="数据操作类型">数据操作类型</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数据库操作类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">OperationType</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    UPDATE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 插入操作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    INSERT</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自定义接口">自定义接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.sky.enumeration.OperationType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义注解</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AutoFill &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//数据库操作类型</span></span><br><span class="line">    OperationType <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自定义切面">自定义切面</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.sky.annotation.AutoFill;</span><br><span class="line"><span class="keyword">import</span> com.sky.constant.AutoFillConstant;</span><br><span class="line"><span class="keyword">import</span> com.sky.context.BaseContext;</span><br><span class="line"><span class="keyword">import</span> com.sky.enumeration.OperationType;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.Signature;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Pointcut;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.reflect.MethodSignature;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> sun.misc.Contended;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoFillAspect</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 切入点 识别mapper与加了注解的包</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.sky.mapper.*.*(..))&amp;&amp;@annotation(com.sky.annotation.AutoFill)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">autoFillPointCut</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;autoFillPointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">autoFill</span><span class="params">(JoinPoint joinPoint)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        log.info(<span class="string">&quot;开始进行公共字段自动填充&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取数据库操作类型</span></span><br><span class="line">        <span class="type">MethodSignature</span> <span class="variable">signature</span> <span class="operator">=</span> (MethodSignature) joinPoint.getSignature();<span class="comment">//获得方法签名对象</span></span><br><span class="line">        <span class="type">AutoFill</span> <span class="variable">autoFill</span> <span class="operator">=</span> signature.getMethod().getAnnotation(AutoFill.class);</span><br><span class="line">        <span class="type">OperationType</span> <span class="variable">type</span> <span class="operator">=</span> autoFill.value();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取当前拦截的方法参数 --实体对象  （mapper中实体对象要放到第一位）</span></span><br><span class="line">        Object[] args = joinPoint.getArgs();</span><br><span class="line">        <span class="keyword">if</span> (args == <span class="literal">null</span> || args.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">Object</span> <span class="variable">entity</span> <span class="operator">=</span> args[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//准备赋值的数据</span></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">now</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">        <span class="type">Long</span> <span class="variable">currentId</span> <span class="operator">=</span> BaseContext.getCurrentId();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//根据不同的操作类型，为对应属性通过反射来赋值</span></span><br><span class="line">        <span class="comment">//先获取四个属性</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">createTime</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(AutoFillConstant.SET_CREATE_TIME, LocalDateTime.class);</span><br><span class="line">        <span class="type">Method</span> <span class="variable">createUser</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(AutoFillConstant.SET_CREATE_USER, Long.class);</span><br><span class="line">        <span class="type">Method</span> <span class="variable">updateTime</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(AutoFillConstant.SET_UPDATE_TIME, LocalDateTime.class);</span><br><span class="line">        <span class="type">Method</span> <span class="variable">updateUser</span> <span class="operator">=</span> entity.getClass().getDeclaredMethod(AutoFillConstant.SET_UPDATE_USER, Long.class);</span><br><span class="line">        <span class="keyword">if</span> (type == OperationType.INSERT) &#123;</span><br><span class="line">            <span class="comment">//为四个公共字段赋值</span></span><br><span class="line">            createTime.invoke(entity, now);</span><br><span class="line">            createUser.invoke(entity, currentId);</span><br><span class="line">            updateTime.invoke(entity, now);</span><br><span class="line">            updateUser.invoke(entity, currentId);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type == OperationType.UPDATE) &#123;</span><br><span class="line">            updateTime.invoke(entity, now);</span><br><span class="line">            updateUser.invoke(entity, currentId);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="注解使用">注解使用</h3><p>在mapper中添加@AutoFill</p><h3 id="测试">测试</h3>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pagehelper实现分页</title>
      <link href="/posts/a0d8d3e8.html"/>
      <url>/posts/a0d8d3e8.html</url>
      
        <content type="html"><![CDATA[<h1>1.添加依赖</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pagehelper分页工具--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatis相关--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--myBatis-plus相关--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsqlparser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.jsqlparser<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h1>2.配置Pagehelper</h1><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#pagehelper</span></span><br><span class="line"><span class="attr">pagehelper:</span></span><br><span class="line">  <span class="comment">#数据库方言</span></span><br><span class="line">  <span class="attr">helper-dialect:</span> <span class="string">mysql</span></span><br><span class="line">  <span class="comment">#是否进行分页合理化</span></span><br><span class="line">  <span class="attr">reasonable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment">#是否支持通过Mapper接口参数来传递分页参数</span></span><br><span class="line">  <span class="attr">support-methods-arguments:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h1>3.使用PageHelper</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="meta">@PreAuthorize(&quot;@zwl.hasAuthority(&#x27;system:user:list&#x27;)&quot;)</span></span><br><span class="line"><span class="comment">//public Result list(@RequestBody SysUser sysUser) &#123;</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">list</span><span class="params">(SysUser sysUser, PageNumer page)</span> &#123;</span><br><span class="line">    <span class="comment">//分页</span></span><br><span class="line">    PageHelper.startPage(page.getPageNum(), page.getPageSize());</span><br><span class="line">    List&lt;SysUser&gt; list = sysUserService.list(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;SysUser&gt;()</span><br><span class="line">            .eq(!StringUtils.isEmpty(sysUser.getName()), <span class="string">&quot;name&quot;</span>, sysUser.getName())</span><br><span class="line">            .eq(!StringUtils.isEmpty(sysUser.getEmail()), <span class="string">&quot;email&quot;</span>, sysUser.getEmail()));</span><br><span class="line">    <span class="keyword">return</span> Result.success(<span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;SysUser&gt;(list));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>4.前端获取数据</h1><p><strong>template</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-main&gt;</span><br><span class="line">                &lt;div style=&quot;margin-bottom: 30px&quot;&gt;</span><br><span class="line">                    &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">                        &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">                        &lt;el-breadcrumb-item&gt;用户管理&lt;/el-breadcrumb-item&gt;</span><br><span class="line">                    &lt;/el-breadcrumb&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div style=&quot;margin: 10px 0&quot;&gt;</span><br><span class="line">                    &lt;el-input style=&quot;width: 200px; margin-left:2px&quot; placeholder=&quot;请输入名称&quot; suffix-icon=&quot;el-icon-search&quot;</span><br><span class="line">                              v-model=&quot;form.name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">                    &lt;el-input style=&quot;width: 200px; margin-left:10px&quot; placeholder=&quot;请输入邮箱&quot; suffix-icon=&quot;el-icon-message&quot;</span><br><span class="line">                              class=&quot;ml-5&quot;</span><br><span class="line">                              v-model=&quot;form.email&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">                    &lt;el-button class=&quot;ml-5&quot; style=&quot;margin-left:10px&quot; type=&quot;primary&quot; @click=&quot;load&quot;&gt;搜索&lt;/el-button&gt;</span><br><span class="line">                    &lt;el-button class=&quot;ml-5&quot; style=&quot;margin-left:10px&quot; type=&quot;primary&quot; @click=&quot;resetting&quot;&gt;重置&lt;/el-button&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div style=&quot;margin: 10px 0&quot;&gt;</span><br><span class="line">                    &lt;el-button type=&quot;primary&quot;&gt;新增 &lt;i class=&quot;el-icon-circle-plus-outline&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">                    &lt;el-button type=&quot;danger&quot;&gt;批量删除 &lt;i class=&quot;el-icon-remove-outline&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">                    &lt;el-button type=&quot;primary&quot;&gt;导入 &lt;i class=&quot;el-icon-bottom&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">                    &lt;el-button type=&quot;primary&quot;&gt;导出 &lt;i class=&quot;el-icon-top&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">                    &lt;el-button type=&quot;primary&quot; @click=&quot;onPrint()&quot;&gt;打印 &lt;i class=&quot;el-icon-top&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;el-table :data=&quot;tableData&quot; border stripe :header-cell-class-name=&quot;headerBg&quot;&gt;</span><br><span class="line">                    &lt;el-table-column prop=&quot;id&quot; label=&quot;ID&quot; width=&quot;80&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">                    &lt;el-table-column prop=&quot;name&quot; label=&quot;用户名&quot; width=&quot;140&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">                    &lt;el-table-column prop=&quot;age&quot; label=&quot;昵称&quot; width=&quot;120&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">                    &lt;el-table-column prop=&quot;email&quot; label=&quot;邮箱&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">                    &lt;el-table-column label=&quot;操作&quot; width=&quot;250&quot; align=&quot;center&quot;&gt;</span><br><span class="line">                        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">                            &lt;el-button type=&quot;success&quot;&gt;编辑 &lt;i class=&quot;el-icon-edit&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">                            &lt;el-button type=&quot;danger&quot;&gt;删除 &lt;i class=&quot;el-icon-remove-outline&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">                        &lt;/template&gt;</span><br><span class="line">                    &lt;/el-table-column&gt;</span><br><span class="line">                &lt;/el-table&gt;</span><br><span class="line">                &lt;div style=&quot;padding: 10px 0&quot;&gt;</span><br><span class="line">                    &lt;el-pagination</span><br><span class="line">                            @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">                            @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">                            :current-page=&quot;pageNum&quot;</span><br><span class="line">                            :page-sizes=&quot;[2, 5, 10, 20]&quot;</span><br><span class="line">                            :page-size=&quot;pageSize&quot;</span><br><span class="line">                            layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">                            :total=&quot;total&quot;&gt;</span><br><span class="line">                    &lt;/el-pagination&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/el-main&gt;</span><br></pre></td></tr></table></figure><p><strong>script</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//搜索</span></span><br><span class="line"><span class="title function_">load</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> data = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">email</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">email</span>,</span><br><span class="line">        <span class="attr">pageNum</span>: <span class="variable language_">this</span>.<span class="property">pageNum</span>,</span><br><span class="line">        <span class="attr">pageSize</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">list</span>(data).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tableData</span> = res.<span class="property">data</span>.<span class="property">list</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">tableData</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">total</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot+JWT登录认证</title>
      <link href="/posts/2a3a7f8d.html"/>
      <url>/posts/2a3a7f8d.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://blog.csdn.net/songt1122/article/details/125651825">https://blog.csdn.net/songt1122/article/details/125651825</a></p><h1>1.思路分析</h1><ol><li>登录</li></ol><ul><li>自定义登录接口：调用ProviderManager的方法进行认证，如果认证通过生成jwt，把用户信息存入redis中</li><li>自定义UserDetailsService：在这个实现类中去查询数据库（这里使用假数据测试）</li></ul><ol start="2"><li>校验:</li></ol><ul><li>定义Jwt认证过滤器</li></ul><ol start="3"><li>获取token</li></ol><ul><li>解析token：获取其中的userid，根据userid从redis中获取用户信息存入SecurityContextHolder中，然后其他的过滤器会从SecurityContextHolder中获取用户信息</li></ul><h1></h1><p>2.准备工作</p><h2 id="1-添加依赖">1.添加依赖</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--引入spring security场景启动器--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--JWT--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;jjwt&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;<span class="number">0.9</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!--redis依赖--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!--fastjson依赖--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;<span class="number">1.2</span><span class="number">.79</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="2-配置">2.配置</h2><h3 id="1-FastJsonRedisSerializer">1.FastJsonRedisSerializer</h3><p>用于Redis序列化的工具类：（依赖包 com.alibaba.fastjson.support.spring 中已存在）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.parser.ParserConfig;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.serializer.SerializerFeature;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.JavaType;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.type.TypeFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.RedisSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.SerializationException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Redis使用FastJson序列化</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FastJsonRedisSerializer</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">RedisSerializer</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Charset</span> <span class="variable">DEFAULT_CHARSET</span> <span class="operator">=</span> Charset.forName(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Class&lt;T&gt; clazz;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        ParserConfig.getGlobalInstance().setAutoTypeSupport(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FastJsonRedisSerializer</span><span class="params">(Class&lt;T&gt; clazz)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.clazz = clazz;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] serialize(T t) <span class="keyword">throws</span> SerializationException &#123;</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> JSON.toJSONString(t, SerializerFeature.WriteClassName).getBytes(DEFAULT_CHARSET);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">deserialize</span><span class="params">(<span class="type">byte</span>[] bytes)</span> <span class="keyword">throws</span> SerializationException &#123;</span><br><span class="line">        <span class="keyword">if</span> (bytes == <span class="literal">null</span> || bytes.length &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(bytes, DEFAULT_CHARSET);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> JSON.parseObject(str, clazz);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> JavaType <span class="title function_">getJavaType</span><span class="params">(Class&lt;?&gt; clazz)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> TypeFactory.defaultInstance().constructType(clazz);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-RedisConfig">2.RedisConfig</h3><p><strong>Redis配置类：</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.support.spring.FastJsonRedisSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.<span class="keyword">Configuration</span>;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.<span class="keyword">connection</span>.RedisConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * RedisConfig配置类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@<span class="keyword">Configuration</span></span><br><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> RedisConfig &#123;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    @SuppressWarnings(<span class="keyword">value</span> = &#123;&quot;unchecked&quot;, &quot;rawtypes&quot;&#125;)</span><br><span class="line">    <span class="built_in">public</span> RedisTemplate&lt;<span class="keyword">Object</span>, <span class="keyword">Object</span>&gt; redisTemplate(RedisConnectionFactory connectionFactory) &#123;</span><br><span class="line">        RedisTemplate&lt;<span class="keyword">Object</span>, <span class="keyword">Object</span>&gt; template = <span class="built_in">new</span> RedisTemplate&lt;&gt;();</span><br><span class="line">        <span class="keyword">template</span>.setConnectionFactory(connectionFactory);</span><br><span class="line"></span><br><span class="line">        FastJsonRedisSerializer serializer = <span class="built_in">new</span> FastJsonRedisSerializer(<span class="keyword">Object</span>.<span class="keyword">class</span>);</span><br><span class="line"></span><br><span class="line">        // 使用StringRedisSerializer来序列化和反序列化redis的key值</span><br><span class="line">        <span class="keyword">template</span>.setKeySerializer(<span class="built_in">new</span> StringRedisSerializer());</span><br><span class="line">        <span class="keyword">template</span>.setValueSerializer(serializer);</span><br><span class="line"></span><br><span class="line">        // Hash的key也采用StringRedisSerializer的序列化方式</span><br><span class="line">        <span class="keyword">template</span>.setHashKeySerializer(<span class="built_in">new</span> StringRedisSerializer());</span><br><span class="line">        <span class="keyword">template</span>.setHashValueSerializer(serializer);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">template</span>.afterPropertiesSet();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">template</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-SecurityConfig">3.SecurityConfig</h3><p>Security配置</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.zwl.filter.JwtAuthenticationTokenFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.AuthenticationManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.<span class="keyword">annotation</span>.authentication.configuration.AuthenticationConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.<span class="keyword">annotation</span>.method.configuration.EnableGlobalMethodSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.<span class="keyword">annotation</span>.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.http.SessionCreationPolicy;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.AuthenticationEntryPoint;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.SecurityFilterChain;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.access.AccessDeniedHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//在security配置类中添加如下注解</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity(prePostEnabled = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JwtAuthenticationTokenFilter jwtAuthenticationTokenFilter;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AuthenticationEntryPoint authenticationEntryPoint;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccessDeniedHandler accessDeniedHandler;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建BCryptPasswordEncoder注入容器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> BCryptPasswordEncoder passwordEncoder() &#123;</span><br><span class="line">        <span class="keyword">return</span> new BCryptPasswordEncoder();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//登录</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> authenticationConfiguration.getAuthenticationManager();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception &#123;</span><br><span class="line">        httpSecurity</span><br><span class="line">                <span class="comment">// CSRF禁用，因为不使用session</span></span><br><span class="line">                .csrf().disable()</span><br><span class="line">                <span class="comment">// 不通过Session获取SecurityContext</span></span><br><span class="line">                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)</span><br><span class="line">                .and()</span><br><span class="line">                <span class="comment">// 过滤请求</span></span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                <span class="comment">// 对于登录接口 允许匿名访问</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/user/login&quot;</span>).permitAll()</span><br><span class="line">                <span class="comment">// 对于注册接口允许访问</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/user/register&quot;</span>).permitAll()</span><br><span class="line">                <span class="comment">// 对验证码 允许访问</span></span><br><span class="line">                .antMatchers(<span class="string">&quot;/user/getCode&quot;</span>).permitAll()</span><br><span class="line">                .antMatchers(<span class="string">&quot;/user/code&quot;</span>).permitAll()</span><br><span class="line">                .antMatchers(<span class="string">&quot;/sysUser/list&quot;</span>).permitAll()</span><br><span class="line">                <span class="comment">// 除上面外的所有请求全部需要鉴权认证</span></span><br><span class="line">                .anyRequest().authenticated();</span><br><span class="line">        <span class="comment">// 把token校验过滤器添加到过滤器链中</span></span><br><span class="line">        httpSecurity.addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.<span class="keyword">class</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 配置异常处理器</span></span><br><span class="line">        httpSecurity.exceptionHandling()</span><br><span class="line">                <span class="comment">// 配置认证失败处理器</span></span><br><span class="line">                .authenticationEntryPoint(authenticationEntryPoint)</span><br><span class="line">                <span class="comment">// 配置授权失败处理器</span></span><br><span class="line">                .accessDeniedHandler(accessDeniedHandler);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 允许跨域</span></span><br><span class="line">        httpSecurity.cors();</span><br><span class="line">        <span class="keyword">return</span> httpSecurity.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-跨域配置">4.跨域配置</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwl.config;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.CorsRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> *springboot跨域配置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CorsConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// 设置允许跨域的路径</span></span><br><span class="line">        registry.addMapping(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">        <span class="comment">// 设置允许跨域请求的域名</span></span><br><span class="line">        .allowedOriginPatterns(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">        <span class="comment">// 是否允许cookie</span></span><br><span class="line">        .allowCredentials(<span class="literal">true</span>)</span><br><span class="line">        <span class="comment">// 设置允许的请求方式</span></span><br><span class="line">        .allowedMethods(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>, <span class="string">&quot;DELETE&quot;</span>, <span class="string">&quot;PUT&quot;</span>)</span><br><span class="line">        <span class="comment">// 设置允许的header属性</span></span><br><span class="line">        .allowedHeaders(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">        <span class="comment">// 跨域允许时间</span></span><br><span class="line">        .maxAge(<span class="number">3600</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-工具类">3.工具类</h2><h3 id="JwtUtil">JwtUtil</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Claims;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.JwtBuilder;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Jwts;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.SignatureAlgorithm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.crypto.SecretKey;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.spec.SecretKeySpec;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JWT工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//有效期为</span></span><br><span class="line">    <span class="comment">// 60 * 60 *1000  一个小时</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Long</span> <span class="variable">JWT_TTL</span> <span class="operator">=</span> <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000L</span>;</span><br><span class="line">    <span class="comment">//设置秘钥明文</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">JWT_KEY</span> <span class="operator">=</span> <span class="string">&quot;zwp&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getUUID</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> UUID.randomUUID().toString().replaceAll(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> token;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成jtw</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> subject token中要存放的数据（json格式）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">createJWT</span><span class="params">(String subject)</span> &#123;</span><br><span class="line">        <span class="type">JwtBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> getJwtBuilder(subject, <span class="literal">null</span>, getUUID());<span class="comment">// 设置过期时间</span></span><br><span class="line">        <span class="keyword">return</span> builder.compact();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成jtw</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> subject   token中要存放的数据（json格式）</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ttlMillis token超时时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">createJWT</span><span class="params">(String subject, Long ttlMillis)</span> &#123;</span><br><span class="line">        <span class="type">JwtBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> getJwtBuilder(subject, ttlMillis, getUUID());<span class="comment">// 设置过期时间</span></span><br><span class="line">        <span class="keyword">return</span> builder.compact();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建token</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> subject</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ttlMillis</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">createJWT</span><span class="params">(String id, String subject, Long ttlMillis)</span> &#123;</span><br><span class="line">        <span class="type">JwtBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> getJwtBuilder(subject, ttlMillis, id);<span class="comment">// 设置过期时间</span></span><br><span class="line">        <span class="keyword">return</span> builder.compact();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> JwtBuilder <span class="title function_">getJwtBuilder</span><span class="params">(String subject, Long ttlMillis, String uuid)</span> &#123;</span><br><span class="line">        <span class="type">SignatureAlgorithm</span> <span class="variable">signatureAlgorithm</span> <span class="operator">=</span> SignatureAlgorithm.HS256;</span><br><span class="line">        <span class="type">SecretKey</span> <span class="variable">secretKey</span> <span class="operator">=</span> generalKey();</span><br><span class="line">        <span class="type">long</span> <span class="variable">nowMillis</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="type">Date</span> <span class="variable">now</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(nowMillis);</span><br><span class="line">        <span class="keyword">if</span> (ttlMillis == <span class="literal">null</span>) &#123;</span><br><span class="line">            ttlMillis = JwtUtil.JWT_TTL;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">expMillis</span> <span class="operator">=</span> nowMillis + ttlMillis;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">expDate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(expMillis);</span><br><span class="line">        <span class="keyword">return</span> Jwts.builder()</span><br><span class="line">        .setId(uuid)              <span class="comment">//唯一的ID</span></span><br><span class="line">        .setSubject(subject)      <span class="comment">// 主题 可以是JSON数据</span></span><br><span class="line">        .setIssuer(<span class="string">&quot;zwp&quot;</span>)         <span class="comment">// 签发者</span></span><br><span class="line">        .setIssuedAt(now)         <span class="comment">// 签发时间</span></span><br><span class="line">        .signWith(signatureAlgorithm, secretKey) <span class="comment">//使用HS256对称加密算法签名, 第二个参数为秘钥</span></span><br><span class="line">        .setExpiration(expDate);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解析</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> jwt</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Claims <span class="title function_">parseJWT</span><span class="params">(String jwt)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">SecretKey</span> <span class="variable">secretKey</span> <span class="operator">=</span> generalKey();</span><br><span class="line">        <span class="keyword">return</span> Jwts.parser()</span><br><span class="line">        .setSigningKey(secretKey)</span><br><span class="line">        .parseClaimsJws(jwt)</span><br><span class="line">        .getBody();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成加密后的秘钥 secretKey</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SecretKey <span class="title function_">generalKey</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">byte</span>[] encodedKey = Base64.getDecoder().decode(JwtUtil.JWT_KEY);</span><br><span class="line">        <span class="type">SecretKey</span> <span class="variable">key</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecretKeySpec</span>(encodedKey, <span class="number">0</span>, encodedKey.length, <span class="string">&quot;AES&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">//        String jwt = createJWT(&quot;123456&quot;);</span></span><br><span class="line">    <span class="comment">//        System.out.println(jwt);</span></span><br><span class="line">    <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> parseJWT(<span class="string">&quot;eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiIxOTU4MWJkMWQ3NTA0YWY5YmMzNGVkNDFmZjQ2NzBiNyIsInN1YiI6IjEyMzQ1NiIsImlzcyI6Inp3cCIsImlhdCI6MTY2MjYyMTI0MiwiZXhwIjoxNjYyNjI0ODQyfQ.qG-dFsFKVvh9qoN2B4FAt-YCrxtDNEO3MWYGHtNcSb0&quot;</span>);</span><br><span class="line">    System.out.println(claims);</span><br><span class="line">    System.out.println(claims.getSubject());</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="RedisCache">RedisCache</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.BoundSetOperations;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.HashOperations;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.ValueOperations;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings(value = &#123;&quot;unchecked&quot;, &quot;rawtypes&quot;&#125;)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisCache</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 缓存基本的对象，Integer、String、实体类等</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   缓存的键值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 缓存的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">setCacheObject</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> T value)</span> &#123;</span><br><span class="line">        redisTemplate.opsForValue().set(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 缓存基本的对象，Integer、String、实体类等</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key      缓存的键值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value    缓存的值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeout  时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeUnit 时间颗粒度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">setCacheObject</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> T value, <span class="keyword">final</span> Integer timeout, <span class="keyword">final</span> TimeUnit timeUnit)</span> &#123;</span><br><span class="line">        redisTemplate.opsForValue().set(key, value, timeout, timeUnit);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置有效时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     Redis键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeout 超时时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true=设置成功；false=设置失败</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">expire</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">long</span> timeout)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> expire(key, timeout, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置有效时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     Redis键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeout 超时时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> unit    时间单位</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true=设置成功；false=设置失败</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">expire</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">long</span> timeout, <span class="keyword">final</span> TimeUnit unit)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.expire(key, timeout, unit);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得缓存的基本对象。</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 缓存键值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 缓存键值对应的数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; T <span class="title function_">getCacheObject</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        ValueOperations&lt;String, T&gt; operation = redisTemplate.opsForValue();</span><br><span class="line">        <span class="keyword">return</span> operation.get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除单个对象</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">deleteObject</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.delete(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除集合对象</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> collection 多个对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">deleteObject</span><span class="params">(<span class="keyword">final</span> Collection collection)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.delete(collection);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 缓存List数据</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key      缓存的键值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dataList 待缓存的List数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 缓存的对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="type">long</span> <span class="title function_">setCacheList</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> List&lt;T&gt; dataList)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForList().rightPushAll(key, dataList);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得缓存的list对象</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 缓存的键值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 缓存键值对应的数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">getCacheList</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForList().range(key, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 缓存Set</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     缓存键值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dataSet 缓存的数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 缓存数据的对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; BoundSetOperations&lt;String, T&gt; <span class="title function_">setCacheSet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Set&lt;T&gt; dataSet)</span> &#123;</span><br><span class="line">    BoundSetOperations&lt;String, T&gt; setOperation = redisTemplate.boundSetOps(key);</span><br><span class="line">    Iterator&lt;T&gt; it = dataSet.iterator();</span><br><span class="line">    <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">    setOperation.add(it.next());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> setOperation;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 获得缓存的set</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Set&lt;T&gt; <span class="title function_">getCacheSet</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> redisTemplate.opsForSet().members(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 缓存Map</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> dataMap</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">setCacheMap</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Map&lt;String, T&gt; dataMap)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (dataMap != <span class="literal">null</span>) &#123;</span><br><span class="line">    redisTemplate.opsForHash().putAll(key, dataMap);</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 获得缓存的Map</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Map&lt;String, T&gt; <span class="title function_">getCacheMap</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> redisTemplate.opsForHash().entries(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 往Hash中存入数据</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> key   Redis键</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> hKey  Hash键</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">setCacheMapValue</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> String hKey, <span class="keyword">final</span> T value)</span> &#123;</span><br><span class="line">    redisTemplate.opsForHash().put(key, hKey, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 获取Hash中的数据</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> key  Redis键</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> hKey Hash键</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> Hash中的对象</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; T <span class="title function_">getCacheMapValue</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> String hKey)</span> &#123;</span><br><span class="line">    HashOperations&lt;String, String, T&gt; opsForHash = redisTemplate.opsForHash();</span><br><span class="line">    <span class="keyword">return</span> opsForHash.get(key, hKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 删除Hash中的数据</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> hkey</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delCacheMapValue</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> String hkey)</span> &#123;</span><br><span class="line">    <span class="type">HashOperations</span> <span class="variable">hashOperations</span> <span class="operator">=</span> redisTemplate.opsForHash();</span><br><span class="line">    hashOperations.delete(key, hkey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 获取多个Hash中的数据</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> key   Redis键</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> hKeys Hash键集合</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> Hash对象集合</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">getMultiCacheMapValue</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Collection&lt;Object&gt; hKeys)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> redisTemplate.opsForHash().multiGet(key, hKeys);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 获得缓存的基本对象列表</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> pattern 字符串前缀</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> 对象列表</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;String&gt; <span class="title function_">keys</span><span class="params">(<span class="keyword">final</span> String pattern)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> redisTemplate.keys(pattern);</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="WebUtils">WebUtils</h3><p>网络工具类：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebUtils</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将字符串渲染到客户端</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response 渲染对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string 待渲染的字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">renderString</span><span class="params">(HttpServletResponse response, String string)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                response.setStatus(<span class="number">200</span>);</span><br><span class="line">                response.setContentType(<span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">                response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">                response.getWriter().print(string);</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)</span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-实体类">4.实体类</h2><h3 id="SysUser">SysUser</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.FieldFill;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableLogic;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonFormat;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.EqualsAndHashCode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-01-31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysUser</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 主键ID</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableId(value = &quot;id&quot;, type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 姓名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 年龄</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 性别(女:0,男:1)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer sex;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 账号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 邮箱</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建时间</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新时间</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date updateTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除状态(否:0,是:1)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableLogic</span></span><br><span class="line">    <span class="keyword">private</span> Integer isDeleted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="LoginUser">LoginUser</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.annotation.JSONField;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.GrantedAuthority;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.authority.SimpleGrantedAuthority;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginUser</span> <span class="keyword">implements</span> <span class="title class_">UserDetails</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> SysUser sysUser;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 存储权限信息</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; permission;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 存储SpringSecurity所需要的权限信息的集合</span></span><br><span class="line">    <span class="meta">@JSONField(serialize = false)</span>   <span class="comment">// 由于redis的原因,该类型不能序列化</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;GrantedAuthority&gt; authorities;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LoginUser</span><span class="params">(SysUser sysUser, List&lt;String&gt; permission)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sysUser = sysUser;</span><br><span class="line">        <span class="built_in">this</span>.permission = permission;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;? <span class="keyword">extends</span> <span class="title class_">GrantedAuthority</span>&gt; getAuthorities() &#123;</span><br><span class="line">        <span class="keyword">if</span> (Objects.nonNull(authorities)) &#123;</span><br><span class="line">            <span class="keyword">return</span> authorities;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 把permissions中字符串类型的权限信息转换成GrantedAuthority对象存入authorities中</span></span><br><span class="line">        authorities = permission.stream().map(SimpleGrantedAuthority::<span class="keyword">new</span>).collect(Collectors.toSet());</span><br><span class="line">        <span class="keyword">return</span> authorities;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sysUser.getPassword();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sysUser.getUsername();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAccountNonExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAccountNonLocked</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isCredentialsNonExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEnabled</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-认证过滤器">5.认证过滤器</h2><h3 id="JwtAuthenticationTokenFilter">JwtAuthenticationTokenFilter</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwl.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zwl.entity.LoginUser;</span><br><span class="line"><span class="keyword">import</span> com.zwl.utils.JwtUtil;</span><br><span class="line"><span class="keyword">import</span> com.zwl.utils.RedisCache;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Claims;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.context.SecurityContextHolder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.OncePerRequestFilter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterChain;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtAuthenticationTokenFilter</span> <span class="keyword">extends</span> <span class="title class_">OncePerRequestFilter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisCache redisCache;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doFilterInternal</span><span class="params">(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 获取token</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="comment">// token是空则放行</span></span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.hasText(token)) &#123;</span><br><span class="line">            <span class="comment">//放行</span></span><br><span class="line">            filterChain.doFilter(request, response);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 解析token</span></span><br><span class="line">        String userId;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> JwtUtil.parseJWT(token);</span><br><span class="line">            userId = claims.getSubject();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;token非法！！！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 从redis中获取用户信息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">redisKey</span> <span class="operator">=</span> <span class="string">&quot;login&quot;</span> + userId;</span><br><span class="line">        <span class="comment">//        LoginUser loginUser = JSON.parseObject(redisCache.getCacheObject(redisKey), LoginUser.class);</span></span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> redisCache.getCacheObject(redisKey);</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(loginUser)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;用户未登录！！！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取权限信息封装到Authentication中</span></span><br><span class="line">        <span class="type">UsernamePasswordAuthenticationToken</span> <span class="variable">authenticationToken</span> <span class="operator">=</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">UsernamePasswordAuthenticationToken</span>(loginUser, <span class="literal">null</span>, loginUser.getAuthorities());</span><br><span class="line">        <span class="comment">// 存入SecurityContextHolder</span></span><br><span class="line">        <span class="comment">//TODO 获收权限信息封装到Authentication中</span></span><br><span class="line">        SecurityContextHolder.getContext().setAuthentication(authenticationToken);</span><br><span class="line">        <span class="comment">// 放行</span></span><br><span class="line">        filterChain.doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-授权处理器">6.授权处理器</h2><h3 id="1-授权失败处理器">1.授权失败处理器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwl.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.zwl.domain.ResponseResult;</span><br><span class="line"><span class="keyword">import</span> com.zwl.utils.WebUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.access.AccessDeniedException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.access.AccessDeniedHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> * 授权失败处理器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccessDeniedHandlerImpl</span> <span class="keyword">implements</span> <span class="title class_">AccessDeniedHandler</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> accessDeniedException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, AccessDeniedException accessDeniedException)</span></span><br><span class="line">    <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="comment">// 处理异常</span></span><br><span class="line">        <span class="type">ResponseResult</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseResult</span>(HttpStatus.FORBIDDEN.value(), accessDeniedException.getMessage());</span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> JSON.toJSONString(result);</span><br><span class="line">        WebUtils.renderString(response, json);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-认证失败处理器">2.认证失败处理器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwl.handler;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.zwl.domain.ResponseResult;</span><br><span class="line"><span class="keyword">import</span> com.zwl.utils.WebUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.AuthenticationEntryPoint;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> * 认证失败处理器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AuthenticationEntryPointImpl</span> <span class="keyword">implements</span> <span class="title class_">AuthenticationEntryPoint</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">commence</span><span class="params">(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="comment">// 处理异常</span></span><br><span class="line">        <span class="type">ResponseResult</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResponseResult</span>(HttpStatus.UNAUTHORIZED.value(), authException.getMessage());</span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> JSON.toJSONString(result);</span><br><span class="line">        WebUtils.renderString(response, json);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-处理器">3.处理器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwl.handler;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;createTime&quot;</span>, Date.class, <span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, Date.class, <span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;isDeleted&quot;</span>, Integer.class, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.strictUpdateFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, Date.class, <span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-认证实现类">7.认证实现类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwl.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.zwl.entity.LoginUser;</span><br><span class="line"><span class="keyword">import</span> com.zwl.entity.SysUser;</span><br><span class="line"><span class="keyword">import</span> com.zwl.mapper.SysMenuMapper;</span><br><span class="line"><span class="keyword">import</span> com.zwl.mapper.SysUserMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UsernameNotFoundException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.ObjectUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 认证</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/9/12 16:53</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDetailsServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDetailsService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SysUserMapper sysUserMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SysMenuMapper sysMenuMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException &#123;</span><br><span class="line">        <span class="comment">//查询用例</span></span><br><span class="line">        <span class="type">SysUser</span> <span class="variable">sysUser</span> <span class="operator">=</span> sysUserMapper.selectOne(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;SysUser&gt;().eq(<span class="string">&quot;username&quot;</span>, username));</span><br><span class="line">        <span class="comment">//        SysUser sysUser = sysUserMapper.selectOne(new LambdaQueryWrapper&lt;SysUser&gt;().eq(SysUser::getUsername, username));</span></span><br><span class="line">        <span class="keyword">if</span> (ObjectUtils.isEmpty(sysUser)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;用户或密码错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// TODO 查询对应的权限信息</span></span><br><span class="line">        <span class="comment">//        List&lt;String&gt; list = new ArrayList&lt;&gt;(Arrays.asList(&quot;test&quot;, &quot;admin&quot;));</span></span><br><span class="line">        List&lt;String&gt; list = sysMenuMapper.selectPermsByUserId(sysUser.getId());</span><br><span class="line">        <span class="comment">// 把数据封装成LoginUser对象返回</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LoginUser</span>(sysUser, list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="8-登录接口">8.登录接口</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwl.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> com.zwl.entity.SysUser;</span><br><span class="line"><span class="keyword">import</span> com.zwl.result.Result;</span><br><span class="line"><span class="keyword">import</span> com.zwl.vo.SysUserVo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 服务类</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-01-31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SysUserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;SysUser&gt; &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 登录接口</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sysUserVo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    HashMap&lt;String, Object&gt; <span class="title function_">login</span><span class="params">( SysUserVo sysUserVo)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 登出</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Result <span class="title function_">logout</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注册</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sysUserVo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Result <span class="title function_">addUser</span><span class="params">(SysUserVo sysUserVo)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="9-登录接口实现类">9.登录接口实现类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwl.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.zwl.entity.LoginUser;</span><br><span class="line"><span class="keyword">import</span> com.zwl.entity.SysUser;</span><br><span class="line"><span class="keyword">import</span> com.zwl.mapper.SysUserMapper;</span><br><span class="line"><span class="keyword">import</span> com.zwl.result.Result;</span><br><span class="line"><span class="keyword">import</span> com.zwl.result.ResultCode;</span><br><span class="line"><span class="keyword">import</span> com.zwl.service.SysUserService;</span><br><span class="line"><span class="keyword">import</span> com.zwl.utils.JwtUtil;</span><br><span class="line"><span class="keyword">import</span> com.zwl.utils.RedisCache;</span><br><span class="line"><span class="keyword">import</span> com.zwl.vo.SysUserVo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.AuthenticationManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.Authentication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.context.SecurityContextHolder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.ObjectUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 服务实现类</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-01-31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SysUserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;SysUserMapper, SysUser&gt; <span class="keyword">implements</span> <span class="title class_">SysUserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注册验证码图片SessionKey</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">LOGIN_VALIDATE_CODE</span> <span class="operator">=</span> <span class="string">&quot;regist_validate_code&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AuthenticationManager authenticationManager;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisCache redisCache;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SysUserMapper sysUserMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> HashMap&lt;String, Object&gt; <span class="title function_">login</span><span class="params">(SysUserVo sysUserVo)</span> &#123;</span><br><span class="line">        HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">        <span class="comment">//用户认证</span></span><br><span class="line">        <span class="type">UsernamePasswordAuthenticationToken</span> <span class="variable">authenticationToken</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordAuthenticationToken</span>(sysUserVo.getUsername(), sysUserVo.getPassword());</span><br><span class="line">        <span class="type">Authentication</span> <span class="variable">authenticate</span> <span class="operator">=</span> authenticationManager.authenticate(authenticationToken);</span><br><span class="line">        System.out.println(authenticate);</span><br><span class="line">        <span class="comment">//如何认证不通过 抛出异常</span></span><br><span class="line">        <span class="keyword">if</span> (ObjectUtils.isEmpty(authenticate)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;登录失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如何认证通过，使用userId生成一个jwt</span></span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> (LoginUser) authenticate.getPrincipal();</span><br><span class="line">        <span class="type">String</span> <span class="variable">userId</span> <span class="operator">=</span> loginUser.getSysUser().getId().toString();</span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> JwtUtil.createJWT(userId);</span><br><span class="line">        <span class="comment">//回显token</span></span><br><span class="line">        map.put(<span class="string">&quot;token&quot;</span>, jwt);</span><br><span class="line">        map.put(<span class="string">&quot;user&quot;</span>, loginUser.getSysUser());</span><br><span class="line">        map.put(<span class="string">&quot;succ&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        redisCache.setCacheObject(<span class="string">&quot;login&quot;</span> + userId, loginUser);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">logout</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 获取SecurityContextHolder中的用户ID</span></span><br><span class="line">        <span class="type">Authentication</span> <span class="variable">authentication</span> <span class="operator">=</span> SecurityContextHolder.getContext().getAuthentication();</span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> (LoginUser) authentication.getPrincipal();</span><br><span class="line">        <span class="type">Long</span> <span class="variable">userId</span> <span class="operator">=</span> loginUser.getSysUser().getId();</span><br><span class="line">        <span class="comment">// 删除redis中的值</span></span><br><span class="line">        redisCache.deleteObject(<span class="string">&quot;login&quot;</span> + userId);</span><br><span class="line">        <span class="keyword">return</span> Result.success(<span class="string">&quot;登出成功！！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">addUser</span><span class="params">(SysUserVo sysUserVo)</span> &#123;</span><br><span class="line">                          <span class="type">SysUser</span> <span class="variable">sysUser</span> <span class="operator">=</span> sysUserMapper.selectOne(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;SysUser&gt;().eq(<span class="string">&quot;username&quot;</span>, sysUserVo.getUsername()));</span><br><span class="line">                          <span class="keyword">if</span> (!ObjectUtils.isEmpty(sysUser)) &#123;</span><br><span class="line">                          <span class="keyword">return</span> Result.error(ResultCode.ACCOUNT_ALREADY_EXISTS);</span><br><span class="line">                          &#125;</span><br><span class="line">                          <span class="comment">//加密</span></span><br><span class="line">                          <span class="type">BCryptPasswordEncoder</span> <span class="variable">bc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">                          sysUserVo.setPassword(bc.encode(sysUserVo.getPassword()));</span><br><span class="line">                          sysUserMapper.insert(sysUserVo);</span><br><span class="line">                          <span class="keyword">return</span> Result.success();</span><br><span class="line">                          &#125;</span><br><span class="line">                          &#125;</span><br></pre></td></tr></table></figure><h2 id="10-登录业务">10.登录业务</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwl.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.code.kaptcha.impl.DefaultKaptcha;</span><br><span class="line"><span class="keyword">import</span> com.zwl.result.Result;</span><br><span class="line"><span class="keyword">import</span> com.zwl.result.ResultCode;</span><br><span class="line"><span class="keyword">import</span> com.zwl.service.SysUserService;</span><br><span class="line"><span class="keyword">import</span> com.zwl.utils.CodeUtils;</span><br><span class="line"><span class="keyword">import</span> com.zwl.utils.CommonUtil;</span><br><span class="line"><span class="keyword">import</span> com.zwl.vo.SysUserVo;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.ObjectUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SysUserService sysUserService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> DefaultKaptcha captchaProducer;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注册验证码图片SessionKey</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">LOGIN_VALIDATE_CODE</span> <span class="operator">=</span> <span class="string">&quot;regist_validate_code&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 登录</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sysUserVo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">login</span><span class="params">(HttpServletRequest request, <span class="meta">@RequestBody</span> SysUserVo sysUserVo)</span> &#123;</span><br><span class="line">        <span class="comment">//getValidateCode不为空则进行验证码校验</span></span><br><span class="line">        <span class="keyword">if</span> (!ObjectUtils.isEmpty(sysUserVo.getValidateCode())) &#123;</span><br><span class="line">            <span class="comment">//判断验证码是否正确</span></span><br><span class="line">            <span class="keyword">if</span> (request.getSession(<span class="literal">true</span>)</span><br><span class="line">                .getAttribute(<span class="string">&quot;code&quot;</span>) == <span class="literal">null</span></span><br><span class="line">                ||</span><br><span class="line">                !sysUserVo.getValidateCode().toUpperCase()</span><br><span class="line">                .equals(request.getSession(<span class="literal">true</span>)</span><br><span class="line">                        .getAttribute(<span class="string">&quot;code&quot;</span>)</span><br><span class="line">                        .toString().toUpperCase())) &#123;</span><br><span class="line">                <span class="keyword">return</span> Result.error(ResultCode.NO_LOGIN_AUTH);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//登录</span></span><br><span class="line">        HashMap&lt;String, Object&gt; login = sysUserService.login(sysUserVo);</span><br><span class="line">        <span class="keyword">return</span> Result.success(login);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注册</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sysUserVo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/register&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">register</span><span class="params">(<span class="meta">@RequestBody</span> SysUserVo sysUserVo)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sysUserService.addUser(sysUserVo);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 登出</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/logout&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">logout</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//登录</span></span><br><span class="line">        <span class="keyword">return</span> sysUserService.logout();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注册验证码图片</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;获取验证码&quot;, notes = &quot;获取验证码&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &#123;&quot;/getCode&quot;&#125;, method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">registValidateCode</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        CommonUtil.validateCode(request, response, captchaProducer, LOGIN_VALIDATE_CODE);</span><br><span class="line">                                &#125;</span><br><span class="line"></span><br><span class="line">                                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                                * 生成验证码图片</span></span><br><span class="line"><span class="comment">                                *</span></span><br><span class="line"><span class="comment">                                * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">                                * <span class="doctag">@param</span> res</span></span><br><span class="line"><span class="comment">                                * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">                                */</span></span><br><span class="line">                                <span class="meta">@GetMapping(&quot;/code&quot;)</span></span><br><span class="line">                                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">code</span><span class="params">(HttpServletRequest request,</span></span><br><span class="line"><span class="params">                                HttpServletResponse res)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">                                <span class="type">CodeUtils</span> <span class="variable">code</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CodeUtils</span>();</span><br><span class="line">                                <span class="type">BufferedImage</span> <span class="variable">image</span> <span class="operator">=</span> code.getImage();</span><br><span class="line">                                <span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> code.getText();</span><br><span class="line">                                <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession(<span class="literal">true</span>);</span><br><span class="line">                                session.setAttribute(<span class="string">&quot;code&quot;</span>, text);</span><br><span class="line">                                CodeUtils.output(image, res.getOutputStream());</span><br><span class="line">                                &#125;</span><br><span class="line">                                &#125;</span><br></pre></td></tr></table></figure><h1>3.测试</h1>]]></content>
      
      
      <categories>
          
          <category> Note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Builder注解</title>
      <link href="/posts/7ab08565.html"/>
      <url>/posts/7ab08565.html</url>
      
        <content type="html"><![CDATA[<h4 id="一-概述">一.概述</h4><p>@Builder注解是lombok工具类为我们提供的一个注解，加上此注解，我们就可以通过链式构造创建对象。</p><h4 id="二、属性介绍">二、属性介绍</h4><p>@Builder.Default：加在属性上，非 final 的字段可以有默认值<br>builderMethodName：指定创建内部静态类的方法名，默认值为 builder<br>buildMethodName：指定静态类中创建实体类的方法名，默认值为 build<br>builderClassName：指定内部静态的类名，默认创建的类名为 外部类的类名+Builder<br>toBuilder：设置为 true 则可以根据这个类生成静态内部类Builder对象，然后可以根据这个builder对象来修改此类。默认为 false<br>access：设置 builderMethodName 的访问权限修饰符，默认为 public<br>三.分析<br>我们可以随意创建一个类，加上@Builder注解，再通过查看其编译后的.class文件来看其原理。<br>以下是代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Builder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="comment">//发动机</span></span><br><span class="line">    <span class="keyword">private</span> String engine;</span><br><span class="line">    <span class="comment">//轮胎</span></span><br><span class="line">    <span class="keyword">private</span> String tyre;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>.class文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String engine;</span><br><span class="line">    <span class="keyword">private</span> String tyre;</span><br><span class="line"></span><br><span class="line">    Car(<span class="keyword">final</span> String engine, <span class="keyword">final</span> String tyre) &#123;</span><br><span class="line">        <span class="built_in">this</span>.engine = engine;</span><br><span class="line">        <span class="built_in">this</span>.tyre = tyre;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Car.CarBuilder <span class="title function_">builder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Car</span>.CarBuilder();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">CarBuilder</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String engine;</span><br><span class="line">        <span class="keyword">private</span> String tyre;</span><br><span class="line"></span><br><span class="line">        CarBuilder() &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Car.CarBuilder <span class="title function_">engine</span><span class="params">(<span class="keyword">final</span> String engine)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.engine = engine;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Car.CarBuilder <span class="title function_">tyre</span><span class="params">(<span class="keyword">final</span> String tyre)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.tyre = tyre;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Car <span class="title function_">build</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="built_in">this</span>.engine, <span class="built_in">this</span>.tyre);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Car.CarBuilder(engine=&quot;</span> + <span class="built_in">this</span>.engine + <span class="string">&quot;, tyre=&quot;</span> + <span class="built_in">this</span>.tyre + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过查看其.class文件，我们发现其为这个类添加了有参构造器，一个静态内部类和一个获取静态内部类对象的方法。<br>其实其使用了建造者模式。即在此类中加上了Builder静态内部类，我们可以通过Builder内部类来分步骤创建外部类的部件，最后再通过build()方法来进行组装。<br>关于建造者模式，可以查看这一篇文章。<br><a href="https://mp.csdn.net/mp_blog/creation/editor/131182663">https://mp.csdn.net/mp_blog/creation/editor/131182663</a><br>但是,其没有创建无参构造，如果想要创建无参构造器，仅仅加上@NoArgsConstructor注解或者自定义无参构造器是不行的，编译时会报错，可以加上@AllArgsConstructor， @NoArgsConstructor，这两个注解来生成无参构造器。</p><h3 id="四-使用方式">四.使用方式</h3><p>1.在类上加上@Builder注解<br>2.当需要创建对象时，先通过builder()方法获取其Builder内部类，再调用内部类中的各个方法进行赋值，最后调用build()方法，将刚才的值赋给外部类，从而创建所需要的对象。<br>也可以直接调用其构造器进行创建对象。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MAIN</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> Car.builder()</span><br><span class="line">        .engine(<span class="string">&quot;自研发动机&quot;</span>)</span><br><span class="line">        .tyre(<span class="string">&quot;固特异&quot;</span>)</span><br><span class="line">        .build();</span><br><span class="line">        System.out.println(car);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="总结">总结</h3><p>使用此注解，可以使用链式构造来创建对象。在参数很多时可以很清楚的明白每个参数是什么意思，也使创建的过程更加清晰。</p>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>配置PicGo</title>
      <link href="/posts/1df1dc25.html"/>
      <url>/posts/1df1dc25.html</url>
      
        <content type="html"><![CDATA[<p>参考文档：<a href="https://zhuanlan.zhihu.com/p/638224211">体验PicGo+GitHub搭建图床，使用jsDelivr或Github raw免费加速 - 知乎 (zhihu.com)</a><br>参考视频：<a href="https://www.bilibili.com/video/BV1ZG411N7LS/?spm_id_from=333.999.0.0&amp;vd_source=bc6757e38069994ccb568789af04447a">https://www.bilibili.com/video/BV1ZG411N7LS/?spm_id_from=333.999.0.0&amp;vd_source=bc6757e38069994ccb568789af04447a</a></p><p>token：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</p><p>参考：<a href="https://blog.csdn.net/m0_57948510/article/details/131096222">小白的最强保姆教学：PicGo + gitee +Typora免费搭建属于个人的图床工具_picgo和gitee-CSDN博客</a></p><p>​    <a href="https://blog.csdn.net/qq_62982856/article/details/127184855">https://blog.csdn.net/qq_62982856/article/details/127184855</a></p><h2 id="摘要">摘要</h2><p>本文介绍如何通过PicGo上传图片，指定github作为图床，并使用jsDelivr或Github raw加速对github上图片进行CDN加速。另外介绍PicGo配置腾讯云作为图床，介绍Typora编辑器配置PicGo作为文件上传服务器。</p><h2 id="github设置">github设置</h2><h3 id="github创建仓库">github创建仓库</h3><p><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746228474-21b473f9-963a-458c-a662-2e7973b91a2e.png#averageHue=%23fdfdfc&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=u3583df7d&amp;originHeight=634&amp;originWidth=720&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u7718dd8d-a6dc-4929-bfcd-3a35f6bd288&amp;title=" alt=""><br>github创建仓库管理图片<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746228480-b88464c0-12ec-470d-a180-e84e7579c415.png#averageHue=%23e4c492&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=u2f47751f&amp;originHeight=720&amp;originWidth=1112&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u9707e743-b8c5-42a4-b1c6-3d0e4224e33&amp;title=" alt=""><br>github仓库创建完成<br><strong>如果不想使用main分支，可以新建分支</strong><br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746228488-84ffefda-791a-4cc5-b05b-1a5733d2063b.png#averageHue=%23ecd0a0&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=u83e2f9ce&amp;originHeight=684&amp;originWidth=1091&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u4f3c2edc-7c14-4073-8924-bb32e07964c&amp;title=" alt=""><br>github仓库切换分支</p><h3 id="github获取个人token">github获取个人token</h3><p>生成一个token用于PicGo访问图床仓库。<br>访问：<a href="https://link.zhihu.com/?target=https%3A//github.com/settings/tokens">https://github.com/settings/tokens</a> 然后点击<strong>Generate new token</strong>。<br>注意<br>这个token生成后只会显示一次！你要把这个token复制一下存到其他地方以备以后要用。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746228471-00092747-3be8-4e32-8d77-88d4ed32aa40.png#averageHue=%23fdfdfd&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=udf2bd95d&amp;originHeight=402&amp;originWidth=720&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ub2a26602-5da8-4490-b879-91ad1646999&amp;title=" alt=""><br>创建个人token<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746228510-ca194127-7067-4891-b6da-1d6958728b20.png#averageHue=%23fefefd&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=u115dce33&amp;originHeight=451&amp;originWidth=1282&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ud5643706-1303-4037-90da-1531c294a70&amp;title=" alt=""><br>创建个人token成功</p><h2 id="配置PicGo">配置PicGo</h2><p>下载地址：<a href="https://link.zhihu.com/?target=https%3A//github.com/Molunerfinn/PicGo">https://github.com/Molunerfinn/PicGo</a><br>官方文档：<a href="https://link.zhihu.com/?target=https%3A//picgo.github.io/PicGo-Doc/zh/guide">https://picgo.github.io/PicGo-Doc/zh/guide</a><br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746229050-b33b82e9-7e18-48f1-b78e-ec5977153892.png#averageHue=%23fefefd&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=u27d50de0&amp;originHeight=439&amp;originWidth=720&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u74ece441-41e2-4c7a-8422-349d364de8f&amp;title=" alt=""><br>下载</p><h3 id="PicGo配置github图床">PicGo配置github图床</h3><p>仓库名的格式是用户名/仓库，比如创建一个叫做cdn_img的仓库，在PicGo里要设定的仓库名就是Sbwillbealier/cdn_img。一般选择main分支(如若选择其他分支，注意文件链接多了一级 <em>/blob</em>)。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746229091-db06c997-198f-49f2-a389-0d5ca7ffd84e.png#averageHue=%2354524d&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=ue265ddb3&amp;originHeight=450&amp;originWidth=800&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u0a31ccd2-50f9-4e16-8e90-2b80cd158b3&amp;title=" alt=""><br>PicGo设置github图床选择main分支<br>如果需要上传到其他分支，需如下配置，此处使用了 <strong>jsdelivr</strong> 的CDN加速，使用见下一节<br><strong>配置自定义域名</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//raw.gitmirror.com/qiqiCSDN/pic_img/main</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746229055-7c3df378-415a-4068-8ab5-5cb106702408.png#averageHue=%2355514d&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=u102ef931&amp;originHeight=450&amp;originWidth=800&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u54eae5a4-d395-479e-adb1-a013cec7828&amp;title=" alt=""><br>PicGo设置github图床选择其他分支</p><h3 id="PicGo设置">PicGo设置</h3><p><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746229088-0b5c77db-becb-4d09-a1ec-e28e72ef4a37.png#averageHue=%2343403b&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=uc91a3f9d&amp;originHeight=450&amp;originWidth=800&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u0e15e625-e1c6-4795-8231-cd49817fd0c&amp;title=" alt=""><br>PicGo设置</p><h3 id="PicGo上传测试">PicGo上传测试</h3><p><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746229123-2ae3668f-71b9-4cfc-85b7-c84fec2f3fa8.png#averageHue=%236b6966&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=u41f79a23&amp;originHeight=281&amp;originWidth=720&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ud38551bf-7c88-44fd-95ed-034bc0702ac&amp;title=" alt=""><br>PicGo上传测试</p><h3 id="PicGo相册">PicGo相册</h3><p><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746229476-0990aa51-47f4-436e-b0ff-973b14c851de.png#averageHue=%2344413c&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=u751612bf&amp;originHeight=405&amp;originWidth=720&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u8b3c90ac-5e30-463b-a32c-4ea263ae014&amp;title=" alt=""><br>PicGo相册</p><h3 id="PigGO配置腾讯云COS">PigGO配置腾讯云COS</h3><p><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746229535-e9d7a09a-da07-40d9-95cb-797e6831b2bb.png#averageHue=%2363605c&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=u10d2c7ca&amp;originHeight=450&amp;originWidth=800&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ua0ff0970-30fc-4124-8777-ec0222b2333&amp;title=" alt=""><br>配置腾讯云COS作为图床</p><h2 id="jsDelivr介绍">jsDelivr介绍</h2><p>A free CDN for open source projects–用于开源项目的免费 CDN刚好解决github图片访问过慢的问题，使用十分简单。<br>项目地址：<a href="https://link.zhihu.com/?target=https%3A//www.jsdelivr.com/%3Fdocs%3Dgh">https://www.jsdelivr.com/?docs=gh</a><br>域名配置方式</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> 加载任何Github发布、提交或分支</span><br><span class="line">https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/u</span>ser<span class="regexp">/repo@version/</span>file</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 加载 jQuery v3.<span class="number">6.4</span></span><br><span class="line">https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>jquery<span class="regexp">/jquery@3.6.4/</span>dist/jquery.min.js</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 使用版本范围而不是特定版本</span><br><span class="line">https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>jquery<span class="regexp">/jquery@3.6/</span>dist/jquery.min.js</span><br><span class="line">https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>jquery<span class="regexp">/jquery@3/</span>dist/jquery.min.js</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 完全省略版本或分支以获得最新版本 ，不应该在生产中使用它</span><br><span class="line">https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>jquery<span class="regexp">/jquery/</span>dist/jquery.min.js</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 将“.min”添加到任何JS/CSS文件中以获取缩小版本，如果不存在，将为会自动生成</span><br><span class="line">https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>jquery<span class="regexp">/jquery@3.6.4/</span>src/core.min.js</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 在末尾添加<span class="string">&quot;/&quot;</span>以获取资源目录列表</span><br><span class="line">https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>jquery<span class="regexp">/jquery/</span></span><br></pre></td></tr></table></figure><h2 id="GitHub-raw-加速"><strong>GitHub raw 加速</strong></h2><p>要访问的原文件地址 <a href="https://link.zhihu.com/?target=https%3A//github.com/Sbwillbealier/cdn_img/blob/blog-1.0/img/202306191118833.png%3Fraw%3Dtrue">https://github.com/Sbwillbealier/cdn_img/blob/blog-1.0/img/202306191118833.png?raw=true</a>访问上面原文件链接实际会重定向到<a href="https://link.zhihu.com/?target=http%3A//raw.githubusercontent.com">http://raw.githubusercontent.com</a>，可以使用 Static CDN 提供的反代服务。推荐使用该加速，可以避免jsDelivr链接在一些平台上无法打开的问题。<br>使用方式</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将原地址</span></span><br><span class="line"><span class="attribute">raw</span>.githubusercontent.com</span><br><span class="line"></span><br><span class="line"><span class="comment">#替换为</span></span><br><span class="line"><span class="attribute">raw</span>.gitmirror.com</span><br><span class="line"></span><br><span class="line"><span class="comment">#替换后的链接</span></span><br><span class="line"><span class="attribute">https</span>://raw.gitmirror.com/Sbwillbealier/cdn_img/blog-<span class="number">1</span>.<span class="number">0</span>/img/<span class="number">202306191118833</span>.png</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746229580-0162ec0d-cf57-4707-b984-0b529668bbc4.png#averageHue=%2356524d&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=ub583c639&amp;originHeight=450&amp;originWidth=800&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u9ff10cd9-656b-4f48-a30d-4f5dbe8ef17&amp;title=" alt=""><br>GitHub raw 加速</p><h2 id="Typora图片上传PigGo">Typora图片上传PigGo</h2><p>喜欢使用Typora写markdown格式文章的，可以配置typora让文本中的图片通过PicGo上传到图床中去。<br>文件-偏好设置-图像-上传服务器选择PicGo，选择PicGo可执行文件路径<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746229615-5ea9b491-1305-4cd3-a061-778a96fdabb7.png#averageHue=%23f8f8f8&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=ubb03f8e1&amp;originHeight=825&amp;originWidth=1552&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u91c1de9b-a223-4be4-a3a2-c232c73d72f&amp;title=" alt=""><br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746229661-2890e21d-3fc0-462d-a3ec-0d88afdab03a.png#averageHue=%23fafaf9&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=uef9173c6&amp;originHeight=630&amp;originWidth=720&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u33272813-ba30-4a8e-a86c-c1dca9767af&amp;title=" alt=""><br>添加本地图片<br><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1698746229957-f9c76fbb-25db-4288-a691-4e9c402e55b8.png#averageHue=%23eeeeed&amp;clientId=u9bc4029c-7eda-4&amp;from=paste&amp;id=u812c6388&amp;originHeight=693&amp;originWidth=779&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u85e3243b-9a0a-4dd9-98b7-80b57e00955&amp;title=" alt=""><br>右键点击图片-上传图片</p>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot内置工具类</title>
      <link href="/posts/bcb0582e.html"/>
      <url>/posts/bcb0582e.html</url>
      
        <content type="html"><![CDATA[<p>笔记：<a href="https://blog.csdn.net/weixin_42189550/article/details/122256369">https://blog.csdn.net/weixin_42189550/article/details/122256369</a></p><h3 id="断言">断言</h3><ol><li>断言是一个逻辑判断，用于检查不应该发生的情况</li><li>Assert 关键字在 JDK1.4 中引入，可通过 JVM 参数-enableassertions开启</li><li>SpringBoot 中提供了 Assert 断言工具类，通常用于数据合法性检查</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 要求参数 object 必须为非空（Not Null），否则抛出异常，不予放行</span></span><br><span class="line"><span class="comment">// 参数 message 参数用于定制异常信息。</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">notNull</span><span class="params">(Object object, String message)</span></span><br><span class="line"><span class="comment">// 要求参数必须空（Null），否则抛出异常，不予『放行』。</span></span><br><span class="line"><span class="comment">// 和 notNull() 方法断言规则相反</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">isNull</span><span class="params">(Object object, String message)</span></span><br><span class="line"><span class="comment">// 要求参数必须为真（True），否则抛出异常，不予『放行』。</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">isTrue</span><span class="params">(<span class="type">boolean</span> expression, String message)</span></span><br><span class="line"><span class="comment">// 要求参数（List/Set）必须非空（Not Empty），否则抛出异常，不予放行</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">notEmpty</span><span class="params">(Collection collection, String message)</span></span><br><span class="line"><span class="comment">// 要求参数（String）必须有长度（即，Not Empty），否则抛出异常，不予放行</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">hasLength</span><span class="params">(String text, String message)</span></span><br><span class="line"><span class="comment">// 要求参数（String）必须有内容（即，Not Blank），否则抛出异常，不予放行</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">hasText</span><span class="params">(String text, String message)</span></span><br><span class="line"><span class="comment">// 要求参数是指定类型的实例，否则抛出异常，不予放行</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">isInstanceOf</span><span class="params">(Class type, Object obj, String message)</span></span><br><span class="line"><span class="comment">// 要求参数 `subType` 必须是参数 superType 的子类或实现类，否则抛出异常，不予放行</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">isAssignable</span><span class="params">(Class superType, Class subType, String message)</span></span><br></pre></td></tr></table></figure><h3 id="对象、数组、集合">对象、数组、集合</h3><h4 id="ObjectUtils（对象）">ObjectUtils（对象）</h4><h5 id="获取对象的基本信息">获取对象的基本信息</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取对象的类名。参数为 null 时，返回字符串：&quot;null&quot; </span></span><br><span class="line">String <span class="title function_">nullSafeClassName</span><span class="params">(Object obj)</span></span><br><span class="line"><span class="comment">// 参数为 null 时，返回 0</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">nullSafeHashCode</span><span class="params">(Object object)</span></span><br><span class="line"><span class="comment">// 参数为 null 时，返回字符串：&quot;null&quot;</span></span><br><span class="line">String <span class="title function_">nullSafeToString</span><span class="params">(<span class="type">boolean</span>[] array)</span></span><br><span class="line"><span class="comment">// 获取对象 HashCode（十六进制形式字符串）。参数为 null 时，返回 0 </span></span><br><span class="line">String <span class="title function_">getIdentityHexString</span><span class="params">(Object obj)</span></span><br><span class="line"><span class="comment">// 获取对象的类名和 HashCode。 参数为 null 时，返回字符串：&quot;&quot; </span></span><br><span class="line">String <span class="title function_">identityToString</span><span class="params">(Object obj)</span></span><br><span class="line"><span class="comment">// 相当于 toString()方法，但参数为 null 时，返回字符串：&quot;&quot;</span></span><br><span class="line">String <span class="title function_">getDisplayString</span><span class="params">(Object obj)</span></span><br></pre></td></tr></table></figure><h5 id="判断工具">判断工具</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断数组是否为空</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(Object[] array)</span></span><br><span class="line"><span class="comment">// 判断参数对象是否是数组</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isArray</span><span class="params">(Object obj)</span></span><br><span class="line"><span class="comment">// 判断数组中是否包含指定元素</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">containsElement</span><span class="params">(Object[] array, Object element)</span></span><br><span class="line"><span class="comment">// 相等，或同为 null时，返回 true</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">nullSafeEquals</span><span class="params">(Object o1, Object o2)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">判断参数对象是否为空，判断标准为：</span></span><br><span class="line"><span class="comment">    Optional: Optional.empty()</span></span><br><span class="line"><span class="comment">       Array: length == 0</span></span><br><span class="line"><span class="comment">CharSequence: length == 0</span></span><br><span class="line"><span class="comment">  Collection: Collection.isEmpty()</span></span><br><span class="line"><span class="comment">         Map: Map.isEmpty()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(Object obj)</span></span><br></pre></td></tr></table></figure><h5 id="其他工具方法">其他工具方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 向参数数组的末尾追加新元素，并返回一个新数组</span></span><br><span class="line">&lt;A, O <span class="keyword">extends</span> <span class="title class_">A</span>&gt; A[] addObjectToArray(A[] array, O obj)</span><br><span class="line"><span class="comment">// 原生基础类型数组 --&gt; 包装类数组</span></span><br><span class="line">Object[] toObjectArray(Object source)</span><br></pre></td></tr></table></figure><h4 id="StringUtils（字符串）">StringUtils（字符串）</h4><h5 id="字符串判断工具">字符串判断工具</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断字符串是否为 null，或 &quot;&quot;。注意，包含空白符的字符串为非空</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(Object str)</span></span><br><span class="line"><span class="comment">// 判断字符串是否是以指定内容结束。忽略大小写</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">endsWithIgnoreCase</span><span class="params">(String str, String suffix)</span></span><br><span class="line"><span class="comment">// 判断字符串是否已指定内容开头。忽略大小写</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">startsWithIgnoreCase</span><span class="params">(String str, String prefix)</span> </span><br><span class="line"><span class="comment">// 是否包含空白符</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">containsWhitespace</span><span class="params">(String str)</span></span><br><span class="line"><span class="comment">// 判断字符串非空且长度不为 0，即，Not Empty</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">hasLength</span><span class="params">(CharSequence str)</span></span><br><span class="line"><span class="comment">// 判断字符串是否包含实际内容，即非仅包含空白符，也就是 Not Blank</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">hasText</span><span class="params">(CharSequence str)</span></span><br><span class="line"><span class="comment">// 判断字符串指定索引处是否包含一个子串。</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">substringMatch</span><span class="params">(CharSequence str, <span class="type">int</span> index, CharSequence substring)</span></span><br><span class="line"><span class="comment">// 计算一个字符串中指定子串的出现次数</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">countOccurrencesOf</span><span class="params">(String str, String sub)</span></span><br></pre></td></tr></table></figure><h5 id="字符串操作工具">字符串操作工具</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查找并替换指定子串</span></span><br><span class="line">String <span class="title function_">replace</span><span class="params">(String inString, String oldPattern, String newPattern)</span></span><br><span class="line"><span class="comment">// 去除尾部的特定字符</span></span><br><span class="line">String <span class="title function_">trimTrailingCharacter</span><span class="params">(String str, <span class="type">char</span> trailingCharacter)</span> </span><br><span class="line"><span class="comment">// 去除头部的特定字符</span></span><br><span class="line">String <span class="title function_">trimLeadingCharacter</span><span class="params">(String str, <span class="type">char</span> leadingCharacter)</span></span><br><span class="line"><span class="comment">// 去除头部的空白符</span></span><br><span class="line">String <span class="title function_">trimLeadingWhitespace</span><span class="params">(String str)</span></span><br><span class="line"><span class="comment">// 去除头部的空白符</span></span><br><span class="line">String <span class="title function_">trimTrailingWhitespace</span><span class="params">(String str)</span></span><br><span class="line"><span class="comment">// 去除头部和尾部的空白符</span></span><br><span class="line">String <span class="title function_">trimWhitespace</span><span class="params">(String str)</span></span><br><span class="line"><span class="comment">// 删除开头、结尾和中间的空白符</span></span><br><span class="line">String <span class="title function_">trimAllWhitespace</span><span class="params">(String str)</span></span><br><span class="line"><span class="comment">// 删除指定子串</span></span><br><span class="line">String <span class="title function_">delete</span><span class="params">(String inString, String pattern)</span></span><br><span class="line"><span class="comment">// 删除指定字符（可以是多个）</span></span><br><span class="line">String <span class="title function_">deleteAny</span><span class="params">(String inString, String charsToDelete)</span></span><br><span class="line"><span class="comment">// 对数组的每一项执行 trim() 方法</span></span><br><span class="line">String[] trimArrayElements(String[] array)</span><br><span class="line"><span class="comment">// 将 URL 字符串进行解码</span></span><br><span class="line">String <span class="title function_">uriDecode</span><span class="params">(String source, Charset charset)</span></span><br></pre></td></tr></table></figure><h5 id="路径相关工具方法">路径相关工具方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解析路径字符串，优化其中的 “..” </span></span><br><span class="line">String <span class="title function_">cleanPath</span><span class="params">(String path)</span></span><br><span class="line"><span class="comment">// 解析路径字符串，解析出文件名部分</span></span><br><span class="line">String <span class="title function_">getFilename</span><span class="params">(String path)</span></span><br><span class="line"><span class="comment">// 解析路径字符串，解析出文件后缀名</span></span><br><span class="line">String <span class="title function_">getFilenameExtension</span><span class="params">(String path)</span></span><br><span class="line"><span class="comment">// 比较两个两个字符串，判断是否是同一个路径。会自动处理路径中的 “..” </span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">pathEquals</span><span class="params">(String path1, String path2)</span></span><br><span class="line"><span class="comment">// 删除文件路径名中的后缀部分</span></span><br><span class="line">String <span class="title function_">stripFilenameExtension</span><span class="params">(String path)</span> </span><br><span class="line"><span class="comment">// 以 “. 作为分隔符，获取其最后一部分</span></span><br><span class="line">String <span class="title function_">unqualify</span><span class="params">(String qualifiedName)</span></span><br><span class="line"><span class="comment">// 以指定字符作为分隔符，获取其最后一部分</span></span><br><span class="line">String <span class="title function_">unqualify</span><span class="params">(String qualifiedName, <span class="type">char</span> separator)</span></span><br></pre></td></tr></table></figure><h4 id="CollectionUtils">CollectionUtils</h4><h5 id="集合判断工具">集合判断工具</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断 List/Set 是否为空</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(Collection&lt;?&gt; collection)</span></span><br><span class="line"><span class="comment">// 判断 Map 是否为空</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(Map&lt;?,?&gt; map)</span></span><br><span class="line"><span class="comment">// 判断 List/Set 中是否包含某个对象</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">containsInstance</span><span class="params">(Collection&lt;?&gt; collection, Object element)</span></span><br><span class="line"><span class="comment">// 以迭代器的方式，判断 List/Set 中是否包含某个对象</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(Iterator&lt;?&gt; iterator, Object element)</span></span><br><span class="line"><span class="comment">// 判断 List/Set 是否包含某些对象中的任意一个</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">containsAny</span><span class="params">(Collection&lt;?&gt; source, Collection&lt;?&gt; candidates)</span></span><br><span class="line"><span class="comment">// 判断 List/Set 中的每个元素是否唯一。即 List/Set 中不存在重复元素</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">hasUniqueObject</span><span class="params">(Collection&lt;?&gt; collection)</span></span><br></pre></td></tr></table></figure><h5 id="集合操作工具">集合操作工具</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将 Array 中的元素都添加到 List/Set 中</span></span><br><span class="line">&lt;E&gt; <span class="keyword">void</span> <span class="title function_">mergeArrayIntoCollection</span><span class="params">(Object array, Collection&lt;E&gt; collection)</span>  </span><br><span class="line"><span class="comment">// 将 Properties 中的键值对都添加到 Map 中</span></span><br><span class="line">&lt;K,V&gt; <span class="keyword">void</span> <span class="title function_">mergePropertiesIntoMap</span><span class="params">(Properties props, Map&lt;K,V&gt; map)</span></span><br><span class="line"><span class="comment">// 返回 List 中最后一个元素</span></span><br><span class="line">&lt;T&gt; T <span class="title function_">lastElement</span><span class="params">(List&lt;T&gt; list)</span>  </span><br><span class="line"><span class="comment">// 返回 Set 中最后一个元素</span></span><br><span class="line">&lt;T&gt; T <span class="title function_">lastElement</span><span class="params">(Set&lt;T&gt; set)</span> </span><br><span class="line"><span class="comment">// 返回参数 candidates 中第一个存在于参数 source 中的元素</span></span><br><span class="line">&lt;E&gt; E <span class="title function_">findFirstMatch</span><span class="params">(Collection&lt;?&gt; source, Collection&lt;E&gt; candidates)</span></span><br><span class="line"><span class="comment">// 返回 List/Set 中指定类型的元素。</span></span><br><span class="line">&lt;T&gt; T <span class="title function_">findValueOfType</span><span class="params">(Collection&lt;?&gt; collection, Class&lt;T&gt; type)</span></span><br><span class="line"><span class="comment">// 返回 List/Set 中指定类型的元素。如果第一种类型未找到，则查找第二种类型，以此类推</span></span><br><span class="line">Object <span class="title function_">findValueOfType</span><span class="params">(Collection&lt;?&gt; collection, Class&lt;?&gt;[] types)</span></span><br><span class="line"><span class="comment">// 返回 List/Set 中元素的类型</span></span><br><span class="line">Class&lt;?&gt; findCommonElementType(Collection&lt;?&gt; collection)</span><br></pre></td></tr></table></figure><h3 id="文件、资源、IO-流">文件、资源、IO 流</h3><h4 id="FileCopyUtils">FileCopyUtils</h4><h5 id="输入">输入</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从文件中读入到字节数组中</span></span><br><span class="line"><span class="type">byte</span>[] copyToByteArray(File in)</span><br><span class="line"><span class="comment">// 从输入流中读入到字节数组中</span></span><br><span class="line"><span class="type">byte</span>[] copyToByteArray(InputStream in)</span><br><span class="line"><span class="comment">// 从输入流中读入到字符串中</span></span><br><span class="line">String <span class="title function_">copyToString</span><span class="params">(Reader in)</span></span><br></pre></td></tr></table></figure><h5 id="输出">输出</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从字节数组到文件</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(<span class="type">byte</span>[] in, File out)</span></span><br><span class="line"><span class="comment">// 从文件到文件</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">copy</span><span class="params">(File in, File out)</span></span><br><span class="line"><span class="comment">// 从字节数组到输出流</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(<span class="type">byte</span>[] in, OutputStream out)</span> </span><br><span class="line"><span class="comment">// 从输入流到输出流</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">copy</span><span class="params">(InputStream in, OutputStream out)</span> </span><br><span class="line"><span class="comment">// 从输入流到输出流</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">copy</span><span class="params">(Reader in, Writer out)</span></span><br><span class="line"><span class="comment">// 从字符串到输出流</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(String in, Writer out)</span></span><br></pre></td></tr></table></figure><h4 id="ResourceUtils">ResourceUtils</h4><h5 id="从资源路径获取文件">从资源路径获取文件</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断字符串是否是一个合法的 URL 字符串。</span></span><br><span class="line"><span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isUrl</span><span class="params">(String resourceLocation)</span></span><br><span class="line"><span class="comment">// 获取 URL</span></span><br><span class="line"><span class="keyword">static</span> URL <span class="title function_">getURL</span><span class="params">(String resourceLocation)</span> </span><br><span class="line"><span class="comment">// 获取文件（在 JAR 包内无法正常使用，需要是一个独立的文件）</span></span><br><span class="line"><span class="keyword">static</span> File <span class="title function_">getFile</span><span class="params">(String resourceLocation)</span></span><br></pre></td></tr></table></figure><h5 id="Resource">Resource</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文件系统资源 D:\...</span></span><br><span class="line">FileSystemResource</span><br><span class="line"><span class="comment">// URL 资源，如 file://... http://...</span></span><br><span class="line">UrlResource</span><br><span class="line"><span class="comment">// 类路径下的资源，classpth:...</span></span><br><span class="line">ClassPathResource</span><br><span class="line"><span class="comment">// Web 容器上下文中的资源（jar 包、war 包）</span></span><br><span class="line">ServletContextResource</span><br><span class="line"><span class="comment">// 判断资源是否存在</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">exists</span><span class="params">()</span></span><br><span class="line"><span class="comment">// 从资源中获得 File 对象</span></span><br><span class="line">File <span class="title function_">getFile</span><span class="params">()</span></span><br><span class="line"><span class="comment">// 从资源中获得 URI 对象</span></span><br><span class="line">URI <span class="title function_">getURI</span><span class="params">()</span></span><br><span class="line"><span class="comment">// 从资源中获得 URI 对象</span></span><br><span class="line">URL <span class="title function_">getURL</span><span class="params">()</span></span><br><span class="line"><span class="comment">// 获得资源的 InputStream</span></span><br><span class="line">InputStream <span class="title function_">getInputStream</span><span class="params">()</span></span><br><span class="line"><span class="comment">// 获得资源的描述信息</span></span><br><span class="line">String <span class="title function_">getDescription</span><span class="params">()</span></span><br></pre></td></tr></table></figure><h4 id="StreamUtils">StreamUtils</h4><h5 id="输入-2">输入</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(<span class="type">byte</span>[] in, OutputStream out)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">copy</span><span class="params">(InputStream in, OutputStream out)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(String in, Charset charset, OutputStream out)</span></span><br><span class="line"><span class="type">long</span> <span class="title function_">copyRange</span><span class="params">(InputStream in, OutputStream out, <span class="type">long</span> start, <span class="type">long</span> end)</span></span><br></pre></td></tr></table></figure><h5 id="输出-2">输出</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">byte</span>[] copyToByteArray(InputStream in)</span><br><span class="line">String <span class="title function_">copyToString</span><span class="params">(InputStream in, Charset charset)</span></span><br><span class="line"><span class="comment">// 舍弃输入流中的内容</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">drain</span><span class="params">(InputStream in)</span></span><br></pre></td></tr></table></figure><h3 id="反射、AOP">反射、AOP</h3><h4 id="ReflectionUtils">ReflectionUtils</h4><h5 id="获取方法">获取方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在类中查找指定方法</span></span><br><span class="line">Method <span class="title function_">findMethod</span><span class="params">(Class&lt;?&gt; clazz, String name)</span> </span><br><span class="line"><span class="comment">// 同上，额外提供方法参数类型作查找条件</span></span><br><span class="line">Method <span class="title function_">findMethod</span><span class="params">(Class&lt;?&gt; clazz, String name, Class&lt;?&gt;... paramTypes)</span> </span><br><span class="line"><span class="comment">// 获得类中所有方法，包括继承而来的</span></span><br><span class="line">Method[] getAllDeclaredMethods(Class&lt;?&gt; leafClass) </span><br><span class="line"><span class="comment">// 在类中查找指定构造方法</span></span><br><span class="line">Constructor&lt;T&gt; <span class="title function_">accessibleConstructor</span><span class="params">(Class&lt;T&gt; clazz, Class&lt;?&gt;... parameterTypes)</span> </span><br><span class="line"><span class="comment">// 是否是 equals() 方法</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEqualsMethod</span><span class="params">(Method method)</span> </span><br><span class="line"><span class="comment">// 是否是 hashCode() 方法 </span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isHashCodeMethod</span><span class="params">(Method method)</span> </span><br><span class="line"><span class="comment">// 是否是 toString() 方法</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isToStringMethod</span><span class="params">(Method method)</span> </span><br><span class="line"><span class="comment">// 是否是从 Object 类继承而来的方法</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isObjectMethod</span><span class="params">(Method method)</span> </span><br><span class="line"><span class="comment">// 检查一个方法是否声明抛出指定异常</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">declaresException</span><span class="params">(Method method, Class&lt;?&gt; exceptionType)</span></span><br></pre></td></tr></table></figure><h5 id="执行方法">执行方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 执行方法</span></span><br><span class="line">Object <span class="title function_">invokeMethod</span><span class="params">(Method method, Object target)</span>  </span><br><span class="line"><span class="comment">// 同上，提供方法参数</span></span><br><span class="line">Object <span class="title function_">invokeMethod</span><span class="params">(Method method, Object target, Object... args)</span> </span><br><span class="line"><span class="comment">// 取消 Java 权限检查。以便后续执行该私有方法</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">makeAccessible</span><span class="params">(Method method)</span> </span><br><span class="line"><span class="comment">// 取消 Java 权限检查。以便后续执行私有构造方法</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">makeAccessible</span><span class="params">(Constructor&lt;?&gt; ctor)</span></span><br></pre></td></tr></table></figure><h5 id="获取字段">获取字段</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在类中查找指定属性</span></span><br><span class="line">Field <span class="title function_">findField</span><span class="params">(Class&lt;?&gt; clazz, String name)</span> </span><br><span class="line"><span class="comment">// 同上，多提供了属性的类型</span></span><br><span class="line">Field <span class="title function_">findField</span><span class="params">(Class&lt;?&gt; clazz, String name, Class&lt;?&gt; type)</span> </span><br><span class="line"><span class="comment">// 是否为一个 &quot;public static final&quot; 属性</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isPublicStaticFinal</span><span class="params">(Field field)</span></span><br></pre></td></tr></table></figure><h5 id="设置字段">设置字段</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取 target 对象的 field 属性值</span></span><br><span class="line">Object <span class="title function_">getField</span><span class="params">(Field field, Object target)</span> </span><br><span class="line"><span class="comment">// 设置 target 对象的 field 属性值，值为 value</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setField</span><span class="params">(Field field, Object target, Object value)</span> </span><br><span class="line"><span class="comment">// 同类对象属性对等赋值</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">shallowCopyFieldState</span><span class="params">(Object src, Object dest)</span></span><br><span class="line"><span class="comment">// 取消 Java 的权限控制检查。以便后续读写该私有属性</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">makeAccessible</span><span class="params">(Field field)</span> </span><br><span class="line"><span class="comment">// 对类的每个属性执行 callback</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">doWithFields</span><span class="params">(Class&lt;?&gt; clazz, ReflectionUtils.FieldCallback fc)</span> </span><br><span class="line"><span class="comment">// 同上，多了个属性过滤功能。</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">doWithFields</span><span class="params">(Class&lt;?&gt; clazz, ReflectionUtils.FieldCallback fc, </span></span><br><span class="line"><span class="params">                  ReflectionUtils.FieldFilter ff)</span> </span><br><span class="line"><span class="comment">// 同上，但不包括继承而来的属性</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">doWithLocalFields</span><span class="params">(Class&lt;?&gt; clazz, ReflectionUtils.FieldCallback fc)</span></span><br></pre></td></tr></table></figure><h4 id="AopUtils">AopUtils</h4><h5 id="判断代理类型">判断代理类型</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断是不是 Spring 代理对象</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isAopProxy</span><span class="params">()</span></span><br><span class="line"><span class="comment">// 判断是不是 jdk 动态代理对象</span></span><br><span class="line">isJdkDynamicProxy()</span><br><span class="line"><span class="comment">// 判断是不是 CGLIB 代理对象</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isCglibProxy</span><span class="params">()</span></span><br></pre></td></tr></table></figure><h5 id="获取被代理对象的-class">获取被代理对象的 class</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取被代理的目标 class</span></span><br><span class="line">Class&lt;?&gt; getTargetClass()</span><br></pre></td></tr></table></figure><h4 id="AopContext">AopContext</h4><h5 id="获取当前对象的代理对象">获取当前对象的代理对象</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javaObject <span class="title function_">currentProxy</span><span class="params">()</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>技术</title>
      <link href="/posts/51229049.html"/>
      <url>/posts/51229049.html</url>
      
        <content type="html"><![CDATA[<h3 id="自定义分页">自定义分页</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义分页page</span></span><br><span class="line"> <span class="type">Page</span> <span class="variable">page1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Page</span>();</span><br><span class="line"> <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> extendList.size();</span><br><span class="line"> page1.setTotal(total);</span><br><span class="line"> <span class="type">int</span> <span class="variable">startIndex</span> <span class="operator">=</span> (page.getPageNum() - <span class="number">1</span>) * page.getPageSize();</span><br><span class="line"> <span class="type">int</span> <span class="variable">endIndex</span> <span class="operator">=</span> Math.min(startIndex + page.getPageSize(),total);</span><br><span class="line"> page1.addAll(extendList.subList(startIndex,endIndex));</span><br></pre></td></tr></table></figure><h3 id="实现倒计时">实现倒计时</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 60天</span></span><br><span class="line"><span class="comment">    days=当前时间-操作时间</span></span><br><span class="line"><span class="comment">    有效是时间=60-days</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    <span class="type">Date</span> <span class="variable">createDate</span></span><br><span class="line"> <span class="operator">=</span> binExtend.getDelTime();</span><br><span class="line"><span class="type">Integer</span> <span class="variable">days</span> <span class="operator">=</span> now.getDay() - createDate.getDay();</span><br><span class="line">binExtend.setWorkingTime(workingtime-days);</span><br></pre></td></tr></table></figure><h3 id="判断是否全为数字">判断是否全为数字</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断是否全为数字</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> str</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isNumeric</span><span class="params">(String str)</span>&#123;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;[0-9]*&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> pattern.matcher(str).matches();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="length用户要求产生字符串的长度">length用户要求产生字符串的长度</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//length用户要求产生字符串的长度</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getRandomString</span><span class="params">(Integer length)</span> &#123;</span><br><span class="line">       String str=<span class="string">&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;</span>;</span><br><span class="line">       <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">       <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">           <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> random.nextInt(<span class="number">62</span>);</span><br><span class="line">           sb.append(str.charAt(number));</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> sb.toString();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="字符串自增">字符串自增</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 字符串+1方法，该方法将其结尾的整数+1,适用于任何以整数结尾的字符串,不限格式，不限分隔符。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> testStr 要+1的字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> +1后的字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@exception</span> NumberFormatException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">addOne</span><span class="params">(String testStr)</span>&#123;</span><br><span class="line">        String[] strs = testStr.split(<span class="string">&quot;[^0-9]&quot;</span>);<span class="comment">//根据不是数字的字符拆分字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">numStr</span> <span class="operator">=</span> strs[strs.length-<span class="number">1</span>];<span class="comment">//取出最后一组数字</span></span><br><span class="line">        <span class="keyword">if</span>(numStr != <span class="literal">null</span> &amp;&amp; numStr.length()&gt;<span class="number">0</span>)&#123;<span class="comment">//如果最后一组没有数字(也就是不以数字结尾)，抛NumberFormatException异常</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> numStr.length();<span class="comment">//取出字符串的长度</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> Integer.parseInt(numStr)+<span class="number">1</span>;<span class="comment">//将该数字加一</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">added</span> <span class="operator">=</span> String.valueOf(num);</span><br><span class="line">            n = Math.min(n, added.length());</span><br><span class="line">            <span class="comment">//拼接字符串</span></span><br><span class="line">            <span class="keyword">return</span> testStr.subSequence(<span class="number">0</span>, testStr.length()-n)+added;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NumberFormatException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="Mybatis-Plus使用数据库id自增">Mybatis-Plus使用数据库id自增</h3><p>设置全局</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 全局ID生成策略(自增)</span><br><span class="line">mybatis-plus.global-config.db-config.id-type=auto</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>单个配置</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//type = IdType.AUTO id按照数据库里设置的只增规则自己增加</span></span><br><span class="line"><span class="meta">@TableId(value =&quot;id&quot;,type = IdType.AUTO)</span></span><br><span class="line"><span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure><p><strong>“value”</strong>：设置数据库字段值<br><strong>“type”</strong>：设置主键类型、如果<a href="https://so.csdn.net/so/search?q=%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BB%E9%94%AE&amp;spm=1001.2101.3001.7020">数据库主键</a>设置了自增建议使用“AUTO”</p>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Uniapp</title>
      <link href="/posts/bb82e09f.html"/>
      <url>/posts/bb82e09f.html</url>
      
        <content type="html"><![CDATA[<h1>去除横向滚动条</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">::-webkit-scrollbar&#123;</span><br><span class="line">    display: none;</span><br><span class="line">    width: 0 !important;</span><br><span class="line">    height: 0 !important;</span><br><span class="line">    -webkit-appearance: none;</span><br><span class="line">    background: transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>超出两行自行省略</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">text-overflow</span>: -o-ellipsis-lastline;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;//溢出内容隐藏</span><br><span class="line"><span class="attribute">text-overflow</span>: ellipsis;//文本溢出部分用省略号表示</span><br><span class="line"><span class="attribute">display</span>: -webkit-box;//特别显示模式</span><br><span class="line">-webkit-line-clamp: <span class="number">2</span>;//行数</span><br><span class="line">line-clamp: <span class="number">2</span>;</span><br><span class="line">-webkit-box-orient: vertical;//盒子中内容竖直排列</span><br></pre></td></tr></table></figure><h1>栅格布局</h1><p>学习教程 ：<a href="https://www.runoob.com/cssref/css3-pr-justify-content.html">https://www.runoob.com/cssref/css3-pr-justify-content.html</a></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//栅格布局</span><br><span class="line"><span class="attribute">display</span>: flex;</span><br><span class="line"><span class="attribute">flex-direction</span>: column; </span><br><span class="line">justify-items: center; //行内方向（横向）所有元素中线对齐</span><br><span class="line"><span class="attribute">align-items</span>: center; //块级方向（纵向）上的全部栅格元素居中对齐</span><br></pre></td></tr></table></figure><h1>侵权声明</h1><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.description</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#FEF0F0</span>;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">26</span>rpx;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">20</span>rpx;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#F89898</span>;</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">1.8em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>将老数据与新数据进行拼接</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.newsArr=[...this.newsArr,...res.data]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue</title>
      <link href="/posts/f8e09374.html"/>
      <url>/posts/f8e09374.html</url>
      
        <content type="html"><![CDATA[<h1>Vue请求头</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//form表单格式传参</span></span><br><span class="line"><span class="attr">headers</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//json格式传参</span></span><br><span class="line"><span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json;charset=utf-8&#x27;</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><h1>vue与app请求头的区别</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//vue</span><br><span class="line">headers: &#123;</span><br><span class="line">        &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//app</span><br><span class="line"></span><br><span class="line">header: &#123;</span><br><span class="line">      &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h1>缓存</h1><p><a href="https://www.php.cn/faq/486382.html">https://www.php.cn/faq/486382.html</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//存入缓存</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;SupplierName&quot;</span>, <span class="title class_">SupplierName</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取缓存</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;SupplierName&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//刷新页面或关闭页面清除缓存</span></span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 关闭浏览器窗口的时候清空浏览器缓存在localStorage的数据</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;beforeunload&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">clear</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h1>将列表宽度自适应</h1><p><a href="https://www.jb51.net/javascript/292764ymn.htm">https://www.jb51.net/javascript/292764ymn.htm</a></p><h1>将日期格式化</h1><p><a href="https://blog.csdn.net/qq_51447496/article/details/131194739">https://blog.csdn.net/qq_51447496/article/details/131194739</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;!-- 时间戳 --&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123; timestamp &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;br&gt;</span><br><span class="line">      &lt;!-- 格式化后的时间 --&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123; formattedTime &#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        timestamp: &quot;2021-06-15T00:00:00.000+00:00&quot;,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">      formattedTime() &#123;</span><br><span class="line">        const date = new Date(this.timestamp);</span><br><span class="line">        const year = date.getFullYear();</span><br><span class="line">        const month = (&quot;0&quot; + (date.getMonth() + 1)).slice(-2);</span><br><span class="line">        const day = (&quot;0&quot; + date.getDate()).slice(-2);</span><br><span class="line">        const hour = (&quot;0&quot; + date.getHours()).slice(-2);</span><br><span class="line">        const minute = (&quot;0&quot; + date.getMinutes()).slice(-2);</span><br><span class="line">        const second = (&quot;0&quot; + date.getSeconds()).slice(-2);</span><br><span class="line">        return `$&#123;year&#125;-$&#123;month&#125;-$&#123;day&#125; $&#123;hour&#125;:$&#123;minute&#125;:$&#123;second&#125;`;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  </span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">//安装 moment</span><br><span class="line">npm install moment --save</span><br><span class="line">    </span><br><span class="line">//导入 moment</span><br><span class="line">import moment from &#x27;moment&#x27;;  </span><br><span class="line"></span><br><span class="line">//假数据</span><br><span class="line"> data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          items: [</span><br><span class="line">            &#123;name: &quot;item1&quot;, time: &quot;2022-10-01&quot;&#125;,</span><br><span class="line">            &#123;name: &quot;item2&quot;, time: &quot;2022-10-02&quot;&#125;,</span><br><span class="line">            &#123;name: &quot;item3&quot;, time: &quot;2022-10-03&quot;&#125;,</span><br><span class="line">            &#123;name: &quot;item4&quot;, time: &quot;2022-10-04&quot;&#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">//对日期进行格式化</span><br><span class="line"></span><br><span class="line">computed:&#123;</span><br><span class="line">    formattedTime() &#123;</span><br><span class="line">      return this.items.map(item =&gt;&#123;</span><br><span class="line">        item.time = moment(item.time).format(&quot;YYYY-MM-DD HH:mm:ss&quot;);</span><br><span class="line">        return item;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1>vue中forEach循环的使用</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//data为集合 </span><br><span class="line">data.forEach(function(item, index) &#123;</span><br><span class="line">            //item 就是当日按循环到的对象</span><br><span class="line">            //index是循环的索引，从0开始</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//定义班次详细数组</span><br><span class="line">var bcglxiangxiList = new Array();</span><br><span class="line">//定义班次详细对象</span><br><span class="line">var bcxiangxi  = &#123;&#125;;</span><br><span class="line">//循环传递的参数</span><br><span class="line">bcglXiangXiListParam.forEach(element =&gt; &#123;</span><br><span class="line">  bcxiangxi.xh = element.xh;</span><br><span class="line">  bcxiangxi.bcbh = data.bcbh;</span><br><span class="line">  bcxiangxi.dkkssj = element.sjfw[0];</span><br><span class="line">  bcxiangxi.dkjssj = element.sjfw[1];</span><br><span class="line">  bcxiangxi.ts = element.ts;</span><br><span class="line">  bcxiangxi.dkdd = element.dkdd;</span><br><span class="line">  bcxiangxi.zxjxljsj = element.jxsjfw[0];</span><br><span class="line">  bcxiangxi.zdjxljsj = element.jxsjfw[1];</span><br><span class="line">  //将班次详细对象存进班次详细数组</span><br><span class="line">  bcglxiangxiList.push(bcxiangxi);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1>将图片展示在列表上</h1><p>实现多个图片在同个列表中<br><a href="https://www.jb51.net/javascript/295913hed.htm">https://www.jb51.net/javascript/295913hed.htm</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">//模拟数据</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;BillDetails&#x27;,</span><br><span class="line">  computed: &#123;&#125;,</span><br><span class="line">  //使用子组件</span><br><span class="line">  components: &#123;&#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //列表数据</span><br><span class="line">      tableData: [&#123;</span><br><span class="line">        FMaterialId: &quot;&quot;,</span><br><span class="line">        FUnitName: &quot;&quot;,</span><br><span class="line">        url: &quot;&quot;</span><br><span class="line">      &#125;],</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//列表展示</span><br><span class="line"> &lt;el-table :data=&quot;tableData&quot; border stripe :header-cell-class-name=&quot;headerBg&quot;&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;url&quot; label=&quot;图片&quot; width=&quot;140&quot;&gt;</span><br><span class="line">      &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-image :src=&quot;scope.row.url&quot;&gt;</span><br><span class="line">        &lt;/el-image&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;FMaterialId&quot; label=&quot;物料编码&quot; width=&quot;140&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;FMaterialName&quot; label=&quot;物料名称&quot; width=&quot;140&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;FQty&quot; label=&quot;采购数量&quot; width=&quot;140&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;FUnitName&quot; label=&quot;物料单位&quot; width=&quot;140&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;   </span><br></pre></td></tr></table></figure><h1>vue取小数点后几位</h1><p><a href="https://www.python100.com/html/111828.html">https://www.python100.com/html/111828.html</a></p><h1>vue中el-radio值number类型回显问题</h1><p><a href="https://blog.csdn.net/chhpearl/article/details/126403337">https://blog.csdn.net/chhpearl/article/details/126403337</a><br>需要将label修改成 :label</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form-item label=&quot;是否外联&quot; prop=&quot;isFrame&quot;&gt;</span><br><span class="line">        &lt;el-radio-group v-model=&quot;ruleForm.isFrame&quot;&gt;</span><br><span class="line">          &lt;el-radio :label=&quot;0&quot; value=&quot;0&quot;&gt;是&lt;/el-radio&gt;</span><br><span class="line">          &lt;el-radio :label=&quot;1&quot; value=&quot;1&quot;&gt;否&lt;/el-radio&gt;</span><br><span class="line">        &lt;/el-radio-group&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br></pre></td></tr></table></figure><h1>父子组件传值</h1><p><a href="https://blog.csdn.net/qq_45337939/article/details/119763894">https://blog.csdn.net/qq_45337939/article/details/119763894</a><br><a href="https://blog.csdn.net/weixin_46052938/article/details/119249516">https://blog.csdn.net/weixin_46052938/article/details/119249516</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">// 父组件中传递数据</span><br><span class="line">    &lt;template&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">          &lt;span&gt;&#123;&#123; item.title &#125;&#125;&lt;/span&gt;</span><br><span class="line">          &lt;a @click=&quot;showDetail(item.id)&quot;&gt;查看详情&lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          list: [</span><br><span class="line">            &#123; id: 1, title: &#x27;标题1&#x27; &#125;,</span><br><span class="line">            &#123; id: 2, title: &#x27;标题2&#x27; &#125;,</span><br><span class="line">            &#123; id: 3, title: &#x27;标题3&#x27; &#125;,</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        showDetail(id) &#123;</span><br><span class="line">          this.$router.push(&#123;</span><br><span class="line">            path: `/detail/$&#123;id&#125;`</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">             // 子组件中获取数据</span><br><span class="line">    &lt;template&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123; data.title &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;p&gt;&#123;&#123; data.content &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;script&gt;</span><br><span class="line">      export default &#123;</span><br><span class="line">      props: &#123;</span><br><span class="line">        // 父组件传递的数据</span><br><span class="line">        id: &#123;</span><br><span class="line">          type: Number,</span><br><span class="line">          required: true</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          data: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      mounted() &#123;</span><br><span class="line">        // 根据id获取数据</span><br><span class="line">        this.getDataById(this.id).then((res) =&gt; &#123;</span><br><span class="line">          this.data = res.data;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        getDataById(id) &#123;</span><br><span class="line">          // 根据id获取数据的方法</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure><h1>携带参数跳转页面</h1><p>携带参数跳转页面：<a href="https://www.jb51.net/article/281056.htm#_label1">https://www.jb51.net/article/281056.htm#_label1</a><br>vue多种传值方法：<a href="https://blog.csdn.net/pleaseprintf/article/details/131345971">https://blog.csdn.net/pleaseprintf/article/details/131345971</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//返回/前进一页：</span></span><br><span class="line">返回：<span class="built_in">this</span>.$router.go(-<span class="number">1</span>)、<span class="built_in">this</span>.$router.back()。</span><br><span class="line">前进：<span class="built_in">this</span>.$router.go(<span class="number">1</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment">//跳转到其他页</span></span><br><span class="line"><span class="comment">//path，query（） 这个方法地址栏会出现参数，不太安全</span></span><br><span class="line"><span class="comment">//name，params 地址栏没有参数，比较安全</span></span><br><span class="line"><span class="comment">//params只能用name来引入路由,类似于post，在浏览器地址栏中不显示参数，</span></span><br><span class="line"><span class="comment">//而query 要用path引入,似于我们ajax中get传参，在浏览器地址栏中显示参数</span></span><br><span class="line"><span class="built_in">this</span>.$router.push(<span class="string">&quot;/parent&quot;</span>)</span><br><span class="line"><span class="built_in">this</span>.$router.push(&#123;path:<span class="string">&quot;/parent&quot;</span>,query:&#123;name:<span class="string">&quot;ace&quot;</span>&#125;) <span class="comment">//即浏览历史纪录保存着,query是参数。获取参数：this.$route.query.name</span></span><br><span class="line"><span class="built_in">this</span>.$router.push(&#123;path:`/argu/$&#123;name&#125;`&#125;)  <span class="comment">//es6带参数跳转，针对router.js中配置path: &#x27;/argu/:name&#x27;,。获取参数：this.$route.query.name</span></span><br><span class="line"><span class="built_in">this</span>.$router.push(&#123;name:<span class="string">&quot;parent&quot;</span>,params:&#123;name:<span class="string">&quot;ace&quot;</span>&#125;) <span class="comment">//带参数跳转。获取参数：this.$route.params.name</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//基于动态路由的页面（path: &#x27;/argu/:name&#x27;）传值</span></span><br><span class="line">&#123;</span><br><span class="line">    path: <span class="string">&#x27;/argu/:name&#x27;</span>,</span><br><span class="line">    props:<span class="literal">true</span>,             <span class="comment">//表示允许Argu.vue组件中props:&#123;&#125;中接受name参数值，然后可以直接渲染在页面&#123;&#123;name&#125;&#125;</span></span><br><span class="line">    component: () =&gt; <span class="keyword">import</span>( <span class="string">&#x27;./views/argu.vue&#x27;</span> )  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//基于普通页面传参,对象模式传参</span></span><br><span class="line">&#123;</span><br><span class="line">    path: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    props:&#123;</span><br><span class="line">        food:<span class="string">&quot;香蕉&quot;</span></span><br><span class="line">    &#125;,                      <span class="comment">//表示允许about.vue组件中props:&#123;&#125;中接受food参数值，然后可以直接渲染在页面&#123;&#123;food&#125;&#125;</span></span><br><span class="line">    component: () =&gt; <span class="keyword">import</span>( <span class="string">&#x27;./views/argu.vue&#x27;</span>)  </span><br><span class="line">&#125;                  </span><br><span class="line"></span><br><span class="line"><span class="comment">//基于普通页面传参,函数模式传参   </span></span><br><span class="line">&#123;</span><br><span class="line">    path: <span class="string">&#x27;/parent&#x27;</span>,</span><br><span class="line">    props: route=&gt;&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            food:route.query.food</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,                      <span class="comment">//表示允许parent.vue组件中props:&#123;&#125;中接受food参数值，然后可以直接渲染在页面&#123;&#123;food&#125;&#125;</span></span><br><span class="line">    component: () =&gt; <span class="keyword">import</span>( <span class="string">&#x27;./views/argu.vue&#x27;</span>)  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>实现按钮弹窗</h1><p><a href="https://blog.csdn.net/m0_70807708/article/details/126363610">https://blog.csdn.net/m0_70807708/article/details/126363610</a></p><h1>关掉弹出框去除表单检验结果</h1><p><a href="https://www.yashinu.com/chengxu/show-58102.html">https://www.yashinu.com/chengxu/show-58102.html</a><br><a href="https://blog.csdn.net/qq_45030898/article/details/127285454">https://blog.csdn.net/qq_45030898/article/details/127285454</a></p><h1>解决回显后数据不能修改</h1><p><a href="https://blog.csdn.net/qq_45278500/article/details/128217505">https://blog.csdn.net/qq_45278500/article/details/128217505</a></p>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot</title>
      <link href="/posts/6f2612a2.html"/>
      <url>/posts/6f2612a2.html</url>
      
        <content type="html"><![CDATA[<h1>Springboot项目打包部署</h1><p><a href="https://blog.csdn.net/aloner_csdn/article/details/125912966">https://blog.csdn.net/aloner_csdn/article/details/125912966</a></p><h1>解决跨域问题</h1><p><a href="https://blog.csdn.net/m0_71777195/article/details/126830773">https://blog.csdn.net/m0_71777195/article/details/126830773</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.CorsRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">// 一定不要忽略此注解</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CorsConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> &#123;</span><br><span class="line">        registry.addMapping(<span class="string">&quot;/**&quot;</span>) <span class="comment">// 所有接口</span></span><br><span class="line">                .allowCredentials(<span class="literal">true</span>) <span class="comment">// 是否发送 Cookie</span></span><br><span class="line">                .allowedOriginPatterns(<span class="string">&quot;*&quot;</span>) <span class="comment">// 支持域</span></span><br><span class="line">                .allowedMethods(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>, <span class="string">&quot;PUT&quot;</span>, <span class="string">&quot;DELETE&quot;</span>&#125;) <span class="comment">// 支持方法</span></span><br><span class="line">                .allowedHeaders(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">                .exposedHeaders(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>定时任务</h1><p><a href="https://blog.csdn.net/qianlixiaomage/article/details/106599951">https://blog.csdn.net/qianlixiaomage/article/details/106599951</a></p><h2 id="6种实现方式">6种实现方式</h2><p><a href="https://blog.csdn.net/wo541075754/article/details/119405514">https://blog.csdn.net/wo541075754/article/details/119405514</a></p><blockquote><p>cron表达式语法：</p></blockquote><p>[秒]   [分]   [小时]   [日]   [月]   [周]   [年]</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">package com.example.task;</span><br><span class="line"> </span><br><span class="line">import org.springframework.scheduling.annotation.Scheduled;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"> </span><br><span class="line">/**</span><br><span class="line"> * @Description</span><br><span class="line"> * @ClassName Task1</span><br><span class="line"> * @Author User</span><br><span class="line"> * @date 2020.06.07 12:24</span><br><span class="line"> */</span><br><span class="line">@Component</span><br><span class="line">public class Task1 &#123;</span><br><span class="line"> </span><br><span class="line">    @Scheduled(cron =&quot;*/1 * * * * ?&quot;)</span><br><span class="line">    public void sayWord() &#123;</span><br><span class="line">        System.out.println(&quot;world&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>实现邮件的发送</h1><p><a href="https://www.cnblogs.com/kire-cat/p/15350366.html">https://www.cnblogs.com/kire-cat/p/15350366.html</a><br><a href="https://blog.csdn.net/leilei1366615/article/details/104868250">https://blog.csdn.net/leilei1366615/article/details/104868250</a></p><h1>实现短信的发送</h1><p><a href="https://blog.csdn.net/qq_34383510/article/details/115939788?spm=1001.2014.3001.5501">https://blog.csdn.net/qq_34383510/article/details/115939788?spm=1001.2014.3001.5501</a><br><a href="https://blog.csdn.net/qq_41538097/article/details/118767236">https://blog.csdn.net/qq_41538097/article/details/118767236</a></p><h1>整合RabbitMq</h1><p><a href="https://blog.csdn.net/qq_35387940/article/details/100514134">https://blog.csdn.net/qq_35387940/article/details/100514134</a></p><h1>实现文件上传下载</h1><p><a href="https://juejin.cn/post/6917586720309379079">https://juejin.cn/post/6917586720309379079</a></p><h1>自动打开浏览器网页</h1><p><a href="https://blog.csdn.net/qingzhid/article/details/124821029">https://blog.csdn.net/qingzhid/article/details/124821029</a></p><h1>实现验证码</h1><p><a href="https://blog.csdn.net/weixin_49141728/article/details/119595857">https://blog.csdn.net/weixin_49141728/article/details/119595857</a></p><h1>搭建springboot+nacos+docker+Jenkins持续管理项目</h1><p><a href="https://blog.csdn.net/qq_32438679/article/details/110531010">https://blog.csdn.net/qq_32438679/article/details/110531010</a><br><a href="https://blog.csdn.net/github_38592071/article/details/126434220">https://blog.csdn.net/github_38592071/article/details/126434220</a></p><h1>EasyExcel实现excel的导入与导出</h1><p><a href="https://blog.csdn.net/m0_51963973/article/details/131054664">https://blog.csdn.net/m0_51963973/article/details/131054664</a></p><p><a href="https://blog.csdn.net/sunnyzyq/article/details/121994504">https://blog.csdn.net/sunnyzyq/article/details/121994504</a></p>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PowerShell配置</title>
      <link href="/posts/34741b2.html"/>
      <url>/posts/34741b2.html</url>
      
        <content type="html"><![CDATA[<p>启用 Windows PowerShell功能<br><a href="https://zhidao.baidu.com/question/820055000337026812.html">https://zhidao.baidu.com/question/820055000337026812.html</a></p><p>将PowerShell设置到鼠标右键<br><a href="https://www.xitongzhijia.net/xtjc/20170526/98756.html">https://www.xitongzhijia.net/xtjc/20170526/98756.html</a></p><p>设置自己的<br><a href="https://blog.51cto.com/xfxuezhang/5857941">https://blog.51cto.com/xfxuezhang/5857941</a></p><p>使用win+R，然后键入“regedit”，从而对注册表编辑器进行Dpen操作。按Enter键进入Oper注册表编辑器，并允许它对您的PC进行更改<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081553906.png" alt="image.png"><br>在注册表编辑器中，找到如何地址</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">计算机\HKEY_CLASSES_ROOT\Directory\Background\shell</span><br></pre></td></tr></table></figure><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081553902.png" alt="image.png"><br>接下来，您将在shell密钥中创建一个新密钥。右键单击shell键并选择New&gt;键。将新键命名为“powershellmenu’”。我们将为新的key Powershel菜单命名，因为在Windo<br>ws8和Windows1O中（正如您在我们的屏幕截图中看到的），Powershell keyi已经存在，可以提供其他功能<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081553475.png" alt="image.png"><br>现在，您将更改新powershellmenu键中的（默认）值。选择powershellmenus键后，双击（默认）值打开它的propertiesi窗口。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081553490.webp" alt=""><br>在properties窗口中，将’value data&quot;框中的值设置为“PowerShell”，然后单击“OK”，这将为命令提供将出现在上下文菜单上的名称,<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081553951.png" alt="image.png"><br>新建一个Icon字符串<br>并输入如下代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PowerShell.exe</span><br></pre></td></tr></table></figure><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081553177.png" alt="image.png"><br>天论悠是否采取了创建扩展值的可选步鹭，流程的其余部分都是相同的。接下来要要oWeshel menu捷中创建一个新键，有键单击0Wershelmeu建并选择NeW<br>键。将新键命名为“command”。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081553831.png" alt="image.png"><br>(默认)值指定在上下文菜单上选择该选项时将运行的实际命令。在“值数据”框中键入以下文本，然后单击“确定”。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe</span><br></pre></td></tr></table></figure><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081553265.png" alt="image.png"></p>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatis与Mybatis-plus</title>
      <link href="/posts/3ca8521c.html"/>
      <url>/posts/3ca8521c.html</url>
      
        <content type="html"><![CDATA[<h1>代码生成器（3.5.1+）</h1><p><a href="https://blog.csdn.net/qq_42682745/article/details/120626012">https://blog.csdn.net/qq_42682745/article/details/120626012</a></p><h1>Mybatis常用注解</h1><p><a href="https://www.cnblogs.com/tianweichang/p/14172390.html">https://www.cnblogs.com/tianweichang/p/14172390.html</a></p><h1>MybatisX插件的使用</h1><p><a href="https://www.jb51.net/program/287643222.htm">https://www.jb51.net/program/287643222.htm</a></p><h1>MyBatis中foreach的用法</h1><p><a href="https://blog.csdn.net/weixin_38192427/article/details/121443045">https://blog.csdn.net/weixin_38192427/article/details/121443045</a></p><h1>MyBatis动态SQL的拼接</h1><p><a href="https://blog.csdn.net/qq_55851764/article/details/130813506">https://blog.csdn.net/qq_55851764/article/details/130813506</a></p><h1>Mybatis-plus基本用法</h1><p><a href="https://www.cnblogs.com/zys2019/p/12904848.html">https://www.cnblogs.com/zys2019/p/12904848.html</a></p><h1>MyBatis-Plus的yml配置方式</h1><p><a href="https://blog.csdn.net/qq_37726813/article/details/127951567">https://blog.csdn.net/qq_37726813/article/details/127951567</a></p>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git系列</title>
      <link href="/posts/2f34a342.html"/>
      <url>/posts/2f34a342.html</url>
      
        <content type="html"><![CDATA[<h1>git安装</h1><p><a href="https://www.cnblogs.com/xiuxingzhe/p/9300905.html">https://www.cnblogs.com/xiuxingzhe/p/9300905.html</a></p><h1>gitlib配置</h1><p><a href="https://www.cnblogs.com/zwq-/p/11045839.html">https://www.cnblogs.com/zwq-/p/11045839.html</a></p><h1>idea中git代码回滚</h1><p><a href="https://blog.csdn.net/xiaowanzi_zj/article/details/121369164">https://blog.csdn.net/xiaowanzi_zj/article/details/121369164</a></p><h1>IDEA 使用Git回滚到上一个版本</h1><p><a href="https://blog.csdn.net/chuanchengdabing/article/details/121560568">https://blog.csdn.net/chuanchengdabing/article/details/121560568</a></p><h1>IDEA中Git暂存代码的使用</h1><p><a href="https://blog.csdn.net/weixin_45627031/article/details/124339745">https://blog.csdn.net/weixin_45627031/article/details/124339745</a></p>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VSCode插件，TODO标记</title>
      <link href="/posts/3f2135d9.html"/>
      <url>/posts/3f2135d9.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://blog.csdn.net/qq_46178261/article/details/122431567">https://blog.csdn.net/qq_46178261/article/details/122431567</a></p><h1>VSCode插件推荐： Todo Tree、TODO Height</h1><p>在商店中搜索并安装：<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081552136.png" alt=""><br>使用：默认情况下TODO: ，FIXME: 为高亮提醒的关键字，还可以自定义关键字<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081552724.png" alt=""><br>自定义关键字：在vscode配置文件中设置<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081552627.png" alt=""><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081552836.png" alt=""></p><ol start="4"><li>点击下面这个树一样的标记，就可以找到todo标记过的所有文件，点击就可以直接跳转到被标记的文件啦<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081552702.png" alt=""></li></ol>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VSCode快捷键</title>
      <link href="/posts/1cfdae89.html"/>
      <url>/posts/1cfdae89.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://www.ujiuye.com/wenda/2021/70924.html">https://www.ujiuye.com/wenda/2021/70924.html</a><br>文件操作：</p><ul><li>新建文件：Ctrl + N</li><li>打开文件：Ctrl + O</li><li>保存文件：Ctrl + S</li><li>另存为：Ctrl + Shift + S</li><li>关闭文件：Ctrl + W</li><li>关闭所有文件：Ctrl + K, Ctrl + W</li><li>撤销：Ctrl + Z</li><li>重做：Ctrl + Y</li><li>查找：Ctrl + F</li><li>查找下一个：F3 或者 Ctrl + G</li><li>查找上一个：Shift + F3 或者 Ctrl + Shift + G</li></ul><p>光标和选择操作：</p><ul><li>移动光标：使用方向键或者使用鼠标点击</li><li>选中文本：按住Shift + 方向键或者使用鼠标拖拽</li><li>选中整行：Ctrl + Shift + 方向键</li><li>光标跳转到行首：Home</li><li>光标跳转到行尾：End</li><li>光标跳转到文件开始：Ctrl + Home</li><li>光标跳转到文件末尾：Ctrl + End</li><li>多行光标（多光标）：Ctrl + Alt + 方向键（上下左右）</li></ul><p>编辑操作：</p><ul><li>复制：Ctrl + C</li><li>剪切：Ctrl + X</li><li>粘贴：Ctrl + V</li><li>全选：Ctrl + A</li><li>删除当前行：Ctrl + Shift + K</li><li>注释当前行：Ctrl + /</li><li>注释多行：Ctrl + Shift + /</li></ul><p>编辑器操作：</p><ul><li>切换侧边栏：Ctrl + B</li><li>切换终端：Ctrl + `</li><li>切换全屏：F11</li><li>放大字体：Ctrl + +</li><li>缩小字体：Ctrl + -</li><li>恢复默认字体大小：Ctrl + 0</li></ul><p>调试操作：</p><ul><li>启动/停止调试：F5</li><li>继续：F5</li><li>单步执行：F10</li><li>单步进入：F11</li><li>单步跳过：Shift + F11</li><li>停止调试：Shift + F5</li></ul>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VSCode插件</title>
      <link href="/posts/5d8d5236.html"/>
      <url>/posts/5d8d5236.html</url>
      
        <content type="html"><![CDATA[<h1>插件推荐</h1><p><a href="https://mp.weixin.qq.com/s/1PkWPApvn5uWJl_cdzcoTA">https://mp.weixin.qq.com/s/1PkWPApvn5uWJl_cdzcoTA</a><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081548340.png" alt="image.png"><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081549041.png" alt="image.png"><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081549304.png" alt="image.png"><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081549016.png" alt="image.png"></p><p>本文不做任何编辑器的比较，只是我本人日常使用 vscode 进行开发，并且比较喜欢折腾 vscode ，会到处找这一些好玩的插件，于是越攒越多，今天给大家推荐一下我收藏的 <strong>60</strong> 多个 vscode 插件，据说插件装太多，编辑器会变卡，可能是我的电脑配置还顶得住，目前并没有感觉到卡卡的。<br>接下来我会将会以 <strong>优化外观</strong>，<strong>功能扩展</strong>，<strong>提升编码效率</strong>，<strong>代码格式化</strong>，<strong>其它插件</strong> 几个分类来进行介绍。<br>注：本文只涉及插件的基本使用，也就是让你知道存在这样一种插件，以及大致了解这个插件可以做什么事，部分插件的详细配置过于复杂，有需要的小伙伴请自行冲浪。根据每个人电脑，vscode 配置，以及插件的不同，部分插件可能在你电脑上不会生效。文中提到的快捷键都是 windows 下的，其他操作系统的快捷键请自行了解。<br>好马用好鞍，好看的编辑器外观，可以提升程序员的编码体验，可以让开发人员的心情变好，让写 bug 更有动力。</p><h2 id="Better-Comments"><strong>Better Comments</strong></h2><p>一款美化注释的插件，可以根据不同种类的注释，显示不同的颜色，一目了然。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081549813.png" alt="">安装完以后，插件会默认自带几种颜色的注释，还可以通过 vscode 的配置文件自定义任何颜色，类型的注释。具体的配置方法我给你们找好了。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081549744.png" alt=""><br><strong>Highlight Matching Tag</strong><br>这也是一个找对象的插件，找的是标签的对象，看我上一个插件的演示图片中，当我点击一下 html 标签，配对的标签就会出现下划线来指示你谁和谁是一对。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081549336.png" alt=""><br><strong>Chinese</strong><br>让你的 vscode 变成中文，像我这种英语弱鸡才会用，大佬们略过。为什么要放在优化外观的分类里，因为我觉得中文比英文好看🧐🧐，安装完重启就行了。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081549601.png" alt=""><br><strong>Community Material Theme / Material Theme</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081549436.png" alt=""><br>修改编辑器的主题，内置很多种，我用的是 Material Theme Palenight High Contrast 这一款。安装完了以后点击 <strong>设置颜色主题</strong> 就可以了。<br><strong>Image preview</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081549193.png" alt=""><br><strong>预览代码中图片的引用，鼠标移上去就会有小窗展示图片。</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081549475.png" alt=""><br><strong>VSCode Great Icons</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081549367.png" alt=""><br>另一个修改文件图标的插件，我用的就是这个，相对于 Material Theme Icons 我更喜欢这个的风格，萝卜青菜可有所爱，大家各取所需。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081549977.png" alt=""><br>编辑器自身的功能还是有限的，为了应付日常开发，不得不安装很多其他的软件进行辅助，不过也可以通过插件的方式引入一些常用的辅助软件，它们的功能可能没有原生的强大，但是基本上已经够用，并且是真的很方便。</p><h2 id="Code-Runner"><strong>Code Runner</strong></h2><p>运行代码，可以在编辑器中查看结果，前端同学可以在控制台看 console.log ，还有很多其他玩法，具体使用参考此篇文章<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550702.png" alt=""><br><strong>Code Spell Checker</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550279.png" alt=""><br>检查代码中单词拼写是否正确，当单词不正常的时候，就会在下方出现波浪线进行提示，还可以自定义词典，忽略某个单词的检查等，更多用法参考下面链接。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550013.png" alt=""><br><strong>Debugger for Chrome</strong><br>这款插件是专门为前端调试开发的，很方便调试，跟谷歌的控制台是一样的功能，安装以后，无需打开浏览器的控制台就能进行断点调试。对应的还有 Debugger for Firefox，Debugger for Microsoft Edge等，其他的我没用过，大家按需安装即可，使用方法应该都大同小异。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550360.png" alt=""><br>安装完以后，左边会出现一个调试的小图标，打开以后再点击上方小齿轮进行配置。根目录下会自动新建 .vscode 文件夹以及 launch.json 文件，不用管。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550405.png" alt=""><br>配置文件的具体内容和使用方法可以看这一篇，很详细。</p><h2 id="Git-History"><strong>Git History</strong></h2><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550698.png" alt=""><br>右键单击文件选择 Git：View File History 来以列表的形式查看所有的提交记录。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550516.png" alt=""><br><strong>GitLens — Git supercharged</strong><br>这个也是跟 git 相关的插件，功能比上一个要强大一些。上一个插件的演示图片中可以看到我的每一行代码都有上一次 git 提交的记录，那就是这个插件的功劳。<br>还有其他很多的操作，详情查阅下方链接。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550683.png" alt=""><br><strong>Local History</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550388.png" alt=""><br>这个就很强了，本地代码的修改记录。通常我们写错代码了可以撤销，但是撤销完以后再修改，想要取消撤销就难了。有了这个插件直接看代码的修改记录。还可以跟当前版本进行对比，神器。<br>安装完以后，项目根目录下会自动生成 .history 的文件夹。代码的修改记录就会放在这里面。记得添加.gitignore，不然每次提交代码的时候就要遭重了。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550307.png" alt=""><br><strong>open in browser</strong><br>在浏览器中打开 html 文件。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550733.png" alt=""><br>安装完以后在目标的 html 文件上右击，选择 open in default browser 即可打开使用浏览器打开文件。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550156.png" alt=""><br><strong>Project Manager</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550637.png" alt=""><br>项目管理器，适用于经常切换项目的大佬，虽然我平时接触的项目也不多，不过自己搞着玩的工程也不少。有了这个插件，就不用新窗口打开项目了。<br>安装完以后左侧列表会出现一个 <strong>文件夹</strong> 的小图标，点开以后就可以进行项目管理了，通常都是操作projects.json 这个文件，点击项目名字就可以切换了，也可以新窗口打开。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550185.png" alt=""></p><h2 id="Auto-Import"><strong>Auto Import</strong></h2><p>Typescript 自动导入，其实现在很多的插件基本都内置了这种功能，已经不是必须品了。可能是因为我装了各种奇奇怪怪的插件，我现在想导入什么东西的时候，一大堆的提示，随便选一个都能导进来😂<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550513.png" alt=""><br><strong>Auto Rename Tag</strong><br>自动修改标签名，重命名一个开始标签时，自动重命名配对的结束标签。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081550790.png" alt=""><br>一下子就对应的全修改掉了，是不是很 nice。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081551400.png" alt=""><br><strong>change-case</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081551124.png" alt=""><br>快速切换变量格式，什么大坨峰，小驼峰，下划线等等，它里面有很多类型。使用方法按 F1（windows）  ，输入对应命令即可。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081551864.png" alt=""><br><strong>CSS Peek</strong><br>可以通过点击类名迅速定位到样式的定义。不知道是不是我自己的原因，有的时候会失效，需要点击 <strong>禁用</strong> ，再点击 <strong>启用</strong> 就好使了。具体使用方法参考链接<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081551271.png" alt=""><br><strong>Path Intellisense</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081551809.png" alt=""><br>引入文件的时候，路径自动补全。</p><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081551326.png" alt=""><br><strong>Npm Intellisense</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081551437.png" alt=""><br>导入 npm 包的时候，智能提示。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081551443.png" alt=""><br><strong>Prettier - Code formatter</strong><br>代码格式化插件，这个插件通常搭配 eslint 使用，也可以单独使用。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081551447.png" alt=""><br>在根目录下新建 .prettierrc.json 文件，在里面书写自己想要的格式就行了。更具体的配置内容查看链接<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081551572.png" alt=""><br><strong>vetur / volar</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081551650.png" alt=""><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081551780.png" alt=""><br>使用 vue 进行开发的小伙伴都少不了跟它们打交道，volar 是跟 vue3 更配的，功能也能多，由于这两个插件功能过于庞大，就不展开讲了，感兴趣的自行搜索使用。<br>除了功能性插件，当然还有很多花里胡哨的玩意。下面给大家介绍几款可能对开发影响不大，但是非常好玩的插件。</p>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tomcat</title>
      <link href="/posts/95ecbeba.html"/>
      <url>/posts/95ecbeba.html</url>
      
        <content type="html"><![CDATA[<h1>tomcat修改系统服务名称</h1><p>参考：<a href="https://blog.csdn.net/good_good_xiu/article/details/115500442">https://blog.csdn.net/good_good_xiu/article/details/115500442</a></p>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL修改字符集</title>
      <link href="/posts/307a340f.html"/>
      <url>/posts/307a340f.html</url>
      
        <content type="html"><![CDATA[<h1>utf8改为utf8mb4</h1><p>要将MySQL数据库中字段的字符集从utf8改为utf8mb4，您需要执行以下步骤：</p><ol><li>备份数据库：在进行任何更改之前，始终建议备份数据库以防止数据丢失或出现意外情况。</li><li>修改表结构：使用ALTER TABLE语句修改表结构，将字段的字符集从utf8更改为utf8mb4。您可以逐个修改每个字段，也可以使用ALTER TABLE … CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci语句批量修改。</li></ol><p>例如，如果您有一个名为my_table的表，其中包含一个名为my_column的字段，您可以执行以下语句将其字符集更改为utf8mb4：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> my_table MODIFY my_column <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci;</span><br></pre></td></tr></table></figure><p>如果要批量修改多个字段，可以使用以下语句：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> my_table <span class="keyword">CONVERT</span> <span class="keyword">TO</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci;</span><br></pre></td></tr></table></figure><p>请根据您的表结构和需求进行适当的更改。<br>3. 修改数据库和表的默认字符集：使用ALTER DATABASE和ALTER TABLE语句将数据库和表的默认字符集更改为utf8mb4。<br>例如，如果您要将名为my_database的数据库的默认字符集更改为utf8mb4，可以执行以下语句：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> DATABASE my_database <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci;</span><br></pre></td></tr></table></figure><p>如果要更改表的默认字符集，可以执行以下语句：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> my_table ENGINE<span class="operator">=</span>InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci;</span><br></pre></td></tr></table></figure><p>请注意，根据您的存储引擎和表类型，可能需要使用不同的语句。<br>4. 验证更改：在执行所有更改之后，请验证字符集是否已成功更改为utf8mb4。您可以使用以下查询检查表和字段的字符集：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> my_table;  </span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">FULL</span> COLUMNS <span class="keyword">FROM</span> my_table;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL适配Oracle</title>
      <link href="/posts/e2f8bbff.html"/>
      <url>/posts/e2f8bbff.html</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  &lt;p&gt; mysql迁移oracle 测试工具类 &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> :  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : zwl  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2020/1/08 10:10</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySQLToOracleTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">ORACLE_SQL</span> <span class="operator">=</span> <span class="string">&quot;    &lt;!-- ====================================== ↓↓↓↓↓↓ oracle ↓↓↓↓↓↓  ====================================== --&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span> <span class="comment">// 替换项目中的sql语句</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSQL</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + <span class="string">&quot;\\src\\main\\java\\com\\zhengqing\\xxx&quot;</span>; <span class="comment">// TODO 这里替换为自己的项目路径</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">        HashMap&lt;Object, Object&gt; fileMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        getAllFileByRecursion(fileMap, file);</span><br><span class="line"></span><br><span class="line">        fileMap.forEach((key, value) -&gt; &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">fileXmlName</span> <span class="operator">=</span> (String) key;</span><br><span class="line">            <span class="type">File</span> <span class="variable">fileXml</span> <span class="operator">=</span> (File) value;</span><br><span class="line">            <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> fileXml.getPath();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (fileXmlName.equals(<span class="string">&quot;Test.xml&quot;</span>)) &#123;</span><br><span class="line">                System.out.println(filePath);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">// 1、加入 databaseId=&quot;mysql&quot;</span></span><br><span class="line">                    addMysql(filePath);</span><br><span class="line">                    <span class="comment">// 2、复制一份oracle的sql</span></span><br><span class="line">                    <span class="keyword">if</span> (!checkHasOracle(filePath)) &#123;</span><br><span class="line">                        copyMysqlToOracle(filePath);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// 3、加入 databaseId=&quot;oracle&quot;</span></span><br><span class="line">                    addOracle(filePath);</span><br><span class="line">                    <span class="comment">// 4、替换mybatis `xxxMapper.xml` 中的sql语句</span></span><br><span class="line">                    repalceSQL(filePath);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(fileMap);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 替换mybatis `xxxMapper.xml` 中的sql语句</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">repalceSQL</span><span class="params">(String path)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(file);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufIn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(in);</span><br><span class="line">        <span class="comment">// 内存流, 作为临时流</span></span><br><span class="line">        <span class="type">CharArrayWriter</span> <span class="variable">tempStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharArrayWriter</span>();</span><br><span class="line">        <span class="comment">// 替换</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">rowOracle</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> ((line = bufIn.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            row++;</span><br><span class="line">            <span class="keyword">if</span> (line.contains(ORACLE_SQL)) &#123;</span><br><span class="line">                rowOracle = row;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (rowOracle != <span class="number">0</span> &amp;&amp; row &gt; rowOracle) &#123;</span><br><span class="line">                <span class="comment">// ① 替换 `LIMIT` -&gt; `AND ROWNUM &amp;lt;= 1` TODO 【注： 部分包含`ORDER BY` 关键字，需单独处理】</span></span><br><span class="line">                <span class="keyword">if</span> (line.contains(<span class="string">&quot;limit&quot;</span>) || line.contains(<span class="string">&quot;LIMIT&quot;</span>)) &#123;</span><br><span class="line">                    System.out.println();</span><br><span class="line">                    System.out.println(<span class="string">&quot; ==============================↓↓↓↓↓↓  copy分页所需 (&quot;</span> + row + <span class="string">&quot;)  ↓↓↓↓↓↓===================================== &quot;</span>);</span><br><span class="line">                    System.out.println(<span class="string">&quot;SELECT * FROM ( SELECT TMP.*, ROWNUM ROW_ID FROM (&quot;</span>);</span><br><span class="line">                    System.out.println();</span><br><span class="line">                    System.out.println(<span class="string">&quot;) TMP  WHERE ROWNUM &amp;lt;=1) WHERE ROW_ID &gt; 0&quot;</span>);</span><br><span class="line">                    System.out.println();</span><br><span class="line">                &#125;</span><br><span class="line">                line = StringUtils.replace(line, <span class="string">&quot;limit 1&quot;</span>, <span class="string">&quot;AND ROWNUM &amp;lt;= 1&quot;</span>);</span><br><span class="line">                line = StringUtils.replace(line, <span class="string">&quot;LIMIT 1&quot;</span>, <span class="string">&quot;AND ROWNUM &amp;lt;= 1&quot;</span>);</span><br><span class="line">                line = StringUtils.replace(line, <span class="string">&quot;limit 0,1&quot;</span>, <span class="string">&quot;AND ROWNUM &amp;lt;= 1&quot;</span>);</span><br><span class="line">                line = StringUtils.replace(line, <span class="string">&quot;LIMIT 0,1&quot;</span>, <span class="string">&quot;AND ROWNUM &amp;lt;= 1&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ② oracle中不能使用“ ` ”符号</span></span><br><span class="line">                line = StringUtils.replace(line, <span class="string">&quot;`&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ③ CONCAT(&#x27;%&#x27;, #&#123;name&#125;, &#x27;%&#x27;)  -&gt;     &#x27;%&#x27;||#&#123;name&#125;||&#x27;%&#x27; （Oracle中concat函数只能放两个参数）</span></span><br><span class="line">                <span class="keyword">if</span> (line.contains(<span class="string">&quot;concat&quot;</span>)) &#123;</span><br><span class="line"><span class="comment">//                    String newLine = line.substring(line.indexOf(&quot;concat(&quot;) + 7, line.lastIndexOf(&quot;&#x27;%&#x27;)&quot;) + 3);</span></span><br><span class="line">                    line = line.replaceAll(<span class="string">&quot;,&quot;</span>, <span class="string">&quot; || &quot;</span>);</span><br><span class="line">                    line = line.replaceAll(<span class="string">&quot;concat&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (line.contains(<span class="string">&quot;CONCAT&quot;</span>)) &#123;</span><br><span class="line"><span class="comment">//                    String newLine = line.substring(line.indexOf(&quot;CONCAT(&quot;) + 7, line.lastIndexOf(&quot;&#x27;%&#x27;)&quot;) + 3);</span></span><br><span class="line">                    line = line.replaceAll(<span class="string">&quot;,&quot;</span>, <span class="string">&quot; || &quot;</span>);</span><br><span class="line">                    line = line.replaceAll(<span class="string">&quot;CONCAT&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ④ `UNIX_TIMESTAMP` -&gt; `ORACLE_TO_UNIX` date类型时间转10位时间戳</span></span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;UNIX_TIMESTAMP&quot;</span>, <span class="string">&quot;ORACLE_TO_UNIX&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ⑤ 部分关键字需加上双引号 TODO 【注： 字段名大写，映射的别名需保存原本小写！】 `level -&gt; &quot;LEVEL&quot;`  `user -&gt; &quot;USER&quot;`      `number -&gt; &quot;NUMBER&quot;`  `desc -&gt; &quot;DESC&quot;`</span></span><br><span class="line">                List&lt;String&gt; keywordList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(Arrays.asList(<span class="string">&quot;level&quot;</span>, <span class="string">&quot;user&quot;</span>, <span class="string">&quot;number&quot;</span>));</span><br><span class="line">                <span class="keyword">if</span> (!line.contains(<span class="string">&quot;test=&quot;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (String e : keywordList) &#123;</span><br><span class="line">                        <span class="comment">// StringUtils.swapCase(e) : 大小写互换</span></span><br><span class="line">                        line = line.replaceAll(<span class="string">&quot; &quot;</span> + e + <span class="string">&quot; &quot;</span>, <span class="string">&quot; \&quot;&quot;</span> + StringUtils.swapCase(e) + <span class="string">&quot;\&quot; &quot;</span>);</span><br><span class="line">                        line = line.replaceAll(<span class="string">&quot;.&quot;</span> + e + <span class="string">&quot; &quot;</span>, <span class="string">&quot;\\.\&quot;&quot;</span> + StringUtils.swapCase(e) + <span class="string">&quot;\&quot; &quot;</span>);</span><br><span class="line">                        <span class="keyword">if</span> (line.endsWith(e) || line.endsWith(e + <span class="string">&quot;,&quot;</span>)) &#123;</span><br><span class="line">                            line = line.replaceAll(e, <span class="string">&quot;\&quot;&quot;</span> + StringUtils.swapCase(e) + <span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (line.endsWith(<span class="string">&quot; date&quot;</span>) || line.endsWith(<span class="string">&quot; date,&quot;</span>) || line.endsWith(<span class="string">&quot; &#x27;date&#x27;&quot;</span>) || line.endsWith(<span class="string">&quot; &#x27;DATE&#x27;&quot;</span>) || line.endsWith(<span class="string">&quot;DATE&quot;</span>)) &#123;</span><br><span class="line">                    line = line.replaceAll(<span class="string">&quot; date&quot;</span>, <span class="string">&quot; \&quot;date\&quot;&quot;</span>);</span><br><span class="line">                    line = line.replaceAll(<span class="string">&quot; date,&quot;</span>, <span class="string">&quot; \&quot;date,\&quot;&quot;</span>);</span><br><span class="line">                    line = line.replaceAll(<span class="string">&quot; &#x27;date&#x27;&quot;</span>, <span class="string">&quot; \&quot;date\&quot;&quot;</span>);</span><br><span class="line">                    line = line.replaceAll(<span class="string">&quot; &#x27;DATE&#x27;&quot;</span>, <span class="string">&quot; \&quot;date\&quot;&quot;</span>);</span><br><span class="line">                    line = line.replaceAll(<span class="string">&quot; DATE&quot;</span>, <span class="string">&quot; \&quot;date\&quot;&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot; date &quot;</span>, <span class="string">&quot; \&quot;date\&quot; &quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot; DATE &quot;</span>, <span class="string">&quot; \&quot;date\&quot; &quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ⑥ `IFNULL` -&gt; `NVL`</span></span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;IFNULL&quot;</span>, <span class="string">&quot;NVL&quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;ifnull&quot;</span>, <span class="string">&quot;NVL&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ⑦ 时间 `str_to_date` -&gt; `to_date`     `date_format` -&gt; `to_char`</span></span><br><span class="line">                <span class="comment">// `%Y-%m-%d`  -&gt; `yyyy-MM-dd`    `%Y-%m` -&gt; `yyyy-MM`</span></span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;str_to_date&quot;</span>, <span class="string">&quot;TO_DATE&quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;STR_TO_DATE&quot;</span>, <span class="string">&quot;TO_DATE&quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;date_format&quot;</span>, <span class="string">&quot;TO_CHAR&quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;DATE_FORMAT&quot;</span>, <span class="string">&quot;TO_CHAR&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 这里注意替换顺序问题，最长的应该放最前面！！！</span></span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;%Y-%m-%d %H:%i:%S&quot;</span>, <span class="string">&quot;yyyy-MM-dd HH24:mi:ss&quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;%Y-%m-%d %H:%i:%s&quot;</span>, <span class="string">&quot;yyyy-MM-dd HH24:mi:ss&quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;%Y-%m-%d %H:%i&quot;</span>, <span class="string">&quot;yyyy-MM-dd HH24:mi&quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;%Y-%m-%d %H&quot;</span>, <span class="string">&quot;yyyy-MM-dd HH24&quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;%Y-%m-%d %h&quot;</span>, <span class="string">&quot;yyyy-MM-dd HH&quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;%Y-%m-%d&quot;</span>, <span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;%Y-%m&quot;</span>, <span class="string">&quot;yyyy-MM&quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;%Y&quot;</span>, <span class="string">&quot;yyyy&quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;%H&quot;</span>, <span class="string">&quot;HH24&quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;%k&quot;</span>, <span class="string">&quot;HH24&quot;</span>);</span><br><span class="line"></span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;now\\(\\)&quot;</span>, <span class="string">&quot;(SELECT SYSDATE + 8/24 FROM DUAL)&quot;</span>);</span><br><span class="line">                line = line.replaceAll(<span class="string">&quot;NOW\\(\\)&quot;</span>, <span class="string">&quot;(SELECT SYSDATE + 8/24 FROM DUAL)&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ⑧ ...</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">// 需手动处理的SQL 【 group by | 批量插入 | ... 】</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 将该行写入内存</span></span><br><span class="line">            tempStream.write(line);</span><br><span class="line">            <span class="comment">// 添加换行符</span></span><br><span class="line">            tempStream.append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 关闭 输入流</span></span><br><span class="line">        bufIn.close();</span><br><span class="line">        <span class="comment">// 将内存中的流 写入 文件</span></span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(file);</span><br><span class="line">        tempStream.writeTo(out);</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加入 databaseId=&quot;mysql&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">addMysql</span><span class="params">(String path)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(file);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufIn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(in);</span><br><span class="line">        <span class="comment">// 内存流, 作为临时流</span></span><br><span class="line">        <span class="type">CharArrayWriter</span> <span class="variable">tempStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharArrayWriter</span>();</span><br><span class="line">        <span class="comment">// 替换</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">while</span> ((line = bufIn.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((line.contains(<span class="string">&quot;&lt;select&quot;</span>) || line.contains(<span class="string">&quot;&lt;update&quot;</span>) || line.contains(<span class="string">&quot;&lt;insert&quot;</span>) || line.contains(<span class="string">&quot;&lt;delete&quot;</span>)) &amp;&amp; !line.contains(<span class="string">&quot;databaseId&quot;</span>)) &#123;</span><br><span class="line">                <span class="keyword">if</span> (line.endsWith(<span class="string">&quot;&gt;&quot;</span>)) &#123;</span><br><span class="line">                    line = line.replaceAll(<span class="string">&quot;&gt;&quot;</span>, <span class="string">&quot; databaseId=\&quot;mysql\&quot;&gt;&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    line = line + <span class="string">&quot; databaseId=\&quot;mysql\&quot;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 将该行写入内存</span></span><br><span class="line">            tempStream.write(line);</span><br><span class="line">            <span class="comment">// 添加换行符</span></span><br><span class="line">            tempStream.append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 关闭 输入流</span></span><br><span class="line">        bufIn.close();</span><br><span class="line">        <span class="comment">// 将内存中的流 写入 文件</span></span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(file);</span><br><span class="line">        tempStream.writeTo(out);</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加入 databaseId=&quot;oracle&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">addOracle</span><span class="params">(String path)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(file);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufIn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(in);</span><br><span class="line">        <span class="comment">// 内存流, 作为临时流</span></span><br><span class="line">        <span class="type">CharArrayWriter</span> <span class="variable">tempStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharArrayWriter</span>();</span><br><span class="line">        HashSet&lt;String&gt; lineSet = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 替换</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">while</span> ((line = bufIn.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (line.contains(<span class="string">&quot;databaseId=\&quot;mysql\&quot;&quot;</span>)) &#123;</span><br><span class="line">                <span class="keyword">if</span> (lineSet.contains(line)) &#123;</span><br><span class="line">                    line = line.replaceAll(<span class="string">&quot;databaseId=\&quot;mysql\&quot;&quot;</span>, <span class="string">&quot;databaseId=\&quot;oracle\&quot;&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                lineSet.add(line);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 将该行写入内存</span></span><br><span class="line">            tempStream.write(line);</span><br><span class="line">            <span class="comment">// 添加换行符</span></span><br><span class="line">            tempStream.append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 关闭 输入流</span></span><br><span class="line">        bufIn.close();</span><br><span class="line">        <span class="comment">// 将内存中的流 写入 文件</span></span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(file);</span><br><span class="line">        tempStream.writeTo(out);</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 复制一份oracle的sql</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyMysqlToOracle</span><span class="params">(String path)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(file);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufIn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(in);</span><br><span class="line">        <span class="comment">// 内存流, 作为临时流</span></span><br><span class="line">        <span class="type">CharArrayWriter</span> <span class="variable">tempStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharArrayWriter</span>();</span><br><span class="line">        <span class="comment">// 替换</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// 需要替换的行</span></span><br><span class="line">        List&lt;String&gt; lineList = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">firstRow</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> ((line = bufIn.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            row++;</span><br><span class="line">            <span class="keyword">if</span> (line.contains(<span class="string">&quot;&lt;select&quot;</span>) || line.contains(<span class="string">&quot;&lt;update&quot;</span>) || line.contains(<span class="string">&quot;&lt;insert&quot;</span>) || line.contains(<span class="string">&quot;&lt;delete&quot;</span>)) &#123;</span><br><span class="line">                firstRow = row;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 添加替换内容</span></span><br><span class="line">            <span class="keyword">if</span> (firstRow != <span class="number">0</span> &amp;&amp; row &gt;= firstRow &amp;&amp; !line.contains(<span class="string">&quot;&lt;/mapper&gt;&quot;</span>)) &#123;</span><br><span class="line">                lineList.add(line);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 查询结束位置</span></span><br><span class="line">            <span class="keyword">if</span> (line.contains(<span class="string">&quot;&lt;/mapper&gt;&quot;</span>)) &#123;</span><br><span class="line">                tempStream.append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line">                tempStream.write(ORACLE_SQL);</span><br><span class="line">                tempStream.append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line">                tempStream.append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line"></span><br><span class="line">                lineList.forEach(lineValue -&gt; &#123;</span><br><span class="line">                    <span class="comment">// copy mysql 语句 转为oracle</span></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        tempStream.write(lineValue);</span><br><span class="line">                        tempStream.append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">                tempStream.append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 将该行写入内存</span></span><br><span class="line">            tempStream.write(line);</span><br><span class="line">            <span class="comment">// 添加换行符</span></span><br><span class="line">            tempStream.append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 关闭 输入流</span></span><br><span class="line">        bufIn.close();</span><br><span class="line">        <span class="comment">// 将内存中的流 写入 文件</span></span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(file);</span><br><span class="line">        tempStream.writeTo(out);</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 检查是否已经复制SQL</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">checkHasOracle</span><span class="params">(String path)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(file);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufIn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(in);</span><br><span class="line">        <span class="comment">// 内存流, 作为临时流</span></span><br><span class="line">        <span class="type">CharArrayWriter</span> <span class="variable">tempStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharArrayWriter</span>();</span><br><span class="line">        <span class="comment">// 替换</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">while</span> ((line = bufIn.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (line.contains(ORACLE_SQL)) &#123;</span><br><span class="line">                result = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 将该行写入内存</span></span><br><span class="line">            tempStream.write(line);</span><br><span class="line">            <span class="comment">// 添加换行符</span></span><br><span class="line">            tempStream.append(System.getProperty(<span class="string">&quot;line.separator&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 关闭 输入流</span></span><br><span class="line">        bufIn.close();</span><br><span class="line">        <span class="comment">// 将内存中的流 写入 文件</span></span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileWriter</span>(file);</span><br><span class="line">        tempStream.writeTo(out);</span><br><span class="line">        out.close();</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 递归文件夹 -&gt; 找到所有xml文件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getAllFileByRecursion</span><span class="params">(HashMap&lt;Object, Object&gt; fileMap, File file)</span> &#123;</span><br><span class="line">        File[] fs = file.listFiles();</span><br><span class="line">        <span class="keyword">for</span> (File f : fs) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> f.getName();</span><br><span class="line">            <span class="keyword">if</span> (f.isDirectory()) &#123;</span><br><span class="line">                <span class="comment">// 若是目录则递归，否则打印该目录下的文件</span></span><br><span class="line">                getAllFileByRecursion(fileMap, f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (f.isFile() &amp;&amp; fileName.endsWith(<span class="string">&quot;.xml&quot;</span>)) &#123;</span><br><span class="line">                fileMap.put(fileName, f);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用注解</title>
      <link href="/posts/449ecf69.html"/>
      <url>/posts/449ecf69.html</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JsonIgnore</span>    <span class="comment">//忽略不必要的属性数据返回</span></span><br><span class="line"><span class="meta">@TableField(exist = false)</span> <span class="comment">//避免MyBatis-Plus映射该字段。</span></span><br><span class="line"><span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span><span class="comment">//解决后端传给前端时间格式不正确</span></span><br><span class="line"><span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span><span class="comment">//解决前端传给后端时间格式不正确</span></span><br><span class="line"><span class="meta">@Xss(message = &quot;用户账号不能包含脚本字符&quot;)</span><span class="comment">//防止Xss攻击</span></span><br><span class="line"><span class="meta">@NotBlank(message = &quot;用户账号不能为空&quot;)</span><span class="comment">//防止账号为空</span></span><br><span class="line"><span class="meta">@Size(min = 0, max = 30, message = &quot;不能超过30个&quot;)</span><span class="comment">//校验属性长度</span></span><br><span class="line"><span class="meta">@Email(message = &quot;邮箱格式不正确&quot;)</span><span class="comment">//校验Email格式</span></span><br><span class="line"><span class="meta">@JsonInclude(JsonInclude.Include.ALWAYS)</span> <span class="comment">//默认</span></span><br><span class="line"><span class="meta">@JsonInclude(JsonInclude.Include.NON_DEFAULT )</span> <span class="comment">//属性为默认值不序列化</span></span><br><span class="line"><span class="meta">@JsonInclude(JsonInclude.Include.NON_EMPTY )</span> <span class="comment">//属性为空（&quot;&quot;） 或者为 NULL 都不序列化</span></span><br><span class="line"><span class="meta">@JsonInclude(JsonInclude.Include.NON_NULL )</span> <span class="comment">//属性为NULL 不序列化</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>定时任务</title>
      <link href="/posts/1e885c14.html"/>
      <url>/posts/1e885c14.html</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileJob</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(FileJob.class);</span><br><span class="line">  <span class="meta">@Scheduled(cron = &quot;0/1 * * * * *&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clean</span><span class="params">()</span> <span class="keyword">throws</span> ParseException &#123;</span><br><span class="line">    logger.info(<span class="string">&quot;开始删除文件...&quot;</span>);</span><br><span class="line">    <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="comment">//删除文件</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">deleteFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;xxx&quot;</span>);</span><br><span class="line">    File[] deleteFiles = deleteFile.listFiles();</span><br><span class="line">    <span class="keyword">for</span> (File file : deleteFiles) &#123;</span><br><span class="line">      <span class="type">Date</span> <span class="variable">createDate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>).parse(file.getName());</span><br><span class="line">      <span class="comment">//删除15天前的文件</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">new</span> <span class="title class_">Date</span>().compareTo(DateUtil.getDateIn(DateUtil.DAY, <span class="number">15</span>, createDate)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        FileUtil.deleteFile(uploadFile);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    logger.info(<span class="string">&quot;删除文件结束,总耗时：[&#123;&#125;]毫秒&quot;</span>, System.currentTimeMillis() - startTime);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>非空&amp;长度校验</title>
      <link href="/posts/e965586c.html"/>
      <url>/posts/e965586c.html</url>
      
        <content type="html"><![CDATA[<h3 id="非空校验">非空校验</h3><h4 id="AssertUtil">AssertUtil</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.util</span><br><span class="line">.Assert;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.CollectionUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 非空校验工具类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Desc</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/3/25 09:38</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AssertUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判空校验，为空 ，弹出</span></span><br><span class="line"><span class="comment">     * obj 校验对象</span></span><br><span class="line"><span class="comment">     * hint 提示语句</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">isNull</span><span class="params">(Object obj, String hint)</span> &#123;</span><br><span class="line">        Assert.isTrue(obj != <span class="literal">null</span>, hint);</span><br><span class="line">        <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">            Assert.isTrue(!StringUtils.isEmpty(((String) obj).trim()), hint);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> List) &#123;</span><br><span class="line">            <span class="type">List</span> <span class="variable">obj1</span> <span class="operator">=</span> (List) obj;</span><br><span class="line">            Assert.isTrue(!CollectionUtils.isEmpty(obj1), hint);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Long[]) &#123;</span><br><span class="line">            Assert.isTrue(((Long[]) obj).length &gt; <span class="number">0</span>, hint);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Integer[]) &#123;</span><br><span class="line">            Assert.isTrue(((Integer[]) obj).length &gt; <span class="number">0</span>, hint);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Double[]) &#123;</span><br><span class="line">            Assert.isTrue(((Double[]) obj).length &gt; <span class="number">0</span>, hint);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Boolean[]) &#123;</span><br><span class="line">            Assert.isTrue(((Boolean[]) obj).length &gt; <span class="number">0</span>, hint);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判空校验 不为空，弹出</span></span><br><span class="line"><span class="comment">     * obj 校验对象</span></span><br><span class="line"><span class="comment">     * hint 提示语句</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">notNull</span><span class="params">(Object obj, String hint)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">            Assert.isTrue(StringUtils.isEmpty(obj), hint);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> List) &#123;</span><br><span class="line">            <span class="type">List</span> <span class="variable">obj1</span> <span class="operator">=</span> (List) obj;</span><br><span class="line">            Assert.isTrue(CollectionUtils.isEmpty(obj1), hint);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Integer || obj <span class="keyword">instanceof</span> Long || obj <span class="keyword">instanceof</span> Date</span><br><span class="line">                || obj <span class="keyword">instanceof</span> Double || obj <span class="keyword">instanceof</span> BigDecimal || obj <span class="keyword">instanceof</span> Boolean</span><br><span class="line">                || obj <span class="keyword">instanceof</span> Map) &#123;</span><br><span class="line">            Assert.isTrue(obj == <span class="literal">null</span>, hint);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            Assert.isTrue(obj == <span class="literal">null</span>, hint);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判空校验 不为空，弹出</span></span><br><span class="line"><span class="comment">     * obj 校验对象</span></span><br><span class="line"><span class="comment">     * hint 提示语句</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">isTrue</span><span class="params">(<span class="type">boolean</span> flag, String hint)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            Assert.isTrue(!flag, hint);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="长度校验">长度校验</h3><h4 id="ValidateUtil">ValidateUtil</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Type</span> com.sunyard.am.utils</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Desc</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 15:13 2021/7/12</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ValidateUtil</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 最大长度校验</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> text 校验目标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> length 最大长度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg 校验失败，返回异常msg</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">lengthMax</span><span class="params">(String text, <span class="type">int</span> length, String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != text &amp;&amp; length &lt; text.length()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 最大长度校验</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> text 校验目标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> length 最大长度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg 校验失败，返回异常msg</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">lengthMax</span><span class="params">(Integer text, <span class="type">int</span> length, String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != text &amp;&amp; length &lt; String.valueOf(text).length()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断是否为数字</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> text 校验目标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 成功转化的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title function_">isInteger</span><span class="params">(String text, String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(StringUtils.hasLength(text))&#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">num</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                num = Integer.parseInt(text);</span><br><span class="line">            &#125;<span class="keyword">catch</span> (NumberFormatException e)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(msg);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> num;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断是否为该特定值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> text 校验目标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 成功转化的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title function_">isLong</span><span class="params">(String text, String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(StringUtils.hasLength(text))&#123;</span><br><span class="line">            <span class="type">Long</span> <span class="variable">num</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                num = Long.parseLong(text);</span><br><span class="line">            &#125;<span class="keyword">catch</span> (NumberFormatException e)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(msg);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> num;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 校验：只能是限定的这些值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> text 校验目标</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> limitValues 限定值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg 不符合后的话术</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">valueLimitEnum</span><span class="params">(String text, String[] limitValues, String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>( <span class="literal">null</span> == limitValues || <span class="number">0</span> == limitValues.length)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(msg + text);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>父子互查</title>
      <link href="/posts/9ad24ec7.html"/>
      <url>/posts/9ad24ec7.html</url>
      
        <content type="html"><![CDATA[<h2 id="父查子">父查子</h2><h3 id="mysql5">mysql5</h3><h3 id="mysql8">mysql8</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> rd.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sys_dict <span class="keyword">WHERE</span> parent_id <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>) rd,</span><br><span class="line">     (<span class="keyword">SELECT</span> <span class="variable">@pid</span> :<span class="operator">=</span> <span class="string">&#x27;1&#x27;</span>) pd </span><br><span class="line"><span class="keyword">WHERE</span> FIND_IN_SET(parent_id, <span class="variable">@pid</span>) <span class="operator">&gt;</span> <span class="number">0</span> </span><br><span class="line">  <span class="keyword">AND</span> <span class="variable">@pid</span> :<span class="operator">=</span> concat(<span class="variable">@pid</span>, <span class="string">&#x27;,&#x27;</span>, id) </span><br><span class="line"><span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> sys_dict <span class="keyword">where</span> id <span class="operator">=</span> <span class="variable">@pid</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> d2.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">         <span class="keyword">SELECT</span> t1.id,</span><br><span class="line">                 IF(find_in_set(t1.parent_id, <span class="variable">@pids</span>) <span class="operator">&gt;</span> <span class="number">0</span>, <span class="variable">@pids</span> :<span class="operator">=</span> concat(<span class="variable">@pids</span>, <span class="string">&#x27;,&#x27;</span>, t1.id), <span class="number">0</span>) <span class="keyword">AS</span> leafNodeId</span><br><span class="line">         <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> d1.id, d1.parent_id <span class="keyword">FROM</span> department d1) t1,</span><br><span class="line">  (<span class="keyword">SELECT</span> <span class="variable">@pids</span> :<span class="operator">=</span> <span class="number">5</span> ) t2 </span><br><span class="line">         ) t3 </span><br><span class="line">         <span class="keyword">INNER</span> <span class="keyword">JOIN</span> department d2 <span class="keyword">ON</span> d2.id <span class="operator">=</span> t3.id</span><br><span class="line"><span class="keyword">WHERE</span> t3.leafNodeId <span class="operator">!=</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><h3 id="oracle">oracle</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> REGION </span><br><span class="line"><span class="keyword">start</span> <span class="keyword">with</span> id <span class="operator">=</span> <span class="number">2</span></span><br><span class="line"><span class="keyword">connect</span> <span class="keyword">by</span> prior id <span class="operator">=</span> pid <span class="comment">-- prior 右边是子级id，就往子级的方向查询</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> id;</span><br></pre></td></tr></table></figure><h2 id="子查父">子查父</h2><h3 id="mysql5-2">mysql5</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">t2.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"><span class="variable">@r</span> <span class="keyword">AS</span> _id,</span><br><span class="line">( <span class="keyword">SELECT</span> <span class="variable">@r</span> :<span class="operator">=</span> parent_id <span class="keyword">FROM</span> t_area <span class="keyword">WHERE</span> id <span class="operator">=</span> _id ) <span class="keyword">AS</span> parent_id,</span><br><span class="line"><span class="variable">@s</span> :<span class="operator">=</span> <span class="variable">@s</span> <span class="operator">+</span> <span class="number">1</span> <span class="keyword">AS</span> sort </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">( <span class="keyword">SELECT</span> <span class="variable">@r</span> :<span class="operator">=</span> <span class="number">10</span>, <span class="variable">@s</span> :<span class="operator">=</span> <span class="number">0</span> ) temp,</span><br><span class="line">t_area </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line"><span class="variable">@r</span> <span class="operator">&gt;</span> <span class="number">0</span> </span><br><span class="line">) t1</span><br><span class="line"><span class="keyword">JOIN</span> t_area t2 <span class="keyword">ON</span> t1._id <span class="operator">=</span> t2.id </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">t1.sort</span><br></pre></td></tr></table></figure><h3 id="mysql8-2">mysql8</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="keyword">recursive</span> t <span class="keyword">as</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_area <span class="keyword">where</span> id <span class="operator">=</span> <span class="string">&#x27;10&#x27;</span>     <span class="comment">--当前id为子id</span></span><br><span class="line"><span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line"><span class="keyword">select</span> a.<span class="operator">*</span> <span class="keyword">from</span> t_area a <span class="keyword">join</span> t <span class="keyword">on</span> a.id <span class="operator">=</span> t.parent_id</span><br><span class="line">)</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> d3.<span class="operator">*</span></span><br><span class="line">    <span class="keyword">FROM</span> ( </span><br><span class="line">        <span class="keyword">SELECT</span> <span class="variable">@r</span> <span class="keyword">AS</span> id, </span><br><span class="line">          (<span class="keyword">SELECT</span> <span class="variable">@r</span> :<span class="operator">=</span> parent_id <span class="keyword">FROM</span> department <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="variable">@r</span>) <span class="keyword">AS</span> tmp_parent_id</span><br><span class="line">        <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="variable">@r</span> :<span class="operator">=</span> <span class="number">9</span>) leafNodeId, </span><br><span class="line">             department hd) d2 </span><br><span class="line">    <span class="keyword">INNER</span> <span class="keyword">JOIN</span> department d3 <span class="keyword">ON</span> d2.id <span class="operator">=</span> d3.id <span class="keyword">AND</span> d2.tmp_parent_id <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> d3.id</span><br></pre></td></tr></table></figure><h3 id="oracle-2">oracle</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> REGION </span><br><span class="line"><span class="keyword">start</span> <span class="keyword">with</span> id <span class="operator">=</span> <span class="number">8</span></span><br><span class="line"><span class="keyword">connect</span> <span class="keyword">by</span> prior pid <span class="operator">=</span> id <span class="comment">-- prior 右边是父id，就往父级的方向查询</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> id;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>集合Json</title>
      <link href="/posts/d2f02fb4.html"/>
      <url>/posts/d2f02fb4.html</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;typeNo&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;报告1&quot;</span>,</span><br><span class="line">            <span class="string">&quot;报告2&quot;</span>,</span><br><span class="line">            <span class="string">&quot;QQQ&quot;</span>,</span><br><span class="line">            <span class="string">&quot;版本测试&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">3075512018142209</span>,</span><br><span class="line">        <span class="string">&quot;typeId&quot;</span>: <span class="number">3006218671637506</span>,</span><br><span class="line">        <span class="string">&quot;method&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;rules&quot;</span>: <span class="string">&quot;QZH@-@BMH@-@SXH&quot;</span>,</span><br><span class="line">        <span class="string">&quot;titleRule&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;systemCode&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;autoType&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;autoRemark&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="string">&quot;2022-09-27 15:28:08&quot;</span>,</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;isDeleted&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;typeIdlist&quot;</span>: [</span><br><span class="line">            <span class="number">3006218671637506</span>,</span><br><span class="line">            <span class="number">3006219815052290</span>,</span><br><span class="line">            <span class="number">3031698650711042</span>,</span><br><span class="line">            <span class="number">3003265974469634</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;indexNo&quot;</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;typeNo&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;会计凭证zyl&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">3075512018109441</span>,</span><br><span class="line">        <span class="string">&quot;typeId&quot;</span>: <span class="number">2957358140253186</span>,</span><br><span class="line">        <span class="string">&quot;method&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;rules&quot;</span>: <span class="string">&quot;JGH@FLH@SXH&quot;</span>,</span><br><span class="line">        <span class="string">&quot;titleRule&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;systemCode&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;autoType&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;autoRemark&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="string">&quot;2022-09-27 15:28:08&quot;</span>,</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;isDeleted&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;typeIdlist&quot;</span>: [</span><br><span class="line">            <span class="number">2957358140253186</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;indexNo&quot;</span>: <span class="number">2</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;typeNo&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;tycs211211&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">3075512018568194</span>,</span><br><span class="line">        <span class="string">&quot;typeId&quot;</span>: <span class="number">3059976150787073</span>,</span><br><span class="line">        <span class="string">&quot;method&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;rules&quot;</span>: <span class="string">&quot;JGH@-@BMH@-@CWNF@-@SXH&quot;</span>,</span><br><span class="line">        <span class="string">&quot;titleRule&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;systemCode&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;autoType&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;autoRemark&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="string">&quot;2022-09-27 15:28:08&quot;</span>,</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;isDeleted&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;typeIdlist&quot;</span>: [</span><br><span class="line">            <span class="number">3059976150787073</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;indexNo&quot;</span>: <span class="number">3</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;typeNo&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;文龙测试1专属&quot;</span>,</span><br><span class="line">            <span class="string">&quot;文龙专属测试&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">3075512018453506</span>,</span><br><span class="line">        <span class="string">&quot;typeId&quot;</span>: <span class="number">3074863542273025</span>,</span><br><span class="line">        <span class="string">&quot;method&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;rules&quot;</span>: <span class="string">&quot;QZH@JGH@BMH@FLH@SXH&quot;</span>,</span><br><span class="line">        <span class="string">&quot;titleRule&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;systemCode&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;autoType&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;autoRemark&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;createTime&quot;</span>: <span class="string">&quot;2022-09-27 15:28:08&quot;</span>,</span><br><span class="line">        <span class="string">&quot;updateTime&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&quot;isDeleted&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;typeIdlist&quot;</span>: [</span><br><span class="line">            <span class="number">3074863542273025</span>,</span><br><span class="line">            <span class="number">3072537942688769</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;indexNo&quot;</span>: <span class="number">4</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>加密工具类</title>
      <link href="/posts/f8fe0764.html"/>
      <url>/posts/f8fe0764.html</url>
      
        <content type="html"><![CDATA[<h3 id="AES对称加密和解密">AES对称加密和解密</h3><h4 id="AESUtil">AESUtil</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.security.InvalidKeyException;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.security.SecureRandom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.crypto.BadPaddingException;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.Cipher;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.IllegalBlockSizeException;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.KeyGenerator;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.NoSuchPaddingException;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.SecretKey;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.spec.SecretKeySpec;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sun.misc.BASE64Decoder;</span><br><span class="line"><span class="keyword">import</span> sun.misc.BASE64Encoder;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * AES对称加密和解密</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AESUtil</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 加密</span></span><br><span class="line"><span class="comment">     * 1.构造密钥生成器</span></span><br><span class="line"><span class="comment">     * 2.根据ecnodeRules规则初始化密钥生成器</span></span><br><span class="line"><span class="comment">     * 3.产生密钥</span></span><br><span class="line"><span class="comment">     * 4.创建和初始化密码器</span></span><br><span class="line"><span class="comment">     * 5.内容加密</span></span><br><span class="line"><span class="comment">     * 6.返回字符串</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">encode</span><span class="params">(String encodeRules,String content)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.构造密钥生成器，指定为AES算法,不区分大小写</span></span><br><span class="line">            KeyGenerator keygen=KeyGenerator.getInstance(<span class="string">&quot;AES&quot;</span>);</span><br><span class="line">            <span class="comment">//2.根据ecnodeRules规则初始化密钥生成器</span></span><br><span class="line">            <span class="comment">//生成一个128位的随机源,根据传入的字节数组</span></span><br><span class="line">            <span class="type">SecureRandom</span> <span class="variable">secureRandom</span> <span class="operator">=</span> SecureRandom.getInstance(<span class="string">&quot;SHA1PRNG&quot;</span>);</span><br><span class="line">            secureRandom.setSeed(encodeRules.getBytes());</span><br><span class="line">            keygen.init(<span class="number">128</span>, secureRandom);</span><br><span class="line">            <span class="comment">//3.产生原始对称密钥</span></span><br><span class="line">            SecretKey original_key=keygen.generateKey();</span><br><span class="line">            <span class="comment">//4.获得原始对称密钥的字节数组</span></span><br><span class="line">            <span class="type">byte</span> [] raw=original_key.getEncoded();</span><br><span class="line">            <span class="comment">//5.根据字节数组生成AES密钥</span></span><br><span class="line">            SecretKey key=<span class="keyword">new</span> <span class="title class_">SecretKeySpec</span>(raw, <span class="string">&quot;AES&quot;</span>);</span><br><span class="line">            <span class="comment">//6.根据指定算法AES自成密码器</span></span><br><span class="line">            Cipher cipher=Cipher.getInstance(<span class="string">&quot;AES&quot;</span>);</span><br><span class="line">            <span class="comment">//7.初始化密码器，第一个参数为加密(Encrypt_mode)或者解密解密(Decrypt_mode)操作，第二个参数为使用的KEY</span></span><br><span class="line">            cipher.init(Cipher.ENCRYPT_MODE, key);</span><br><span class="line">            <span class="comment">//8.获取加密内容的字节数组(这里要设置为utf-8)不然内容中如果有中文和英文混合中文就会解密为乱码</span></span><br><span class="line">            <span class="type">byte</span> [] byte_encode=content.getBytes(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            <span class="comment">//9.根据密码器的初始化方式--加密：将数据加密</span></span><br><span class="line">            <span class="type">byte</span> [] byte_AES=cipher.doFinal(byte_encode);</span><br><span class="line">            <span class="comment">//10.将加密后的数据转换为字符串</span></span><br><span class="line">            String AES_encode= <span class="keyword">new</span> <span class="title class_">String</span>(<span class="keyword">new</span> <span class="title class_">BASE64Encoder</span>().encode(byte_AES));</span><br><span class="line">            <span class="comment">//11.将字符串返回</span></span><br><span class="line">            <span class="keyword">return</span> AES_encode;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchPaddingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvalidKeyException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalBlockSizeException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (BadPaddingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果有错就返加nulll</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 解密</span></span><br><span class="line"><span class="comment">     * 解密过程：</span></span><br><span class="line"><span class="comment">     * 1.同加密1-4步</span></span><br><span class="line"><span class="comment">     * 2.将加密后的字符串反纺成byte[]数组</span></span><br><span class="line"><span class="comment">     * 3.将加密内容解密</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">decode</span><span class="params">(String encodeRules,String content)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.构造密钥生成器，指定为AES算法,不区分大小写</span></span><br><span class="line">            KeyGenerator keygen=KeyGenerator.getInstance(<span class="string">&quot;AES&quot;</span>);</span><br><span class="line">            <span class="comment">//2.根据ecnodeRules规则初始化密钥生成器</span></span><br><span class="line">            <span class="comment">//生成一个128位的随机源,根据传入的字节数组</span></span><br><span class="line">            <span class="type">SecureRandom</span> <span class="variable">secureRandom</span> <span class="operator">=</span> SecureRandom.getInstance(<span class="string">&quot;SHA1PRNG&quot;</span>);</span><br><span class="line">            secureRandom.setSeed(encodeRules.getBytes());</span><br><span class="line">            keygen.init(<span class="number">128</span>, secureRandom);</span><br><span class="line">            <span class="comment">//3.产生原始对称密钥</span></span><br><span class="line">            SecretKey original_key=keygen.generateKey();</span><br><span class="line">            <span class="comment">//4.获得原始对称密钥的字节数组</span></span><br><span class="line">            <span class="type">byte</span> [] raw=original_key.getEncoded();</span><br><span class="line">            <span class="comment">//5.根据字节数组生成AES密钥</span></span><br><span class="line">            SecretKey key=<span class="keyword">new</span> <span class="title class_">SecretKeySpec</span>(raw, <span class="string">&quot;AES&quot;</span>);</span><br><span class="line">            <span class="comment">//6.根据指定算法AES自成密码器</span></span><br><span class="line">            Cipher cipher=Cipher.getInstance(<span class="string">&quot;AES&quot;</span>);</span><br><span class="line">            <span class="comment">//7.初始化密码器，第一个参数为加密(Encrypt_mode)或者解密(Decrypt_mode)操作，第二个参数为使用的KEY</span></span><br><span class="line">            cipher.init(Cipher.DECRYPT_MODE, key);</span><br><span class="line">            <span class="comment">//8.将加密并编码后的内容解码成字节数组</span></span><br><span class="line">            <span class="type">byte</span> [] byte_content= <span class="keyword">new</span> <span class="title class_">BASE64Decoder</span>().decodeBuffer(content);</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * 解密</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="type">byte</span> [] byte_decode=cipher.doFinal(byte_content);</span><br><span class="line">            String AES_decode=<span class="keyword">new</span> <span class="title class_">String</span>(byte_decode,<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> AES_decode;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchPaddingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvalidKeyException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalBlockSizeException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (BadPaddingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果有错就返加nulll</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String idKey=<span class="string">&quot;6o3jl5k4trmdg54sff&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">timestamp</span> <span class="operator">=</span> String.valueOf(System.currentTimeMillis());</span><br><span class="line">        String datas=<span class="string">&quot; &#123; &#x27;busiInfo&#x27;: &#123; &#x27;busiCode&#x27;: &#x27;UWC&#x27;, &#x27;busiName&#x27;: &#x27;车险投保&#x27;,&#x27;businessNo&#x27;: &#x27;TB201907120000001&#x27;,&#x27;productId&#x27;: &#x27;0001&#x27;, &#x27;creater&#x27;: &#x27;zhangsan&#x27;, &#x27;createrName&#x27;: &#x27;张三&#x27;, &#x27;orgId&#x27;: &#x27;00000000&#x27;, &#x27;orgName&#x27;: &#x27;总公司&#x27;&#125;,&#x27;custInfo&#x27;: &#123;&#x27;custName&#x27;: &#x27;李四&#x27;,&#x27;custGender&#x27;: &#x27;男&#x27;,&#x27;idType&#x27;: &#x27;1&#x27;,&#x27;idNo&#x27;: &#x27;332522197611156512&#x27;, &#x27;phoneNo&#x27;: &#x27;15166066606&#x27;&#125;&#125;&quot;</span>;</span><br><span class="line">        String code=<span class="string">&quot;VA0001&quot;</span>;</span><br><span class="line">        String format=<span class="string">&quot;json&quot;</span>;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 加密</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(<span class="string">&quot;使用AES对称加密，请输入加密的规则&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入要加密的内容:&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="string">&quot;format=json&amp;code=VA0001&amp;datas=&quot;</span>+datas+<span class="string">&quot;&amp;timestamp=&quot;</span>+timestamp;</span><br><span class="line">        <span class="type">String</span> <span class="variable">secContent</span> <span class="operator">=</span> AESUtil.encode(idKey, content);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;根据输入的规则&quot;</span>+idKey+<span class="string">&quot;加密后的密文是:&quot;</span>+secContent);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 解密</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(<span class="string">&quot;使用AES对称解密，请输入加密的规则：(须与加密相同)&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入要解密的内容（密文）:&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;根据输入的规则&quot;</span>+idKey+<span class="string">&quot;解密后的明文是:&quot;</span>+AESUtil.decode(idKey, secContent));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Base64加密">Base64加密</h3><h4 id="Base64Util">Base64Util</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.codec.binary.Base64;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhouleibin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Type</span> com.sunyard.am.utils</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Desc</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/7/1 15:35</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Base64Util</span> &#123;</span><br><span class="line">    <span class="comment">/***/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">encodeBase64</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">byte</span>[] byte64 = Base64.encodeBase64(str.getBytes(<span class="string">&quot;UTF-8&quot;</span>), <span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(byte64, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">decodeBase64</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">byte</span>[] byte64 = Base64.decodeBase64(str.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(byte64, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CodeUtil">CodeUtil</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.codec.binary.Base64;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Base64加密解密</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeUtil</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">encode</span><span class="params">(String content)</span> &#123;</span><br><span class="line"><span class="comment">//如果content为null 直接返回null</span></span><br><span class="line"><span class="keyword">if</span> (content == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//把content转换成字符组</span></span><br><span class="line"><span class="type">char</span>[] array = content.toCharArray();</span><br><span class="line"><span class="comment">//遍历字符组</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">singlec</span> <span class="operator">=</span> array[i];</span><br><span class="line">array[i] = (<span class="type">char</span>) (singlec + <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//通过Base64转码为byte</span></span><br><span class="line"><span class="type">byte</span>[] b = Base64.encodeBase64(<span class="keyword">new</span> <span class="title class_">String</span>(array).getBytes(), <span class="literal">false</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">decode</span><span class="params">(String content)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (content == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">byte</span>[] b = Base64.decodeBase64(content.getBytes());</span><br><span class="line"><span class="type">String</span> <span class="variable">offsetContent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(b);</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>[] array = offsetContent.toCharArray();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">singlec</span> <span class="operator">=</span> array[i];</span><br><span class="line">array[i] = (<span class="type">char</span>) (singlec - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(array);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//加密</span></span><br><span class="line"><span class="type">String</span> <span class="variable">admin</span> <span class="operator">=</span> CodeUtil.encode(<span class="string">&quot;zwl123&quot;</span>);</span><br><span class="line">System.out.println(admin);</span><br><span class="line"><span class="comment">//解密</span></span><br><span class="line"><span class="type">String</span> <span class="variable">decode</span> <span class="operator">=</span> CodeUtil.decode(admin);</span><br><span class="line">System.out.println(decode);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="MD5加密">MD5加密</h3><h4 id="MD5Utils">MD5Utils</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MD5Utils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * MD5加码 生成32位md5码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">string2MD5</span><span class="params">(String inStr)</span>&#123;</span><br><span class="line">        <span class="type">MessageDigest</span> <span class="variable">md5</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//引用  java.security.MessageDigest公共类</span></span><br><span class="line">            <span class="comment">// getInstance(&quot;MD5&quot;)方法 设置加密格式</span></span><br><span class="line">            md5 = MessageDigest.getInstance(<span class="string">&quot;MD5&quot;</span>);  <span class="comment">//此句是核心</span></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            System.out.println(e.toString());</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">char</span>[] charArray = inStr.toCharArray();</span><br><span class="line">        <span class="type">byte</span>[] byteArray = <span class="keyword">new</span> <span class="title class_">byte</span>[charArray.length];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; charArray.length; i++)</span><br><span class="line">            byteArray[i] = (<span class="type">byte</span>) charArray[i];</span><br><span class="line">        <span class="type">byte</span>[] md5Bytes = md5.digest(byteArray);</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">hexValue</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; md5Bytes.length; i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">val</span> <span class="operator">=</span> ((<span class="type">int</span>) md5Bytes[i]) &amp; <span class="number">0xff</span>;</span><br><span class="line">            <span class="keyword">if</span> (val &lt; <span class="number">16</span>)</span><br><span class="line">                hexValue.append(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">            hexValue.append(Integer.toHexString(val));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> hexValue.toString();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加密解密算法[可逆] 执行一次加密，执行两次解密</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">convertMD5</span><span class="params">(String inStr)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">char</span>[] a = inStr.toCharArray();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; a.length; i++)&#123;</span><br><span class="line">            a[i] = (<span class="type">char</span>) (a[i] ^ <span class="string">&#x27;t&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(a);</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">show</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        password =<span class="string">&quot;sa123&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 测试主函数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;tangfuqiang&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;原始：&quot;</span> + s);</span><br><span class="line">        System.out.println(<span class="string">&quot;MD5后：&quot;</span> + string2MD5(s));</span><br><span class="line">        System.out.println(<span class="string">&quot;加密的：&quot;</span> + convertMD5(s));</span><br><span class="line">        System.out.println(<span class="string">&quot;解密的：&quot;</span> + convertMD5(convertMD5(s)));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    public static void main(String[] args) &#123;</span></span><br><span class="line"><span class="comment">//        System.out.println(convertMD5(&quot;sa123&quot;));</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>时间工具类</title>
      <link href="/posts/d78cedf0.html"/>
      <url>/posts/d78cedf0.html</url>
      
        <content type="html"><![CDATA[<h3 id="pox-xml">pox.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.12.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="DateUtils">DateUtils</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.GregorianCalendar;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 日期工具类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DateUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得当前日期 yyyy-MM-dd HH:mm:ss</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 2019-08-27 14:12:40</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getCurrentTime</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 小写的hh取得12小时，大写的HH取的是24小时</span></span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="keyword">return</span> df.format(date);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取系统当前时间戳</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 1566889186583</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getSystemTime</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">current</span> <span class="operator">=</span> String.valueOf(System.currentTimeMillis());</span><br><span class="line">        <span class="keyword">return</span> current;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前日期 yy-MM-dd</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 2019-08-27</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getDateByString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> sdf.format(date);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 得到两个时间差  格式yyyy-MM-dd HH:mm:ss</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> start 2019-06-27 14:12:40</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> end   2019-08-27 14:12:40</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 5270400000</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">dateSubtraction</span><span class="params">(String start, String end)</span> &#123;</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Date</span> <span class="variable">date1</span> <span class="operator">=</span> df.parse(start);</span><br><span class="line">            <span class="type">Date</span> <span class="variable">date2</span> <span class="operator">=</span> df.parse(end);</span><br><span class="line">            <span class="keyword">return</span> date2.getTime() - date1.getTime();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 得到两个时间差</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> start 开始时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> end 结束时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">dateTogether</span><span class="params">(Date start, Date end)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> end.getTime() - start.getTime();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 转化long值的日期为yyyy-MM-dd  HH:mm:ss.SSS格式的日期</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> millSec 日期long值  5270400000</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 日期，以yyyy-MM-dd  HH:mm:ss.SSS格式输出 1970-03-03  08:00:00.000</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">transferLongToDate</span><span class="params">(String millSec)</span> &#123;</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd  HH:mm:ss.SSS&quot;</span>);</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(Long.parseLong(millSec));</span><br><span class="line">        <span class="keyword">return</span> sdf.format(date);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得当前日期 yyyy-MM-dd HH:mm:ss</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getOkDate</span><span class="params">(String date)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isEmpty(date)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Date</span> <span class="variable">date1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;EEE MMM dd HH:mm:ss Z yyyy&quot;</span>, Locale.ENGLISH).parse(date);</span><br><span class="line">            <span class="comment">//格式化</span></span><br><span class="line">            <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> sdf.format(date1);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前日期是一个星期的第几天</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 2</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getDayOfWeek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">cal</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">        cal.setTime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        <span class="keyword">return</span> cal.get(Calendar.DAY_OF_WEEK) - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断当前时间是否在[startTime, endTime]区间，注意时间格式要一致</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nowTime     当前时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dateSection 时间区间   2018-01-08,2019-09-09</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> jqlin</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isEffectiveDate</span><span class="params">(Date nowTime, String dateSection)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String[] times = dateSection.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">format</span> <span class="operator">=</span> <span class="string">&quot;yyyy-MM-dd&quot;</span>;</span><br><span class="line">            <span class="type">Date</span> <span class="variable">startTime</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(format).parse(times[<span class="number">0</span>]);</span><br><span class="line">            <span class="type">Date</span> <span class="variable">endTime</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(format).parse(times[<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span> (nowTime.getTime() == startTime.getTime()</span><br><span class="line">                    || nowTime.getTime() == endTime.getTime()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Calendar</span> <span class="variable">date</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">            date.setTime(nowTime);</span><br><span class="line"></span><br><span class="line">            <span class="type">Calendar</span> <span class="variable">begin</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">            begin.setTime(startTime);</span><br><span class="line"></span><br><span class="line">            <span class="type">Calendar</span> <span class="variable">end</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">            end.setTime(endTime);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (isSameDay(date, begin) || isSameDay(date, end)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (date.after(begin) &amp;&amp; date.before(end)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isSameDay</span><span class="params">(Calendar cal1, Calendar cal2)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (cal1 != <span class="literal">null</span> &amp;&amp; cal2 != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> cal1.get(<span class="number">0</span>) == cal2.get(<span class="number">0</span>) &amp;&amp; cal1.get(<span class="number">1</span>) == cal2.get(<span class="number">1</span>) &amp;&amp; cal1.get(<span class="number">6</span>) == cal2.get(<span class="number">6</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;The date must not be null&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">getTimeByDate</span><span class="params">(String time)</span> &#123;</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">format</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> format.parse(time);</span><br><span class="line">            <span class="comment">//日期转时间戳（毫秒）</span></span><br><span class="line">            <span class="keyword">return</span> date.getTime();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前小时 ：2019-08-23 17</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  2019-08-27 17</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getCurrentHour</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">GregorianCalendar</span> <span class="variable">calendar</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GregorianCalendar</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">hour</span> <span class="operator">=</span> calendar.get(Calendar.HOUR_OF_DAY);</span><br><span class="line">        <span class="keyword">if</span> (hour &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> DateUtils.getCurrentTime() + <span class="string">&quot; 0&quot;</span> + hour;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> DateUtils.getDateByString() + <span class="string">&quot; &quot;</span> + hour;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前时间一个小时前</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 2019-08-27 16</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getCurrentHourBefore</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">GregorianCalendar</span> <span class="variable">calendar</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GregorianCalendar</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">hour</span> <span class="operator">=</span> calendar.get(Calendar.HOUR_OF_DAY);</span><br><span class="line">        <span class="keyword">if</span> (hour &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            hour = calendar.get(Calendar.HOUR_OF_DAY) - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (hour &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> DateUtils.getDateByString() + <span class="string">&quot; 0&quot;</span> + hour;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> DateUtils.getDateByString() + <span class="string">&quot; &quot;</span> + hour;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//获取当前日期前一天</span></span><br><span class="line">        <span class="keyword">return</span> DateUtils.getBeforeDay() + <span class="string">&quot; &quot;</span> + <span class="number">23</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前日期前一天</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 2019-08-26</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getBeforeDay</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">calendar</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">        calendar.setTime(date);</span><br><span class="line">        calendar.add(Calendar.DAY_OF_MONTH, -<span class="number">1</span>);</span><br><span class="line">        date = calendar.getTime();</span><br><span class="line">        <span class="keyword">return</span> sdf.format(date);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取最近七天</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 2019-08-20</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getServen</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">c</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line"></span><br><span class="line">        c.add(Calendar.DATE, -<span class="number">7</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Date</span> <span class="variable">monday</span> <span class="operator">=</span> c.getTime();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">preMonday</span> <span class="operator">=</span> sdf.format(monday);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> preMonday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取最近一个月</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 2019-07-27</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getOneMonth</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">c</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line"></span><br><span class="line">        c.add(Calendar.MONTH, -<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Date</span> <span class="variable">monday</span> <span class="operator">=</span> c.getTime();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">preMonday</span> <span class="operator">=</span> sdf.format(monday);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> preMonday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取最近三个月</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 2019-05-27</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getThreeMonth</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">c</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line"></span><br><span class="line">        c.add(Calendar.MONTH, -<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Date</span> <span class="variable">monday</span> <span class="operator">=</span> c.getTime();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">preMonday</span> <span class="operator">=</span> sdf.format(monday);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> preMonday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取最近一年</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 2018-08-27</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getOneYear</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">c</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">        c.add(Calendar.YEAR, -<span class="number">1</span>);</span><br><span class="line">        <span class="type">Date</span> <span class="variable">start</span> <span class="operator">=</span> c.getTime();</span><br><span class="line">        <span class="type">String</span> <span class="variable">startDay</span> <span class="operator">=</span> sdf.format(start);</span><br><span class="line">        <span class="keyword">return</span> startDay;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">month</span> <span class="operator">=</span> Calendar.getInstance().get(Calendar.MONTH) + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取今年月份数据</span></span><br><span class="line"><span class="comment">     * 说明 有的需求前端需要根据月份查询每月数据，此时后台给前端返回今年共有多少月份</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> [1, 2, 3, 4, 5, 6, 7, 8]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List <span class="title function_">getMonthList</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= month; i++) &#123;</span><br><span class="line">            list.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回当前年度季度list</span></span><br><span class="line"><span class="comment">     * 本年度截止目前共三个季度，然后根据1,2,3分别查询相关起止时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> [1, 2, 3]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List <span class="title function_">getQuartList</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">quart</span> <span class="operator">=</span> month / <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= quart; i++) &#123;</span><br><span class="line">            list.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(DateUtils.getQuartList());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="DateUtil">DateUtil</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.time.DateFormatUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.time.DateUtils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DateUtil</span> <span class="keyword">extends</span> <span class="title class_">DateUtils</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] PARSE_PATTERNS = &#123; <span class="string">&quot;yyyy-MM-dd&quot;</span>, <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>,</span><br><span class="line">            <span class="string">&quot;yyyy-MM-dd HH:mm&quot;</span>, <span class="string">&quot;yyyy-MM&quot;</span>, <span class="string">&quot;yyyy/MM/dd&quot;</span>, <span class="string">&quot;yyyy/MM/dd HH:mm:ss&quot;</span>, <span class="string">&quot;yyyy/MM/dd HH:mm&quot;</span>,</span><br><span class="line">            <span class="string">&quot;yyyy/MM&quot;</span>, <span class="string">&quot;yyyy.MM.dd&quot;</span>, <span class="string">&quot;yyyy.MM.dd HH:mm:ss&quot;</span>, <span class="string">&quot;yyyy.MM.dd HH:mm&quot;</span>, <span class="string">&quot;yyyy.MM&quot;</span> &#125;;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">YYYY_MM_DD</span> <span class="operator">=</span> <span class="string">&quot;yyyy-MM-dd&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">YYYYMMDDHHMMSS</span> <span class="operator">=</span> <span class="string">&quot;yyyyMMddHHmmss&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">YYYY_MM_DD_HH_MM_SS</span> <span class="operator">=</span> <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前Date型日期</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Date() 当前日期</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title function_">getNowDate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前日期, 默认格式为yyyy-MM-dd</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> String</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getDate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dateTimeNow(YYYY_MM_DD);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title function_">getTime</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dateTimeNow(YYYY_MM_DD_HH_MM_SS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title function_">dateTimeNow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dateTimeNow(YYYYMMDDHHMMSS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title function_">dateTimeNow</span><span class="params">(<span class="keyword">final</span> String format)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> parseDateToStr(format, <span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title function_">dateTime</span><span class="params">(<span class="keyword">final</span> Date date)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> parseDateToStr(YYYY_MM_DD, date);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title function_">parseDateToStr</span><span class="params">(<span class="keyword">final</span> String format, <span class="keyword">final</span> Date date)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(format).format(date);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Date <span class="title function_">dateTime</span><span class="params">(<span class="keyword">final</span> String format, <span class="keyword">final</span> String ts)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(format).parse(ts);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 日期路径 即年/月/日 如2018/08/08</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title function_">datePath</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">now</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="keyword">return</span> DateFormatUtils.format(now, <span class="string">&quot;yyyy/MM/dd&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 日期路径 即年/月/日 如20180808</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title function_">dateTime</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">now</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="keyword">return</span> DateFormatUtils.format(now, <span class="string">&quot;yyyyMMdd&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 日期型字符串转化为日期 格式</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title function_">parseDate</span><span class="params">(Object str)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (str == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> parseDate(str.toString(), PARSE_PATTERNS);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 计算两个时间差</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getDatePoor</span><span class="params">(Date endDate, Date nowDate)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">nd</span> <span class="operator">=</span> <span class="number">1000</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">nh</span> <span class="operator">=</span> <span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">nm</span> <span class="operator">=</span> <span class="number">1000</span> * <span class="number">60</span>;</span><br><span class="line">        <span class="comment">// long ns = 1000;</span></span><br><span class="line">        <span class="comment">// 获得两个时间的毫秒时间差异</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">diff</span> <span class="operator">=</span> endDate.getTime() - nowDate.getTime();</span><br><span class="line">        <span class="comment">// 计算差多少天</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">day</span> <span class="operator">=</span> diff / nd;</span><br><span class="line">        <span class="comment">// 计算差多少小时</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">hour</span> <span class="operator">=</span> diff % nd / nh;</span><br><span class="line">        <span class="comment">// 计算差多少分钟</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">min</span> <span class="operator">=</span> diff % nd % nh / nm;</span><br><span class="line">        <span class="comment">// 计算差多少秒//输出结果</span></span><br><span class="line">        <span class="comment">// long sec = diff % nd % nh % nm / ns;</span></span><br><span class="line">        <span class="keyword">return</span> day + <span class="string">&quot;天&quot;</span> + hour + <span class="string">&quot;小时&quot;</span> + min + <span class="string">&quot;分钟&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取指定时间的那天 00:00:00.000 的时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> date</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title function_">getDayBeginTime</span><span class="params">(<span class="keyword">final</span> Date date)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == date) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">c</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">        c.setTime(date);</span><br><span class="line">        c.set(Calendar.HOUR_OF_DAY, <span class="number">0</span>);</span><br><span class="line">        c.set(Calendar.MINUTE, <span class="number">0</span>);</span><br><span class="line">        c.set(Calendar.SECOND, <span class="number">0</span>);</span><br><span class="line">        c.set(Calendar.MILLISECOND, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> c.getTime();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取指定时间的那天 23:59:59.999 的时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> date</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title function_">getDayEndTime</span><span class="params">(<span class="keyword">final</span> Date date)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == date) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">c</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">        c.setTime(date);</span><br><span class="line">        c.set(Calendar.HOUR_OF_DAY, <span class="number">23</span>);</span><br><span class="line">        c.set(Calendar.MINUTE, <span class="number">59</span>);</span><br><span class="line">        c.set(Calendar.SECOND, <span class="number">59</span>);</span><br><span class="line">        c.set(Calendar.MILLISECOND, <span class="number">999</span>);</span><br><span class="line">        <span class="keyword">return</span> c.getTime();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文件工具类</title>
      <link href="/posts/86b0f4ef.html"/>
      <url>/posts/86b0f4ef.html</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileTools</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 存储文件到系统</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> file 文件,path 文件路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 文件名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">storeFile</span><span class="params">(MultipartFile file,String path)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> StringUtils.cleanPath(file.getOriginalFilename());</span><br><span class="line">        <span class="type">Path</span> <span class="variable">fileStorageLocation</span> <span class="operator">=</span> Paths.get(path).toAbsolutePath().normalize();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(fileName.contains(<span class="string">&quot;..&quot;</span>)) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">FileException</span>(<span class="string">&quot;文件路径出错....&quot;</span> + fileName);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Path</span> <span class="variable">targetLocation</span> <span class="operator">=</span> fileStorageLocation.resolve(fileName);</span><br><span class="line">            Files.copy(file.getInputStream(), targetLocation, StandardCopyOption.REPLACE_EXISTING);</span><br><span class="line">            <span class="keyword">return</span> fileName;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException ex) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">FileException</span>(<span class="string">&quot;存储文件失败 ....&quot;</span> + fileName + <span class="string">&quot;请重试&quot;</span>, ex);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加载文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> path 文件路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 文件资源</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Resource <span class="title function_">loadFileAsResource</span><span class="params">(String file_name)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Path</span> <span class="variable">filePath</span> <span class="operator">=</span> Paths.get(file_name).toAbsolutePath().normalize();</span><br><span class="line">            <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> filePath.getFileName().toString();</span><br><span class="line">            <span class="type">Resource</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlResource</span>(filePath.toUri());</span><br><span class="line">            <span class="keyword">if</span>(resource.exists()) &#123;</span><br><span class="line">                <span class="keyword">return</span> resource;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">FileException</span>(<span class="string">&quot;文件不存在 &quot;</span> + fileName);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MalformedURLException  ex) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">FileException</span>(<span class="string">&quot;文件找不到 ....&quot;</span> + ex);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据文件后缀判断文件类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> 文件名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 该文件所属类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">transforType</span><span class="params">(String fileName)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(fileName == <span class="literal">null</span>)&#123;</span><br><span class="line">fileName = <span class="string">&quot;emptyFileName&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> fileName;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//获取文件后缀名并转化为小写，用于后续比较</span></span><br><span class="line"><span class="type">String</span> <span class="variable">fileType</span> <span class="operator">=</span> fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>) + <span class="number">1</span>, fileName.length()).toLowerCase();</span><br><span class="line"><span class="comment">//创建图片类型数组</span></span><br><span class="line">String img[] = &#123; <span class="string">&quot;bmp&quot;</span>, <span class="string">&quot;jpg&quot;</span>, <span class="string">&quot;jpeg&quot;</span>, <span class="string">&quot;png&quot;</span>, <span class="string">&quot;tiff&quot;</span>, <span class="string">&quot;gif&quot;</span>, <span class="string">&quot;pcx&quot;</span>, <span class="string">&quot;tga&quot;</span>, <span class="string">&quot;exif&quot;</span>, <span class="string">&quot;fpx&quot;</span>, <span class="string">&quot;svg&quot;</span>, <span class="string">&quot;psd&quot;</span>,</span><br><span class="line"><span class="string">&quot;cdr&quot;</span>, <span class="string">&quot;pcd&quot;</span>, <span class="string">&quot;dxf&quot;</span>, <span class="string">&quot;ufo&quot;</span>, <span class="string">&quot;eps&quot;</span>, <span class="string">&quot;ai&quot;</span>, <span class="string">&quot;raw&quot;</span>, <span class="string">&quot;wmf&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; img.length; i++)&#123;</span><br><span class="line"><span class="keyword">if</span> (img[i].equals(fileType)) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;image&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建文档类型数组</span></span><br><span class="line">String document[] = &#123; <span class="string">&quot;txt&quot;</span>, <span class="string">&quot;doc&quot;</span>, <span class="string">&quot;docx&quot;</span>, <span class="string">&quot;xls&quot;</span>,<span class="string">&quot;xlsx&quot;</span>, <span class="string">&quot;htm&quot;</span>, <span class="string">&quot;html&quot;</span>, <span class="string">&quot;jsp&quot;</span>, <span class="string">&quot;rtf&quot;</span>, <span class="string">&quot;wpd&quot;</span>, <span class="string">&quot;pdf&quot;</span>, <span class="string">&quot;ppt&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; document.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (document[i].equals(fileType)) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;documents&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创建视频类型数组</span></span><br><span class="line">String video[] = &#123; <span class="string">&quot;mp4&quot;</span>, <span class="string">&quot;avi&quot;</span>, <span class="string">&quot;mov&quot;</span>, <span class="string">&quot;wmv&quot;</span>, <span class="string">&quot;asf&quot;</span>, <span class="string">&quot;navi&quot;</span>, <span class="string">&quot;3gp&quot;</span>, <span class="string">&quot;mkv&quot;</span>, <span class="string">&quot;f4v&quot;</span>, <span class="string">&quot;rmvb&quot;</span>, <span class="string">&quot;webm&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; video.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (video[i].equals(fileType)) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;video&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创建音频类型数组</span></span><br><span class="line">String music[] = &#123; <span class="string">&quot;mp3&quot;</span>, <span class="string">&quot;wma&quot;</span>, <span class="string">&quot;wav&quot;</span>, <span class="string">&quot;mod&quot;</span>, <span class="string">&quot;ra&quot;</span>, <span class="string">&quot;cd&quot;</span>, <span class="string">&quot;md&quot;</span>, <span class="string">&quot;asf&quot;</span>, <span class="string">&quot;aac&quot;</span>, <span class="string">&quot;vqf&quot;</span>, <span class="string">&quot;ape&quot;</span>, <span class="string">&quot;mid&quot;</span>, <span class="string">&quot;ogg&quot;</span>,</span><br><span class="line"><span class="string">&quot;m4a&quot;</span>, <span class="string">&quot;vqf&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; music.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (music[i].equals(fileType)) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;audio&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;other&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据文件字节大小，转换成相应的B,KB,MB,GB</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> 文件的字节大小</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 转换单位后的文件大小</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">transforSize</span><span class="params">(<span class="type">long</span> size)</span> &#123;</span><br><span class="line">        <span class="comment">//获取到的size bites，表示字节大小</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">GB</span> <span class="operator">=</span> <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">1024</span>;<span class="comment">//定义GB的计算常量</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">MB</span> <span class="operator">=</span> <span class="number">1024</span> * <span class="number">1024</span>;<span class="comment">//定义MB的计算常量</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">KB</span> <span class="operator">=</span> <span class="number">1024</span>;<span class="comment">//定义KB的计算常量</span></span><br><span class="line">        <span class="type">DecimalFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DecimalFormat</span>(<span class="string">&quot;0.00&quot;</span>);<span class="comment">//格式化小数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">resultSize</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (size / GB &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//如果当前Byte的值大于等于1GB</span></span><br><span class="line">            resultSize = df.format(size / (<span class="type">float</span>) GB) + <span class="string">&quot;GB&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (size / MB &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//如果当前Byte的值大于等于1MB</span></span><br><span class="line">            resultSize = df.format(size / (<span class="type">float</span>) MB) + <span class="string">&quot;MB&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (size / KB &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//如果当前Byte的值大于等于1KB</span></span><br><span class="line">            resultSize = df.format(size / (<span class="type">float</span>) KB) + <span class="string">&quot;KB&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            resultSize = size + <span class="string">&quot;B&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resultSize;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 读取文本文件，返回一个字符串</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> 文件路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 文本内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">readText</span><span class="params">(String fileName)</span> &#123;</span><br><span class="line"><span class="type">StringBuffer</span> <span class="variable">stringList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">System.out.println(fileName);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fileName);</span><br><span class="line">    <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;该文件不存在！&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> stringList.toString();</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(isr); </span><br><span class="line">            String str;</span><br><span class="line">            <span class="keyword">while</span> ((str = in.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//str = str.replace(&quot; &quot;, &quot;&amp;nbsp&quot;);</span></span><br><span class="line">                stringList.append(str+<span class="string">&quot;\n&quot;</span>);<span class="comment">//为了在前端正常显示，加上换行和空格转换符号,如果需要在后端显示，则去掉，注意：前端如果用innerText</span></span><br><span class="line">                <span class="comment">//显示的话，则不需要在后端加</span></span><br><span class="line">            &#125;</span><br><span class="line">            in.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;文件为空，读取出错&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stringList.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从文件中按行读取，返回List&lt;String&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> 文件路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 文本内容List&lt;String&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">readStringList</span><span class="params">(String fileName)</span>&#123;</span><br><span class="line">List&lt;String&gt; stringList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fileName);</span><br><span class="line">    <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;该文件不存在！&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> stringList;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(isr); </span><br><span class="line">            String str;</span><br><span class="line">            <span class="keyword">while</span> ((str = in.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                stringList.add(str);</span><br><span class="line">            &#125;</span><br><span class="line">            in.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;文件为空，读取出错&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stringList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断哪些是可以预览，也就是读取的文本文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> 文件路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是否可以读取</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">canPreView</span><span class="params">(String fileName)</span> &#123;</span><br><span class="line">    <span class="comment">//获取文件后缀名并转化为小写，用于后续比较</span></span><br><span class="line"><span class="type">String</span> <span class="variable">fileType</span> <span class="operator">=</span> fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>) + <span class="number">1</span>, fileName.length()).toLowerCase();</span><br><span class="line"><span class="comment">// 创建可以预览文本类型数组</span></span><br><span class="line">String canPreviewArray[] = &#123; <span class="string">&quot;txt&quot;</span>, <span class="string">&quot;java&quot;</span>, <span class="string">&quot;xml&quot;</span>, <span class="string">&quot;py&quot;</span>,<span class="string">&quot;lrc&quot;</span>,<span class="string">&quot;sql&quot;</span>,<span class="string">&quot;html&quot;</span>,<span class="string">&quot;jsp&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; canPreviewArray.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (canPreviewArray[i].equals(fileType)) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>雪花算法</title>
      <link href="/posts/29910899.html"/>
      <url>/posts/29910899.html</url>
      
        <content type="html"><![CDATA[<h3 id="pox-xml">pox.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="SnowflakeUtil">SnowflakeUtil</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.management.ManagementFactory;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.NetworkInterface;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ThreadLocalRandom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.toolkit.Sequence;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.logging.Log;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.logging.LogFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.toolkit.Assert;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.toolkit.StringPool;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.toolkit.SystemClock;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhouleibin</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SnowflakeUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Log</span> <span class="variable">log</span> <span class="operator">=</span> LogFactory</span><br><span class="line">            .getLog(com.baomidou.mybatisplus.core.toolkit.Sequence.class);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 时间起始标记点，作为基准，一般取系统的最近时间（一旦确定不能变动）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">twepoch</span> <span class="operator">=</span> <span class="number">1288834974657L</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 机器标识位数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">workerIdBits</span> <span class="operator">=</span> <span class="number">3L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">datacenterIdBits</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">maxWorkerId</span> <span class="operator">=</span> -<span class="number">1L</span> ^ (-<span class="number">1L</span> &lt;&lt; workerIdBits);</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">maxDatacenterId</span> <span class="operator">=</span> -<span class="number">1L</span> ^ (-<span class="number">1L</span> &lt;&lt; datacenterIdBits);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 毫秒内自增位</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">sequenceBits</span> <span class="operator">=</span> <span class="number">10L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">workerIdShift</span> <span class="operator">=</span> sequenceBits;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">datacenterIdShift</span> <span class="operator">=</span> sequenceBits + workerIdBits;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 时间戳左移动位</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">timestampLeftShift</span> <span class="operator">=</span> sequenceBits + workerIdBits + datacenterIdBits;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">sequenceMask</span> <span class="operator">=</span> -<span class="number">1L</span> ^ (-<span class="number">1L</span> &lt;&lt; sequenceBits);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> workerId;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据标识 ID 部分</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> datacenterId;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 并发控制</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">sequence</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 上次生产 ID 时间戳</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">lastTimestamp</span> <span class="operator">=</span> -<span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SnowflakeUtil</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.datacenterId = getDatacenterId(maxDatacenterId);</span><br><span class="line">        <span class="built_in">this</span>.workerId = getMaxWorkerId(datacenterId, maxWorkerId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 有参构造器</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> workerId     工作机器 ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> datacenterId 序列号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SnowflakeUtil</span><span class="params">(<span class="type">long</span> workerId, <span class="type">long</span> datacenterId)</span> &#123;</span><br><span class="line">        Assert.isFalse(workerId &gt; maxWorkerId || workerId &lt; <span class="number">0</span>,</span><br><span class="line">                String.format(<span class="string">&quot;worker Id can&#x27;t be greater than %d or less than 0&quot;</span>, maxWorkerId));</span><br><span class="line">        Assert.isFalse(datacenterId &gt; maxDatacenterId || datacenterId &lt; <span class="number">0</span>, String</span><br><span class="line">                .format(<span class="string">&quot;datacenter Id can&#x27;t be greater than %d or less than 0&quot;</span>, maxDatacenterId));</span><br><span class="line">        <span class="built_in">this</span>.workerId = workerId;</span><br><span class="line">        <span class="built_in">this</span>.datacenterId = datacenterId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取 maxWorkerId</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">getMaxWorkerId</span><span class="params">(<span class="type">long</span> datacenterId, <span class="type">long</span> maxWorkerId)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">mpid</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        mpid.append(datacenterId);</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> ManagementFactory.getRuntimeMXBean().getName();</span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.isEmpty(name)) &#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * GET jvmPid</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            mpid.append(name.split(StringPool.AT)[<span class="number">0</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * MAC + PID 的 hashcode 获取16个低位</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">return</span> (mpid.toString().hashCode() &amp; <span class="number">0xffff</span>) % (maxWorkerId + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据标识id部分</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">getDatacenterId</span><span class="params">(<span class="type">long</span> maxDatacenterId)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">id</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InetAddress</span> <span class="variable">ip</span> <span class="operator">=</span> InetAddress.getLocalHost();</span><br><span class="line">            <span class="type">NetworkInterface</span> <span class="variable">network</span> <span class="operator">=</span> NetworkInterface.getByInetAddress(ip);</span><br><span class="line">            <span class="keyword">if</span> (network == <span class="literal">null</span>) &#123;</span><br><span class="line">                id = <span class="number">1L</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">byte</span>[] mac = network.getHardwareAddress();</span><br><span class="line">                <span class="keyword">if</span> (<span class="literal">null</span> != mac) &#123;</span><br><span class="line">                    id = ((<span class="number">0x000000FF</span> &amp; (<span class="type">long</span>) mac[mac.length - <span class="number">2</span>])</span><br><span class="line">                            | (<span class="number">0x0000FF00</span> &amp; (((<span class="type">long</span>) mac[mac.length - <span class="number">1</span>]) &lt;&lt; <span class="number">8</span>))) &gt;&gt; <span class="number">6</span>;</span><br><span class="line">                    id = id % (maxDatacenterId + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot; getDatacenterId: &quot;</span> + e.toString());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取下一个 ID</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 下一个 ID</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="type">long</span> <span class="title function_">nextId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">timestamp</span> <span class="operator">=</span> timeGen();</span><br><span class="line">        <span class="comment">//闰秒</span></span><br><span class="line">        <span class="keyword">if</span> (timestamp &lt; lastTimestamp) &#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">offset</span> <span class="operator">=</span> lastTimestamp - timestamp;</span><br><span class="line">            <span class="keyword">if</span> (offset &lt;= <span class="number">5</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    wait(offset &lt;&lt; <span class="number">1</span>);</span><br><span class="line">                    timestamp = timeGen();</span><br><span class="line">                    <span class="keyword">if</span> (timestamp &lt; lastTimestamp) &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(String.format(</span><br><span class="line">                                <span class="string">&quot;Clock moved backwards.  Refusing to generate id for %d milliseconds&quot;</span>,</span><br><span class="line">                                offset));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(String.format(</span><br><span class="line">                        <span class="string">&quot;Clock moved backwards.  Refusing to generate id for %d milliseconds&quot;</span>,</span><br><span class="line">                        offset));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (lastTimestamp == timestamp) &#123;</span><br><span class="line">            <span class="comment">// 相同毫秒内，序列号自增</span></span><br><span class="line">            sequence = (sequence + <span class="number">1</span>) &amp; sequenceMask;</span><br><span class="line">            <span class="keyword">if</span> (sequence == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 同一毫秒的序列数已经达到最大</span></span><br><span class="line">                timestamp = tilNextMillis(lastTimestamp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 不同毫秒内，序列号置为 1 - 3 随机数</span></span><br><span class="line">            sequence = ThreadLocalRandom.current().nextLong(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        lastTimestamp = timestamp;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 时间戳部分 | 数据中心部分 | 机器标识部分 | 序列号部分</span></span><br><span class="line">        <span class="keyword">return</span> ((timestamp - twepoch) &lt;&lt; timestampLeftShift) | (datacenterId &lt;&lt; datacenterIdShift)</span><br><span class="line">                | (workerId &lt;&lt; workerIdShift) | sequence;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">long</span> <span class="title function_">tilNextMillis</span><span class="params">(<span class="type">long</span> lastTimestamp)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">timestamp</span> <span class="operator">=</span> timeGen();</span><br><span class="line">        <span class="keyword">while</span> (timestamp &lt;= lastTimestamp) &#123;</span><br><span class="line">            timestamp = timeGen();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> timestamp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">long</span> <span class="title function_">timeGen</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SystemClock.now();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">            Sequence s=<span class="keyword">new</span> <span class="title class_">Sequence</span>(<span class="number">1L</span>,<span class="number">0L</span>);</span><br><span class="line">            System.out.println(System.currentTimeMillis());</span><br><span class="line">            System.out.println(s.nextId());</span><br><span class="line">            System.out.println(<span class="string">&quot;1714782348420096&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;2789631728321537&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自动填充时间</title>
      <link href="/posts/f4dcaf14.html"/>
      <url>/posts/f4dcaf14.html</url>
      
        <content type="html"><![CDATA[<h3 id="BsSupplier文件">BsSupplier文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhaowenlong</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2022-08-12</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BsSupplier</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 主键id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableId(value = &quot;id&quot;, type = IdType.ASSIGN_ID)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 供应商名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String supplierName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 供应商id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Long spplierId;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 联系人姓名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String contactsName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 联系人id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Long contactsId;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建人id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Long createUserId;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新人id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Long updateUserId;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 电话</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 邮箱</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 登录账号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String supplierLoginName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 登录密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String supplierLoginPwd;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 合作状态</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer state;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建时间</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新时间</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> Date updateTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除状态（否：0，是：1）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableLogic</span></span><br><span class="line">    <span class="keyword">private</span> Integer isDeleted;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="MybatisPlusHandler文件">MybatisPlusHandler文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Revision history</span></span><br><span class="line"><span class="comment"> * -------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * Date Author Note</span></span><br><span class="line"><span class="comment"> * -------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"> * creat</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;createTime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis工具类</title>
      <link href="/posts/125ac910.html"/>
      <url>/posts/125ac910.html</url>
      
        <content type="html"><![CDATA[<h3 id="RedisConfig">RedisConfig</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonAutoDetect;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.PropertyAccessor;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义 Redis 模板</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiaoHang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022-06-09 22:06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory factory)</span> &#123;</span><br><span class="line">        <span class="comment">// 定义泛型为 &lt;String, Object&gt; 的 RedisTemplate</span></span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>&lt;String, Object&gt;();</span><br><span class="line">        <span class="comment">// 设置连接工厂</span></span><br><span class="line">        template.setConnectionFactory(factory);</span><br><span class="line">        <span class="comment">// 定义 Json 序列化</span></span><br><span class="line">        <span class="type">Jackson2JsonRedisSerializer</span> <span class="variable">jackson2JsonRedisSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jackson2JsonRedisSerializer</span>(Object.class);</span><br><span class="line">        <span class="comment">// Json 转换工具</span></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">om</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        jackson2JsonRedisSerializer.setObjectMapper(om);</span><br><span class="line">        <span class="comment">// 定义 String 序列化</span></span><br><span class="line">        <span class="type">StringRedisSerializer</span> <span class="variable">stringRedisSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>();</span><br><span class="line">        <span class="comment">// key采用String的序列化方式</span></span><br><span class="line">        template.setKeySerializer(stringRedisSerializer);</span><br><span class="line">        <span class="comment">// hash的key也采用String的序列化方式</span></span><br><span class="line">        template.setHashKeySerializer(stringRedisSerializer);</span><br><span class="line">        <span class="comment">// value序列化方式采用jackson</span></span><br><span class="line">        template.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        <span class="comment">// hash的value序列化方式采用jackson</span></span><br><span class="line">        template.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.afterPropertiesSet();</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Redis">Redis</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.sail.redisspringboot.util;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.CollectionUtils;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Redis 工具类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiaoHang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022-06-09 22:15</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisUtil</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line">    <span class="comment">// =============================Common 基础============================</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 指定缓存失效时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time 时间(秒)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">expire</span><span class="params">(String key, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                redisTemplate.expire(key, time, TimeUnit.SECONDS);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据key 获取过期时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键 不能为null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 时间(秒) 返回0代表为永久有效</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getExpire</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="comment">// 如果返回值为 null，则返回 0L</span></span><br><span class="line">        <span class="keyword">return</span> redisTemplate.getExpire(key, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断key是否存在</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true 存在 false不存在</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasKey</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Boolean.TRUE.equals(redisTemplate.hasKey(key));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除缓存</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 可以传一个值 或多个</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">del</span><span class="params">(String... key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (key != <span class="literal">null</span> &amp;&amp; key.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (key.length == <span class="number">1</span>) &#123;</span><br><span class="line">                redisTemplate.delete(key[<span class="number">0</span>]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                redisTemplate.delete((Collection&lt;String&gt;) CollectionUtils.arrayToList(key));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ============================String 字符串=============================</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 普通缓存获取</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> key == <span class="literal">null</span> ? <span class="literal">null</span> : redisTemplate.opsForValue().get(key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 普通缓存放入</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true成功 false失败</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">set</span><span class="params">(String key, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForValue().set(key, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 普通缓存放入并设置时间</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time  时间(秒) time要大于0 如果time小于等于0 将设置无限期</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true成功 false 失败</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">set</span><span class="params">(String key, Object value, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                redisTemplate.opsForValue().set(key, value, time,</span><br><span class="line">                                                TimeUnit.SECONDS);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                set(key, value);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 递增</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> delta 要增加几(大于0)</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">incr</span><span class="params">(String key, <span class="type">long</span> delta)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (delta &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;递增因子必须大于0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForValue().increment(key, delta);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 递减</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> delta 要减少几(小于0)</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">decr</span><span class="params">(String key, <span class="type">long</span> delta)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (delta &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;递减因子必须大于0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForValue().increment(key, -delta);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">// ===============================List 列表=================================</span></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 获取list缓存的内容</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> start 开始</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> end   结束 0 到 -1代表所有值</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">lGet</span><span class="params">(String key, <span class="type">long</span> start, <span class="type">long</span> end)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().range(key, start, end);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 获取list缓存的长度</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">lGetListSize</span><span class="params">(String key)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().size(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 通过索引 获取list中的值</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> index 索引 index&gt;=0时， 0 表头，1 第二个元素，依次类推；index&lt;0</span></span><br><span class="line"><span class="comment">            *              时，-1，表尾，-2倒数第二个元素，依次类推</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> Object <span class="title function_">lGetIndex</span><span class="params">(String key, <span class="type">long</span> index)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().index(key, index);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 将list放入缓存</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lSet</span><span class="params">(String key, Object value)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPush(key, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 将list放入缓存</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> time  时间(秒)</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lSet</span><span class="params">(String key, Object value, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPush(key, value);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            expire(key, time);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 将list放入缓存</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@return</span> 赋值结果</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lSet</span><span class="params">(String key, List&lt;Object&gt; value)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPushAll(key, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 将list放入缓存</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> time  时间(秒)</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@return</span> 赋值结果</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lSet</span><span class="params">(String key, List&lt;Object&gt; value, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPushAll(key, value);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            expire(key, time);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 根据索引修改list中的某条数据</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> index 索引</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@return</span> 赋值结果</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lUpdateIndex</span><span class="params">(String key, <span class="type">long</span> index, Object value)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().set(key, index, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 移除N个值为value</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> count 移除多少个</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@return</span> 移除的个数</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">lRemove</span><span class="params">(String key, <span class="type">long</span> count, Object value)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().remove(key, count, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">// ============================Set 集合=============================</span></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 根据key获取Set中的所有值</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> Set&lt;Object&gt; <span class="title function_">sGet</span><span class="params">(String key)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().members(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 根据value从一个set中查询,是否存在</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@return</span> true 存在 false不存在</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">sHasKey</span><span class="params">(String key, Object value)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().isMember(key, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 将数据放入set缓存</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key    键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> values 值 可以是多个</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@return</span> 成功个数</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">sSet</span><span class="params">(String key, Object... values)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().add(key, values);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 将set数据放入缓存</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key    键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> time   时间(秒)</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> values 值 可以是多个</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@return</span> 成功个数</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">sSetAndTime</span><span class="params">(String key, <span class="type">long</span> time, Object... values)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForSet().add(key, values);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            expire(key, time);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 获取set缓存的长度</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">sGetSetSize</span><span class="params">(String key)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().size(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 移除值为value的</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key    键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> values 值 可以是多个</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@return</span> 移除的个数</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">setRemove</span><span class="params">(String key, Object... values)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().remove(key, values);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">// ================================Hash 哈希=================================</span></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * HashGet</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key  键 不能为null</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> item 项 不能为null</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> Object <span class="title function_">hget</span><span class="params">(String key, String item)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForHash().get(key, item);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 获取hashKey对应的所有键值</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@return</span> 对应的多个键值</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> Map&lt;Object, Object&gt; <span class="title function_">hmget</span><span class="params">(String key)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForHash().entries(key);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * HashSet</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key 键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> map 对应多个键值</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hmset</span><span class="params">(String key, Map&lt;String, Object&gt; map)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().putAll(key, map);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * HashSet 并设置时间</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key  键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> map  对应多个键值</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> time 时间(秒)</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@return</span> true成功 false失败</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hmset</span><span class="params">(String key, Map&lt;String, Object&gt; map, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().putAll(key, map);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            expire(key, time);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 向一张hash表中放入数据,如果不存在将创建</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> item  项</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@return</span> true 成功 false失败</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hset</span><span class="params">(String key, String item, Object value)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().put(key, item, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 向一张hash表中放入数据,如果不存在将创建</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key   键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> item  项</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> value 值</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> time  时间(秒) 注意:如果已存在的hash表有时间,这里将会替换原有的时间</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@return</span> true 成功 false失败</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hset</span><span class="params">(String key, String item, Object value, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().put(key, item, value);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            expire(key, time);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 删除hash表中的值</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key  键 不能为null</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> item 项 可以使多个 不能为null</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hdel</span><span class="params">(String key, Object... item)</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().delete(key, item);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 判断hash表中是否有该项的值</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key  键 不能为null</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> item 项 不能为null</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@return</span> true 存在 false不存在</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hHasKey</span><span class="params">(String key, String item)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForHash().hasKey(key, item);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * hash递增 如果不存在,就会创建一个 并把新增后的值返回</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key  键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> item 项</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> by   要增加几(大于0)</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">hincr</span><span class="params">(String key, String item, <span class="type">double</span> by)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForHash().increment(key, item, by);</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * hash递减</span></span><br><span class="line"><span class="comment">            *</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> key  键</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> item 项</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> by   要减少记(小于0)</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">hdecr</span><span class="params">(String key, String item, <span class="type">double</span> by)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForHash().increment(key, item, -by);</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/posts/0.html"/>
      <url>/posts/0.html</url>
      
        <content type="html"><![CDATA[<h1>node 与node-sass</h1><table><thead><tr><th><strong>Node.js 版本</strong></th><th><strong>node-sass 版本</strong></th></tr></thead><tbody><tr><td>Node 20</td><td>9.0+</td></tr><tr><td>Node 19</td><td>8.0+</td></tr><tr><td>Node 18</td><td>8.0+</td></tr><tr><td>Node 17</td><td>7.0+, &lt;8.0</td></tr><tr><td>Node 16</td><td>6.0+</td></tr><tr><td>Node 15</td><td>5.0+, &lt;7.0</td></tr><tr><td>Node 14</td><td>4.14+, &lt;9.0</td></tr><tr><td>Node 13</td><td>4.13+, &lt;5.0</td></tr><tr><td>Node 12</td><td>4.12+, &lt;8.0</td></tr><tr><td>Node 11</td><td>4.10+, &lt;5.0</td></tr><tr><td>Node 10</td><td>4.9+, &lt;6.0</td></tr><tr><td>Node 8</td><td>4.5.3+, &lt;5.0</td></tr><tr><td>Node &lt;8</td><td>&lt;5.0</td></tr></tbody></table><table><thead><tr><th><strong>sass-loader</strong></th><th><strong>node-sass</strong></th></tr></thead><tbody><tr><td>sass-loader 4.1.1</td><td>node-sass 4.3.0</td></tr><tr><td>sass-loader 7.0.3</td><td>node-sass 4.7.2</td></tr><tr><td>sass-loader 7.3.1</td><td>node-sass 4.7.2</td></tr><tr><td>sass-loader 7.3.1</td><td>node-sass 4.14.1</td></tr><tr><td>sass-loader 10.0.1</td><td>node-sass 6.0.1</td></tr></tbody></table><h1>node14</h1><p><strong>安装node-sass</strong></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install <span class="keyword">node</span><span class="title">-sass</span>@<span class="number">4</span></span><br></pre></td></tr></table></figure><p><strong>安装sass-loader</strong></p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install sass-<span class="symbol">loader@</span><span class="number">7</span></span><br></pre></td></tr></table></figure><h1>node16</h1><p><strong>安装node-sass</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install node-sass@<span class="number">6</span></span><br></pre></td></tr></table></figure><p><strong>安装sass-loader</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install sass-loader@<span class="number">10</span></span><br></pre></td></tr></table></figure><h1>Vue对应的Vuex与Vue-router版</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vue2==&gt;vuex3==&gt;vue-router3</span><br><span class="line"></span><br><span class="line">vue3==&gt;vuex4==&gt;vue-router3</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>实现打包操作</title>
      <link href="/posts/9d63dfe5.html"/>
      <url>/posts/9d63dfe5.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://blog.csdn.net/benlalagang/article/details/126094291">https://blog.csdn.net/benlalagang/article/details/126094291</a><br>在 vue.config.js中添加一下操作</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">module.exports = defineConfig(&#123;</span><br><span class="line"></span><br><span class="line">    //基本路径 文件打包后放的位置</span><br><span class="line">    publicPath: <span class="string">&#x27;./&#x27;</span>,</span><br><span class="line">    //默认输出文件夹为dist，填入的名字为打包后的文件名</span><br><span class="line">    outputDir: <span class="string">&#x27;pary&#x27;</span>,</span><br><span class="line">    // 放置生成的静态资源 (js、css、img、fonts) 的 (相对于 outputDir 的) 目录。资源放的目录</span><br><span class="line">    assetsDir: <span class="string">&#x27;./static&#x27;</span>,</span><br><span class="line">    // 指定生成的 index.html 的输出路径 (相对于 outputDir)。也可以是一个绝对路径 index的路劲和名字</span><br><span class="line">    indexPath: <span class="string">&#x27;./index.html&#x27;</span>,</span><br><span class="line">    //打包后是否生成<span class="built_in">map</span>文件，<span class="built_in">map</span>文件能看到错误代码位置，设置为false不生成<span class="built_in">map</span>文件，打包体积缩小</span><br><span class="line">    productionSourceMap: false,</span><br><span class="line"></span><br><span class="line">    transpileDependencies: true,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        <span class="built_in">open</span>: true,</span><br><span class="line">        host: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">        port: <span class="number">8889</span>,</span><br><span class="line">        proxy: proxyObj</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>在控制台输入  npm run build</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure><p>打包中<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081546065.png" alt="image.png"><br>打包后生成一个名为 pary<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081546845.png" alt="image.png"></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现导入导出功能</title>
      <link href="/posts/9d63dfe5.html"/>
      <url>/posts/9d63dfe5.html</url>
      
        <content type="html"><![CDATA[<p><strong>参考</strong>：<a href="https://blog.csdn.net/weixin_44834981/article/details/129380891">Vue 使用 Export2Excel.js 导出多 sheet 的 excel_和世界不一样，那就不一样！的博客-CSDN博客</a><br>项目需求，导出多sheet的excel表格。具体思路是：后端返回json数据，前端根据数据和具体的几项字段去导出excel表格，多sheet，多页表格到一个excel表里面，具体思路 根据Export2Excel插件，并修改插件Export2Excel完成导出多页(多个sheet)的excel</p><h3 id="1-安装依赖-插件">1.安装依赖(插件)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install file-saver --save</span><br><span class="line">npm install xlsx --save</span><br><span class="line">npm install script-loader --save-dev</span><br></pre></td></tr></table></figure><h3 id="2-下载Blob-js和-Export2Excel-js">2.下载Blob.js和 Export2Excel.js</h3><p>Blob.js文件(utils/Blob.js)<br><a href="https://www.yuque.com/attachments/yuque/0/2023/js/29786728/1696731946772-8ea7ebac-7f57-41e2-af38-15e7ab3f3eb0.js?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fjs%2F29786728%2F1696731946772-8ea7ebac-7f57-41e2-af38-15e7ab3f3eb0.js%22%2C%22name%22%3A%22Blob.js%22%2C%22size%22%3A6896%2C%22ext%22%3A%22js%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22u58e33a4f-7ade-4a30-afcb-a1d19e9daf7%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22text%2Fjavascript%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22uf17e7cfb%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D">Blob.js</a><br>Export2Excel.js文件(utils/Export2Excel.js)修改过的 Export2Excel.js 主要修改 export_json_to_excel 函数<br><a href="https://www.yuque.com/attachments/yuque/0/2023/js/29786728/1696731942427-4ae61c35-c2fb-4628-9587-7b58cdef4bbc.js?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fjs%2F29786728%2F1696731942427-4ae61c35-c2fb-4628-9587-7b58cdef4bbc.js%22%2C%22name%22%3A%22Export2Excel.js%22%2C%22size%22%3A7861%2C%22ext%22%3A%22js%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22u9be8f6de-7a9a-4958-aa85-ad8e685fdf7%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22text%2Fjavascript%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22u9283420e%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D">Export2Excel.js</a></p><h3 id="3-封装setMethods-js">3.封装setMethods.js</h3><p>setMethods.js 文件 (utils/setMethods.js)<br><a href="https://www.yuque.com/attachments/yuque/0/2023/js/29786728/1696731898626-34ab5ec1-81d8-4201-bb11-54e417cc0d58.js?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fjs%2F29786728%2F1696731898626-34ab5ec1-81d8-4201-bb11-54e417cc0d58.js%22%2C%22name%22%3A%22setMethods.js%22%2C%22size%22%3A2678%2C%22ext%22%3A%22js%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22u9604622d-54ba-4326-be46-576e57c14bb%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22text%2Fjavascript%22%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22uffc19b4f%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D">setMethods.js</a></p><h3 id="4-调用封装的函数">4.调用封装的函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">//导出按钮</span><br><span class="line">    &lt;el-button class=&quot;ml-5&quot; style=&quot;margin-left:10px&quot; type=&quot;primary&quot; @click=&quot;downloadExcel()&quot;&gt;导出</span><br><span class="line"></span><br><span class="line">                                                                                               //导入方法</span><br><span class="line">      import &#123; json2excel &#125; from &#x27;@/utils/setMethods.js&#x27;</span><br><span class="line"></span><br><span class="line">      // 下载excel</span><br><span class="line">      async downloadExcel() &#123;</span><br><span class="line"></span><br><span class="line">        var excelDatas = [</span><br><span class="line">          &#123;</span><br><span class="line">            tHeader: [&#x27;Id&#x27;, &#x27;Title&#x27;, &#x27;Author&#x27;, &#x27;Readings&#x27;, &#x27;Date&#x27;], // sheet表一头部</span><br><span class="line">            filterVal: [&#x27;id&#x27;, &#x27;title&#x27;, &#x27;author&#x27;, &#x27;pageviews&#x27;, &#x27;display_time&#x27;], // 表一的数据字段</span><br><span class="line">            tableDatas: this.list, // 表一的整体json数据</span><br><span class="line">            sheetName: &#x27;sheet1&#x27; // 表一的sheet名字</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            tHeader: [&#x27;序号&#x27;, &#x27;标题&#x27;, &#x27;作者&#x27;, &#x27;服务&#x27;],</span><br><span class="line">            filterVal: [&#x27;id&#x27;, &#x27;title&#x27;, &#x27;author&#x27;, &#x27;reviewer&#x27;],</span><br><span class="line">            tableDatas: this.list,</span><br><span class="line">            sheetName: &#x27;sheet2&#x27;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            tHeader: [&#x27;序号&#x27;, &#x27;名字&#x27;, &#x27;描述&#x27;],</span><br><span class="line">            filterVal: [&#x27;userId&#x27;, &#x27;userName&#x27;, &#x27;userDescription&#x27;],</span><br><span class="line">            tableDatas: this.list,</span><br><span class="line">            sheetName: &#x27;sheet5555&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">        //   引入的函数</span><br><span class="line">        json2excel(excelDatas, &#x27;数据报表&#x27;, true, &#x27;xlsx&#x27;)</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><h3 id="5-效果图">5.效果图</h3><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081546880.png" alt="image.png"></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现打印功能</title>
      <link href="/posts/be50bf80.html"/>
      <url>/posts/be50bf80.html</url>
      
        <content type="html"><![CDATA[<h1>1.代码</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=&quot;margin: 10px 0&quot;&gt;</span><br><span class="line">    &lt;el-button class=&quot;ml-5&quot; style=&quot;margin-left:10px&quot; type=&quot;primary&quot; @click=&quot;load&quot;&gt;搜索&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;onPrint()&quot;&gt;打印&lt;/el-button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 打印清册表 --&gt;</span><br><span class="line">    &lt;el-dialog</span><br><span class="line">        title=&quot;打印订单表&quot;</span><br><span class="line">        :visible.sync=&quot;openSave&quot;</span><br><span class="line">        append-to-body</span><br><span class="line">        :close-on-click-modal=&quot;false&quot;</span><br><span class="line">        width=&quot;1000px&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;div id=&quot;printId&quot;&gt;</span><br><span class="line">        &lt;table width=&quot;900&quot; border=&quot;1&quot; cellspacing=&quot;0&quot; style=&quot;margin: auto&quot;&gt;</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;td style=&quot;font-weight: bold&quot;&gt;单据编号&lt;/td&gt;</span><br><span class="line">            &lt;td style=&quot;font-weight: bold&quot;&gt;采购日期&lt;/td&gt;</span><br><span class="line">            &lt;td style=&quot;font-weight: bold&quot;&gt;供应商&lt;/td&gt;</span><br><span class="line">            &lt;td style=&quot;font-weight: bold&quot;&gt;采购组织&lt;/td&gt;</span><br><span class="line">            &lt;td style=&quot;font-weight: bold&quot;&gt;物料编码&lt;/td&gt;</span><br><span class="line">            &lt;td style=&quot;font-weight: bold&quot;&gt;物料名称&lt;/td&gt;</span><br><span class="line">            &lt;td style=&quot;font-weight: bold&quot;&gt;型号&lt;/td&gt;</span><br><span class="line">            &lt;td style=&quot;font-weight: bold&quot;&gt;单位&lt;/td&gt;</span><br><span class="line">            &lt;td style=&quot;font-weight: bold&quot;&gt;采购数量&lt;/td&gt;</span><br><span class="line">            &lt;td style=&quot;font-weight: bold&quot;&gt;含税单价&lt;/td&gt;</span><br><span class="line">            &lt;td style=&quot;font-weight: bold&quot;&gt;价税合计&lt;/td&gt;</span><br><span class="line">            &lt;td style=&quot;font-weight: bold&quot;&gt;店间&lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">          &lt;tr v-for=&quot;(item,index) of tableData&quot; :key=&quot;item.FBillNo+index&quot;&gt;</span><br><span class="line">            &lt;td width=&quot;100px&quot; v-text=&quot;item.FBillNo&quot;&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td width=&quot;100px&quot; v-text=&quot;item.FDate&quot;&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td width=&quot;100px&quot; v-text=&quot;item.FPurchaseOrgName&quot;&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td width=&quot;100px&quot; v-text=&quot;item.FSupplierName&quot;&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td width=&quot;100px&quot; v-text=&quot;item.FMaterialId&quot;&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td width=&quot;100px&quot; v-text=&quot;item.FMaterialName&quot;&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td width=&quot;100px&quot; v-text=&quot;item.FModel&quot;&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td width=&quot;100px&quot; v-text=&quot;item.FUnitName&quot;&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td width=&quot;130px&quot; v-text=&quot;item.FQty&quot;&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td width=&quot;100px&quot; v-text=&quot;item.FTaxPrice&quot;&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td width=&quot;100px&quot; v-text=&quot;item.FAllAmount_LC&quot;&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td width=&quot;100px&quot; v-text=&quot;item.F_DJ&quot;&gt;&lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;addDealsBut&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button @click=&quot;cancelBut&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;Bill&#x27;,</span><br><span class="line">  //使用子组件</span><br><span class="line">  components: &#123;</span><br><span class="line">    BillDetails</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      /* 是否显示弹出层 */</span><br><span class="line">      openSave: false,</span><br><span class="line">      //列表数据</span><br><span class="line">      tableData: [&#123;</span><br><span class="line">        FBillNo: &quot;&quot;,</span><br><span class="line">        FPurchaseOrgName: &quot;&quot;,</span><br><span class="line">        FMaterialId: &quot;&quot;,</span><br><span class="line">        FMaterialName: &quot;&quot;,</span><br><span class="line">        FSupplierName: &quot;&quot;,</span><br><span class="line">        FUnitName: &quot;&quot;,</span><br><span class="line">      &#125;],</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    // 请求分页查询数据</span><br><span class="line">    this.load()</span><br><span class="line">    this.bill = this.$route.query.bill;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    //跳转到网页打印</span><br><span class="line">    addDealsBut() &#123;</span><br><span class="line">      let diyHtml = document.querySelector(&quot;#printId&quot;).innerHTML;</span><br><span class="line">      window.document.body.innerHTML = diyHtml;</span><br><span class="line">      window.print();</span><br><span class="line">      window.location.reload();</span><br><span class="line">    &#125;,</span><br><span class="line">    //打印</span><br><span class="line">    onPrint(data) &#123;</span><br><span class="line">      console.log(data)</span><br><span class="line">      this.openSave = true;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 打印取消</span><br><span class="line">    cancelBut() &#123;</span><br><span class="line">      this.openSave = false;</span><br><span class="line">      this.tableData = null;</span><br><span class="line">      this.load()</span><br><span class="line">    &#125;,</span><br><span class="line">    //搜索</span><br><span class="line">    load() &#123;</span><br><span class="line">      let data = &#123;</span><br><span class="line">        FormId: &quot;PUR_PurchaseOrder&quot;,</span><br><span class="line">        // FieldKeys: &quot;FID,FBillNo,FDocumentStatus,FDate,FPurchaseOrgId.FNumber,FPurchaseOrgId.FName&quot;,</span><br><span class="line">        FieldKeys: &quot;FBillNo,FDocumentStatus,FTaxPrice,FAllAmount_LC,F_DJ,FDate,FSupplierId.FName,FPurchaseOrgId.FNumber,FPurchaseOrgId.FName,FModel,FSupplierId.FNumber,FPurchaserId,FMaterialId.FNumber,FMaterialId,FMaterialId.FName,FModel,FQty,FPrice,FUnitId.FNumber,FUnitId.FName&quot;,</span><br><span class="line">        OrderString: &quot;FBillNo desc&quot;,</span><br><span class="line">        TopRowCount: 0,</span><br><span class="line">        StartRow: 0,</span><br><span class="line">        Limit: 1000,</span><br><span class="line">      &#125;</span><br><span class="line">      list(data).then(res =&gt; &#123;</span><br><span class="line">        this.tableData = res.table</span><br><span class="line">        let FPurchaseOrgNames = [];</span><br><span class="line">        let FMaterialIds = [];</span><br><span class="line">        let FMaterialNames = [];</span><br><span class="line">        let FUnitNames = [];</span><br><span class="line">        let FSupplierNames = [];</span><br><span class="line">        res.table.forEach(function (item) &#123;</span><br><span class="line">          //item 就是当日按循环到的对象</span><br><span class="line">          //index是循环的索引，从0开始</span><br><span class="line">          let FPurchaseOrgName = item[&#x27;FPurchaseOrgId.FName&#x27;];</span><br><span class="line">          let FMaterialId = item[&#x27;FMaterialId.FNumber&#x27;];</span><br><span class="line">          let FMaterialName = item[&#x27;FMaterialId.FName&#x27;];</span><br><span class="line">          let FUnitName = item[&#x27;FUnitId.FName&#x27;];</span><br><span class="line">          let FSupplierName = item[&#x27;FSupplierId.FName&#x27;];</span><br><span class="line"></span><br><span class="line">          FPurchaseOrgNames.push(FPurchaseOrgName)</span><br><span class="line">          FMaterialIds.push(FMaterialId)</span><br><span class="line">          FMaterialNames.push(FMaterialName)</span><br><span class="line">          FUnitNames.push(FUnitName)</span><br><span class="line">          FSupplierNames.push(FSupplierName)</span><br><span class="line">        &#125;);</span><br><span class="line">        this.tableData.forEach(function (item, index) &#123;</span><br><span class="line">          item.FDate = moment(item.FDate).format(&quot;YYYY-MM-DD&quot;);</span><br><span class="line">          item.FPurchaseOrgName = FPurchaseOrgNames[index];</span><br><span class="line">          item.FMaterialId = FMaterialIds[index];</span><br><span class="line">          item.FMaterialName = FMaterialNames[index];</span><br><span class="line">          item.FUnitName = FUnitNames[index];</span><br><span class="line">          item.FSupplierName = FSupplierNames[index];</span><br><span class="line">          //保留小数点后两位</span><br><span class="line">          item.FQty = parseFloat(item.FQty).toFixed(2)</span><br><span class="line">          item.FTaxPrice = parseFloat(item.FTaxPrice).toFixed(2)</span><br><span class="line">          item.FAllAmount_LC = parseFloat(item.FAllAmount_LC).toFixed(2)</span><br><span class="line">        &#125;)</span><br><span class="line">        this.total = res.table.length</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.headerBg &#123;</span><br><span class="line">  background: #eee !important;</span><br><span class="line">&#125;</span><br><span class="line">/* 在h1元素前始终插入分页符 */</span><br><span class="line">@media print &#123;</span><br><span class="line">  @page &#123;</span><br><span class="line">    size: auto;</span><br><span class="line">    margin: 20px 30px;</span><br><span class="line">  &#125;</span><br><span class="line">  .footer &#123;page-break-after: always;&#125;</span><br><span class="line">  #mainBody&#123;</span><br><span class="line">    margin-top:0 !important;</span><br><span class="line">    margin-bottom:0 !important;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">//解决右边框不显现问题</span><br><span class="line">body &#123;</span><br><span class="line">  font-family: &quot;微软雅黑&quot;,Verdana,SimHei,&quot;Microsoft JhengHei&quot;,Tahoma;</span><br><span class="line">  line-height: 1.5;</span><br><span class="line">  background-color: #ffffff;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  margin: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 打印容器</span><br><span class="line">#mainBody &#123;</span><br><span class="line">  margin: 20px 20px 0 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.break-after &#123;</span><br><span class="line">//page-break-after: always;</span><br><span class="line">  page-break-before: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 打印内容宽高</span><br><span class="line">.printContainer &#123;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">  width: 1052px;</span><br><span class="line">  height: 1480px;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.printTitle &#123;</span><br><span class="line">  font-size: 22px;</span><br><span class="line">  font-weight: bold;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.printnav &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.signature_footer &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  width: 100%;</span><br><span class="line">  bottom: -20px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-around;</span><br><span class="line">  font-size: 20px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">          </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现图标下拉</title>
      <link href="/posts/9ff8e3b8.html"/>
      <url>/posts/9ff8e3b8.html</url>
      
        <content type="html"><![CDATA[<p>参考: <a href="https://www.yii666.com/blog/692276.html">https://www.yii666.com/blog/692276.html</a></p><h1>展示效果</h1><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081545140.png" alt="img"></p><h1>代码展示</h1><h2 id="封装icon">封装icon</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">export const elementIcons = [&quot;platform-eleme&quot;, &quot;eleme&quot;, &quot;delete-solid&quot;, &quot;delete&quot;, &quot;s-tools&quot;, &quot;setting&quot;, &quot;user-solid&quot;, &quot;user&quot;, &quot;phone&quot;, &quot;phone-outline&quot;, &quot;more&quot;, </span><br><span class="line">  &quot;more-outline&quot;, &quot;star-on&quot;, &quot;star-off&quot;, &quot;s-goods&quot;, &quot;goods&quot;, &quot;warning&quot;, &quot;warning-outline&quot;, &quot;question&quot;, &quot;info&quot;, &quot;remove&quot;, &quot;circle-plus&quot;, &quot;success&quot;, &quot;error&quot;, &quot;zoom-in&quot;,</span><br><span class="line">  &quot;zoom-out&quot;, &quot;remove-outline&quot;, &quot;circle-plus-outline&quot;, &quot;circle-check&quot;, &quot;circle-close&quot;, &quot;s-help&quot;, &quot;help&quot;, &quot;minus&quot;, &quot;plus&quot;, &quot;check&quot;, &quot;close&quot;, &quot;picture&quot;, &quot;picture-outline&quot;,</span><br><span class="line">  &quot;picture-outline-round&quot;, &quot;upload&quot;, &quot;upload2&quot;, &quot;download&quot;, &quot;camera-solid&quot;, &quot;camera&quot;, &quot;video-camera-solid&quot;, &quot;video-camera&quot;, &quot;message-solid&quot;, &quot;bell&quot;, &quot;s-cooperation&quot;,</span><br><span class="line">  &quot;s-order&quot;, &quot;s-platform&quot;, &quot;s-fold&quot;, &quot;s-unfold&quot;, &quot;s-operation&quot;, &quot;s-promotion&quot;, &quot;s-home&quot;, &quot;s-release&quot;, &quot;s-ticket&quot;, &quot;s-management&quot;, &quot;s-open&quot;, &quot;s-shop&quot;, &quot;s-marketing&quot;,</span><br><span class="line">  &quot;s-flag&quot;, &quot;s-comment&quot;, &quot;s-finance&quot;, &quot;s-claim&quot;, &quot;s-custom&quot;, &quot;s-opportunity&quot;, &quot;s-data&quot;, &quot;s-check&quot;, &quot;s-grid&quot;, &quot;menu&quot;, &quot;share&quot;, &quot;d-caret&quot;, &quot;caret-left&quot;, &quot;caret-right&quot;,</span><br><span class="line">  &quot;caret-bottom&quot;, &quot;caret-top&quot;, &quot;bottom-left&quot;, &quot;bottom-right&quot;, &quot;back&quot;, &quot;right&quot;, &quot;bottom&quot;, &quot;top&quot;, &quot;top-left&quot;, &quot;top-right&quot;, &quot;arrow-left&quot;, &quot;arrow-right&quot;, &quot;arrow-down&quot;, </span><br><span class="line">  &quot;arrow-up&quot;, &quot;d-arrow-left&quot;, &quot;d-arrow-right&quot;, &quot;video-pause&quot;, &quot;video-play&quot;, &quot;refresh&quot;, &quot;refresh-right&quot;, &quot;refresh-left&quot;, &quot;finished&quot;, &quot;sort&quot;, &quot;sort-up&quot;, &quot;sort-down&quot;, </span><br><span class="line">  &quot;rank&quot;, &quot;loading&quot;, &quot;view&quot;, &quot;c-scale-to-original&quot;, &quot;date&quot;, &quot;edit&quot;, &quot;edit-outline&quot;, &quot;folder&quot;, &quot;folder-opened&quot;, &quot;folder-add&quot;, &quot;folder-remove&quot;, &quot;folder-delete&quot;, </span><br><span class="line">  &quot;folder-checked&quot;, &quot;tickets&quot;, &quot;document-remove&quot;, &quot;document-delete&quot;, &quot;document-copy&quot;, &quot;document-checked&quot;, &quot;document&quot;, &quot;document-add&quot;, &quot;printer&quot;, &quot;paperclip&quot;, &quot;takeaway-box&quot;,</span><br><span class="line">  &quot;search&quot;, &quot;monitor&quot;, &quot;attract&quot;, &quot;mobile&quot;, &quot;scissors&quot;, &quot;umbrella&quot;, &quot;headset&quot;, &quot;brush&quot;, &quot;mouse&quot;, &quot;coordinate&quot;, &quot;magic-stick&quot;, &quot;reading&quot;, &quot;data-line&quot;, &quot;data-board&quot;, </span><br><span class="line">  &quot;pie-chart&quot;, &quot;data-analysis&quot;, &quot;collection-tag&quot;, &quot;film&quot;, &quot;suitcase&quot;, &quot;suitcase-1&quot;, &quot;receiving&quot;, &quot;collection&quot;, &quot;files&quot;, &quot;notebook-1&quot;, &quot;notebook-2&quot;, &quot;toilet-paper&quot;,</span><br><span class="line">       &quot;office-building&quot;, &quot;school&quot;, &quot;table-lamp&quot;, &quot;house&quot;, &quot;no-smoking&quot;, &quot;smoking&quot;, &quot;shopping-cart-full&quot;, &quot;shopping-cart-1&quot;, &quot;shopping-cart-2&quot;, &quot;shopping-bag-1&quot;, </span><br><span class="line">       &quot;shopping-bag-2&quot;, &quot;sold-out&quot;, &quot;sell&quot;, &quot;present&quot;, &quot;box&quot;, &quot;bank-card&quot;, &quot;money&quot;, &quot;coin&quot;, &quot;wallet&quot;, &quot;discount&quot;, &quot;price-tag&quot;, &quot;news&quot;, &quot;guide&quot;, &quot;male&quot;, &quot;female&quot;,</span><br><span class="line">        &quot;thumb&quot;, &quot;cpu&quot;, &quot;link&quot;, &quot;connection&quot;, &quot;open&quot;, &quot;turn-off&quot;, &quot;set-up&quot;, &quot;chat-round&quot;, &quot;chat-line-round&quot;, &quot;chat-square&quot;, &quot;chat-dot-round&quot;, &quot;chat-dot-square&quot;,</span><br><span class="line">         &quot;chat-line-square&quot;, &quot;message&quot;, &quot;postcard&quot;, &quot;position&quot;, &quot;turn-off-microphone&quot;, &quot;microphone&quot;, &quot;close-notification&quot;, &quot;bangzhu&quot;, &quot;time&quot;, &quot;odometer&quot;, &quot;crop&quot;,</span><br><span class="line">          &quot;aim&quot;, &quot;switch-button&quot;, &quot;full-screen&quot;, &quot;copy-document&quot;, &quot;mic&quot;, &quot;stopwatch&quot;, &quot;medal-1&quot;, &quot;medal&quot;, &quot;trophy&quot;, &quot;trophy-1&quot;, &quot;first-aid-kit&quot;, &quot;discover&quot;, </span><br><span class="line">          &quot;place&quot;, &quot;location&quot;, &quot;location-outline&quot;, &quot;location-information&quot;, &quot;add-location&quot;, &quot;delete-location&quot;, &quot;map-location&quot;, &quot;alarm-clock&quot;, &quot;timer&quot;, &quot;watch-1&quot;, </span><br><span class="line">          &quot;watch&quot;, &quot;lock&quot;, &quot;unlock&quot;, &quot;key&quot;, &quot;service&quot;, &quot;mobile-phone&quot;, &quot;bicycle&quot;, &quot;truck&quot;, &quot;ship&quot;, &quot;basketball&quot;, &quot;football&quot;, &quot;soccer&quot;, &quot;baseball&quot;, &quot;wind-power&quot;,</span><br><span class="line">           &quot;light-rain&quot;, &quot;lightning&quot;, &quot;heavy-rain&quot;, &quot;sunrise&quot;, &quot;sunrise-1&quot;, &quot;sunset&quot;, &quot;sunny&quot;, &quot;cloudy&quot;, &quot;partly-cloudy&quot;, &quot;cloudy-and-sunny&quot;, &quot;moon&quot;,</span><br><span class="line">            &quot;moon-night&quot;, &quot;dish&quot;, &quot;dish-1&quot;, &quot;food&quot;, &quot;chicken&quot;, &quot;fork-spoon&quot;, &quot;knife-fork&quot;, &quot;burger&quot;, &quot;tableware&quot;, &quot;sugar&quot;, &quot;dessert&quot;, &quot;ice-cream&quot;, &quot;hot-water&quot;,</span><br><span class="line">             &quot;water-cup&quot;, &quot;coffee-cup&quot;, &quot;cold-drink&quot;, &quot;goblet&quot;, &quot;goblet-full&quot;, &quot;goblet-square&quot;, &quot;goblet-square-full&quot;, &quot;refrigerator&quot;, &quot;grape&quot;, &quot;watermelon&quot;, &quot;cherry&quot;,</span><br><span class="line">              &quot;apple&quot;, &quot;pear&quot;, &quot;orange&quot;, &quot;coffee&quot;, &quot;ice-tea&quot;, &quot;ice-drink&quot;, &quot;milk-tea&quot;, &quot;potato-strips&quot;, &quot;lollipop&quot;, &quot;ice-cream-square&quot;,</span><br><span class="line">               &quot;ice-cream-round&quot;].map(s =&gt; &quot;el-icon-&quot; + s);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="在需要使用的页面复制进去">在需要使用的页面复制进去</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import &#123;elementIcons&#125; from &#x27;@/utils/icon&#x27;</span><br><span class="line"></span><br><span class="line">//created里使用</span><br><span class="line">this.iconList=elementIcons</span><br></pre></td></tr></table></figure><h2 id="在自己需要使用的地方复制进去">在自己需要使用的地方复制进去</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form-item class=&quot;chooseIcons&quot; label=&quot;菜单图标&quot; prop=&quot;icon&quot;&gt;</span><br><span class="line">  &lt;el-popover</span><br><span class="line">    placement=&quot;top-start&quot;</span><br><span class="line">    :append-to-body=&quot;false&quot;</span><br><span class="line">    width=&quot;30vw&quot;</span><br><span class="line">    trigger=&quot;click&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;div slot=&quot;reference&quot; class=&quot;iconDiv&quot;&gt;</span><br><span class="line">      &lt;i :class=&quot;userChooseIcon&quot;&gt;&lt;/i&gt;</span><br><span class="line">      &lt;el-input</span><br><span class="line">        style=&quot;margin-left: 5px; width: 215px&quot;</span><br><span class="line">        v-model=&quot;ruleForm.icon&quot;</span><br><span class="line">      &gt;&lt;/el-input&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;iconList&quot;&gt;</span><br><span class="line">      &lt;i</span><br><span class="line">        v-for=&quot;item in iconList&quot;</span><br><span class="line">        :key=&quot;item&quot;</span><br><span class="line">        :class=&quot;[item, &#x27;icon&#x27;]&quot;</span><br><span class="line">        @click=&quot;setIcon(item)&quot;</span><br><span class="line">        style=&quot;font-size: 20px&quot;</span><br><span class="line">      &gt;&lt;/i&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/el-popover&gt;</span><br><span class="line">&lt;/el-form-item&gt;</span><br></pre></td></tr></table></figure><h2 id="初始化数据">初始化数据</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        userChooseIcon:&quot;&quot;,</span><br><span class="line">        chooseIcons:&quot;&quot;,</span><br><span class="line">        iconList:[]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">      //给icon绑定的点击事件</span><br><span class="line">      setIcon(icon)&#123;</span><br><span class="line">          console.log(icon)</span><br><span class="line">          this.userChooseIcon=icon;//将i的样式设为选中的样式el-icon-xxx</span><br><span class="line">          this.chooseIcons=&quot;&quot;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;  </span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>表单里面实现多栏</title>
      <link href="/posts/ce264c56.html"/>
      <url>/posts/ce264c56.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://www.jb51.net/article/259068.htm">https://www.jb51.net/article/259068.htm</a><br>最近用到 element-ui 的 el-form，要求一行里面放置多个 el-form-item。<br>其实很简单，用 layout 布局就可以简单实现。<br>layout 布局是通过基础的24分栏，从而迅速简洁地创建布局。<br>代码实现如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form</span><br><span class="line">  :model=&quot;ruleForm&quot;</span><br><span class="line">  style=&quot;margin-left: -80px&quot;</span><br><span class="line">  :rules=&quot;rules&quot;</span><br><span class="line">  ref=&quot;ruleForm&quot;</span><br><span class="line">  label-width=&quot;180px&quot;</span><br><span class="line">  class=&quot;demo-ruleForm&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &lt;el-row&gt;</span><br><span class="line">    &lt;el-col :span=&quot;12&quot;&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;单据类型&quot; prop=&quot;FBillTypeFNumber&quot;&gt;</span><br><span class="line">        &lt;el-select</span><br><span class="line">          v-model=&quot;ruleForm.FBillTypeID&quot;</span><br><span class="line">          @input=&quot;onInput()&quot;</span><br><span class="line">          placeholder=&quot;请选择活动区域&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;el-option label=&quot;标准采购申请&quot; value=&quot;CGSQD01_SYS&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;直运采购申请&quot; value=&quot;CGSQD02_SYS&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;资产采购申请&quot; value=&quot;CGSQD03_SYS&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;费用采购审核&quot; value=&quot;CGSQD04_SYS&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item</span><br><span class="line">        label=&quot;申请组织&quot;</span><br><span class="line">        prop=&quot;FApplicationOrgFNumber&quot;</span><br><span class="line">        placeholder=&quot;请填写申请组织&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          style=&quot;width: 220px&quot;</span><br><span class="line">          v-model=&quot;ruleForm.FApplicationOrgId&quot;</span><br><span class="line">        &gt;&lt;/el-input&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item</span><br><span class="line">        label=&quot;申请日期&quot;</span><br><span class="line">        prop=&quot;FApplicationDate&quot;</span><br><span class="line">        @input=&quot;onInput()&quot;</span><br><span class="line">        placeholder=&quot;请选择日期编号&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;div class=&quot;block&quot;&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model=&quot;ruleForm.FApplicationDate&quot;</span><br><span class="line">            type=&quot;date&quot;</span><br><span class="line">            placeholder=&quot;选择日期&quot;</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;/el-date-picker&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-form-item label=&quot;申请类型&quot; prop=&quot;FRequestType&quot;&gt;</span><br><span class="line">        &lt;el-select</span><br><span class="line">          v-model=&quot;ruleForm.FRequestType&quot;</span><br><span class="line">          @input=&quot;onInput()&quot;</span><br><span class="line">          placeholder=&quot;请选择申请类型&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;el-option label=&quot;物料&quot; value=&quot;Material&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">    &lt;el-col :span=&quot;12&quot;&gt;</span><br><span class="line">      &lt;el-form-item</span><br><span class="line">        label=&quot;物料编号&quot;</span><br><span class="line">        prop=&quot;FMaterialFNumber&quot;</span><br><span class="line">        @input=&quot;onInput()&quot;</span><br><span class="line">        placeholder=&quot;请填写物料编号&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          style=&quot;width: 220px&quot;</span><br><span class="line">          v-model=&quot;ruleForm.FMaterialId&quot;</span><br><span class="line">        &gt;&lt;/el-input&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;计价单位&quot; prop=&quot;FPriceUnitFNumber&quot;&gt;</span><br><span class="line">        &lt;el-select</span><br><span class="line">          v-model=&quot;ruleForm.FPriceUnitId&quot;</span><br><span class="line">          @input=&quot;onInput()&quot;</span><br><span class="line">          placeholder=&quot;请选择计价单位&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;el-option label=&quot;测试&quot; value=&quot;Pcs&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;厘米&quot; value=&quot;cm&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;米&quot; value=&quot;m&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;克&quot; value=&quot;g&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;千克&quot; value=&quot;kg&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;毫升&quot; value=&quot;mL&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;升&quot; value=&quot;L&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item</span><br><span class="line">        label=&quot;申请数量&quot;</span><br><span class="line">        prop=&quot;FReqQty&quot;</span><br><span class="line">        placeholder=&quot;请填写申请数量&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;el-input</span><br><span class="line">          style=&quot;width: 220px&quot;</span><br><span class="line">          v-model=&quot;ruleForm.FReqQty&quot;</span><br><span class="line">          @input=&quot;onInput()&quot;</span><br><span class="line">        &gt;&lt;/el-input&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;币别&quot; prop=&quot;FCurrencyFNumber&quot;&gt;</span><br><span class="line">        &lt;el-select</span><br><span class="line">          v-model=&quot;ruleForm.FCurrencyId&quot;</span><br><span class="line">          @input=&quot;onInput()&quot;</span><br><span class="line">          placeholder=&quot;请选择币别&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;el-option label=&quot;人民币&quot; value=&quot;PRE001&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;香港元&quot; value=&quot;PRE002&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;el-option label=&quot;美元&quot; value=&quot;PRE007&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;/el-select&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line">&lt;/el-form&gt;</span><br></pre></td></tr></table></figure><p>效果图<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/img/202312070932368.png" alt="image.png"></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>获取当前行的数据与索引</title>
      <link href="/posts/fdc1905f.html"/>
      <url>/posts/fdc1905f.html</url>
      
        <content type="html"><![CDATA[<p>参考：<br><a href="https://blog.csdn.net/chenfulu/article/details/132743137">https://blog.csdn.net/chenfulu/article/details/132743137</a></p><p><strong>scope.row：获取当前行数据</strong><br><strong>scope.$index：获取当前行index</strong></p><p>第一步先对删除或修改按钮加一个template标签，然后在加一个slot-scope=&quot;scope&quot;属性<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081545390.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column</span><br><span class="line">  label=&quot;操作&quot;</span><br><span class="line">  align=&quot;center&quot;&gt;</span><br><span class="line">  &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot;&gt;修改&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;danger&quot; @click=&quot;dlt(scope.row,scope.$index)&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>第二步 通过scope.row就可以获取当前的行的数据。通过方法可以输出，发现获取的是一个对象，那么可以通过 对象.属性名，来获取想要的数据。</p><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081545172.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>表单里添加输入框并添加限制条件</title>
      <link href="/posts/ade63345.html"/>
      <url>/posts/ade63345.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://blog.csdn.net/weixin_47194802/article/details/133761348">https://blog.csdn.net/weixin_47194802/article/details/133761348</a></p><p>关于在表格里面放<a href="https://so.csdn.net/so/search?q=%E8%BE%93%E5%85%A5%E6%A1%86&amp;spm=1001.2101.3001.7020">输入框</a>，并且给输入框加限制条件<br>一般校验是加到表单里 的，我在表格外面尝试过加form表单，但是不太好用，因为我要做的是这个输入框只能输入正数和小数，不能汉字和字母负数，所以我就直接给输入框加了验证规则<br>1、需要加验证的列 ，放上下面两句<br>:error=“durationInputError(scope.row.duration)”<br>@input=“handleDurationInput(scope.row)”</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column prop=&quot;duration&quot; label=&quot;升级时长&quot;&gt;</span><br><span class="line">  &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">    &lt;el-input</span><br><span class="line">      :disabled=&quot;scope.row.disableInput&quot;</span><br><span class="line">      v-model=&quot;scope.row.duration&quot;</span><br><span class="line">      :error=&quot;durationInputError(scope.row.duration)&quot;</span><br><span class="line">      @input=&quot;handleDurationInput(scope.row)&quot;</span><br><span class="line">      &gt;&lt;/el-input&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure><p>2、两个方法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">handleDurationInput(row) &#123;</span><br><span class="line">  const inputValue = row.duration;</span><br><span class="line"> </span><br><span class="line">  // 使用正则表达式验证输入值</span><br><span class="line">  const regex = /^\d+(\.\d+)?$/; // 只允许输入非负数和小数点</span><br><span class="line">  if (!regex.test(inputValue)) &#123;</span><br><span class="line">    row.duration = inputValue.replace(/[^\d.]/g, &quot;&quot;); // 移除非数字和小数点的字符</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">durationInputError(inputValue) &#123;</span><br><span class="line">  const regex = /^-?\d+(\.\d+)?$/; // 允许输入负数和小数点</span><br><span class="line">  if (!regex.test(inputValue)) &#123;</span><br><span class="line">    return &quot;请输入有效的升级时长&quot;;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    return &quot;&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>虽然没有红色提示，但是直接过滤掉了<a href="https://so.csdn.net/so/search?q=%E9%9D%9E%E6%95%B0%E5%AD%97&amp;spm=1001.2101.3001.7020">非数字</a>和负数</p><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081544457.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>设置表格表头位置</title>
      <link href="/posts/4271d8d6.html"/>
      <url>/posts/4271d8d6.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://blog.csdn.net/LQZ8888/article/details/127529433">https://blog.csdn.net/LQZ8888/article/details/127529433</a></p><p><strong>text-align属性为center、left或right，即可让内容列居中、左对齐或右对齐显示。</strong></p><h1>统一设置</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//统一设置设置表头居中 </span><br><span class="line">:header-cell-style=&quot;&#123; &#x27;text-align&#x27;: &#x27;center&#x27; &#125;&quot;</span><br><span class="line">    </span><br><span class="line">//统一设置设置内容列居中</span><br><span class="line">:cell-style=&quot;&#123; &#x27;text-align&#x27;: &#x27;center&#x27; &#125;&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table</span><br><span class="line">          :data=&quot;tableData&quot;</span><br><span class="line">          border</span><br><span class="line">          stripe</span><br><span class="line">          :header-cell-class-name=&quot;headerBg&quot;</span><br><span class="line">          :header-cell-style=&quot;&#123; &#x27;text-align&#x27;: &#x27;center&#x27; &#125;&quot;</span><br><span class="line">          :cell-style=&quot;&#123; &#x27;text-align&#x27;: &#x27;center&#x27; &#125;&quot;</span><br><span class="line">          :default-sort=&quot;&#123; prop: &#x27;date&#x27;, order: &#x27;descending&#x27; &#125;&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;el-table-column type=&quot;index&quot; width=&quot;50&quot; label=&quot;列号&quot;&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column</span><br><span class="line">            prop=&quot;FBillNo&quot;</span><br><span class="line">            label=&quot;单据编号&quot;</span><br><span class="line">            width=&quot;140&quot;</span><br><span class="line">          &gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column</span><br><span class="line">            prop=&quot;FDate&quot;</span><br><span class="line">            sortable</span><br><span class="line">            label=&quot;采购日期&quot;</span><br><span class="line">            width=&quot;140&quot;</span><br><span class="line">          &gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column</span><br><span class="line">            prop=&quot;FPurchaseOrgName&quot;</span><br><span class="line">            label=&quot;门店&quot;</span><br><span class="line">            width=&quot;140&quot;</span><br><span class="line">          &gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column</span><br><span class="line">            prop=&quot;FSupplierName&quot;</span><br><span class="line">            label=&quot;供应商&quot;</span><br><span class="line">            width=&quot;200&quot;</span><br><span class="line">          &gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column</span><br><span class="line">            prop=&quot;FMaterialId&quot;</span><br><span class="line">            label=&quot;物料编码&quot;</span><br><span class="line">            width=&quot;120&quot;</span><br><span class="line">          &gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column</span><br><span class="line">            prop=&quot;FMaterialName&quot;</span><br><span class="line">            label=&quot;物料名称&quot;</span><br><span class="line">          &gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;FModel&quot; label=&quot;规格型号&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;FUnitName&quot; label=&quot;采购单位&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;FQty&quot; label=&quot;采购数量&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;!--&lt;el-table-column prop=&quot;FTaxPrice&quot; label=&quot;含税单价&quot;&gt;&lt;/el-table-column&gt;--&gt;</span><br><span class="line">          &lt;!--&lt;el-table-column prop=&quot;FAllAmount_LC&quot; label=&quot;价税合计&quot;&gt;&lt;/el-table-column&gt;--&gt;</span><br><span class="line">          &lt;el-table-column</span><br><span class="line">            prop=&quot;FDJName&quot;</span><br><span class="line">            sortable</span><br><span class="line">            label=&quot;店间&quot;</span><br><span class="line">          &gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;!-- todo 暂时没有实发数量字段 后期会修改 --&gt;</span><br><span class="line">          &lt;el-table-column label=&quot;实发数量&quot; prop=&quot;FSfqty&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">              &lt;input</span><br><span class="line">                class=&quot;form-control&quot;</span><br><span class="line">                type=&quot;text&quot;</span><br><span class="line">                v-model=&quot;scope.row.F_SFQTY&quot;</span><br><span class="line">                @change=&quot;update(scope.row, scope.$index)&quot;</span><br><span class="line">                placeholder=&quot;请输入内容&quot;</span><br><span class="line">                clearable</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">          &lt;el-table-column</span><br><span class="line">            label=&quot;操作&quot;</span><br><span class="line">            width=&quot;250&quot;</span><br><span class="line">            align=&quot;center&quot;</span><br><span class="line">            fixed=&quot;right&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">              &lt;!-- &lt;el-button type=&quot;primary&quot; icon=&quot;el-icon-edit&quot; circle @click=&quot;update(scope.row)&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; circle @click=&quot;deleted(scope.row)&quot;&gt;&lt;/el-button&gt; --&gt;</span><br><span class="line">              &lt;el-button</span><br><span class="line">                type=&quot;success&quot;</span><br><span class="line">                @click=&quot;update(scope.row, scope.$index)&quot;</span><br><span class="line">              &gt;</span><br><span class="line">                &lt;i class=&quot;el-icon-edit&quot;&gt;&lt;/i&gt;编辑</span><br><span class="line">              &lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type=&quot;danger&quot;&gt;</span><br><span class="line">                &lt;i class=&quot;el-icon-delete&quot;&gt;&lt;/i&gt;删除</span><br><span class="line">              &lt;/el-button&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br></pre></td></tr></table></figure><h1>单独设置</h1><p>在每个eltable-columnQ 标签上边设置 align=&quot;center’</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动态添加一行</title>
      <link href="/posts/4cdbb309.html"/>
      <url>/posts/4cdbb309.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://blog.csdn.net/weixin_47194802/article/details/133761834">https://blog.csdn.net/weixin_47194802/article/details/133761834</a><br><a href="https://blog.csdn.net/qq_42730111/article/details/131303795">https://blog.csdn.net/qq_42730111/article/details/131303795</a></p><p>vue自定义表头，动态添加表头，新增行、新增列、删除行、删除列<br><a href="https://blog.csdn.net/ALSO666/article/details/124921581">https://blog.csdn.net/ALSO666/article/details/124921581</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;!-- 表格 --&gt;</span><br><span class="line">    &lt;el-table :data=&quot;tableData&quot; :height=&quot;fullHeight&quot; border&gt;</span><br><span class="line">      &lt;el-table-column type=&quot;index&quot; label=&quot;序号&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;subcompanyId&quot; label=&quot;部门名称&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-select</span><br><span class="line">            v-model=&quot;scope.row.postId&quot;</span><br><span class="line">            :disabled=&quot;scope.row.disableInput&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;el-option label=&quot;设计部&quot; value=&quot;1234567890&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option label=&quot;产品部&quot; value=&quot;9876543210&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;postId&quot; label=&quot;岗位名称&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-select</span><br><span class="line">            v-model=&quot;scope.row.postId&quot;</span><br><span class="line">            :disabled=&quot;scope.row.disableInput&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;el-option label=&quot;经理&quot; value=&quot;1234567890&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option label=&quot;普通员工&quot; value=&quot;9876543210&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column prop=&quot;oaUserIds&quot; label=&quot;姓名/手机号码&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-input</span><br><span class="line">            :disabled=&quot;scope.row.disableInput&quot;</span><br><span class="line">            v-model=&quot;scope.row.oaUserIds&quot;</span><br><span class="line">          &gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line"> </span><br><span class="line">      &lt;el-table-column label=&quot;操作&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-button-group&gt;</span><br><span class="line">            &lt;el-button</span><br><span class="line">              icon=&quot;el-icon-edit&quot;</span><br><span class="line">              size=&quot;mini&quot;</span><br><span class="line">              :disabled=&quot;</span><br><span class="line">                !scope.row.oaUserIds ||</span><br><span class="line">                !scope.row.postId ||</span><br><span class="line">                !scope.row.subcompanyId</span><br><span class="line">              &quot;</span><br><span class="line">              @click=&quot;subrow(scope.row)&quot;</span><br><span class="line">              &gt;提交&lt;/el-button</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;el-button</span><br><span class="line">              icon=&quot;el-icon-delete&quot;</span><br><span class="line">              size=&quot;mini&quot;</span><br><span class="line">              @click=&quot;deleteRow(scope.row)&quot;</span><br><span class="line">              &gt;删除&lt;/el-button</span><br><span class="line">            &gt;</span><br><span class="line">          &lt;/el-button-group&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">    &lt;pagination</span><br><span class="line">      v-show=&quot;total &gt; 0&quot;</span><br><span class="line">      :total=&quot;total&quot;</span><br><span class="line">      :page.sync=&quot;searchForm.pageNum&quot;</span><br><span class="line">      :limit.sync=&quot;searchForm.pageSize&quot;</span><br><span class="line">      @pagination=&quot;getList&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;!-- 添加一行数据 --&gt;</span><br><span class="line">    &lt;el-button</span><br><span class="line">      type=&quot;primary&quot;</span><br><span class="line">      class=&quot;buttonAdd&quot;</span><br><span class="line">      icon=&quot;el-icon-plus&quot;</span><br><span class="line">      @click=&quot;addRow&quot;</span><br><span class="line">      &gt;添加一行&lt;/el-button</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      total: 0,</span><br><span class="line">      tableData: [], // 表格数据</span><br><span class="line">      newRow: &#123;&#125;, // 新增的一行数据</span><br><span class="line">      isDis: false,</span><br><span class="line">      fullHeight: window.innerHeight - 222 + &quot;px&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"> </span><br><span class="line">    addRow() &#123;</span><br><span class="line">      // 添加一行数据</span><br><span class="line">      const newRow = &#123;</span><br><span class="line">        subcompanyId: undefined,</span><br><span class="line">        postId: undefined,</span><br><span class="line">        oaUserIds: undefined,</span><br><span class="line">        disableInput: false,</span><br><span class="line">      &#125;;</span><br><span class="line">      this.tableData.push(newRow);</span><br><span class="line">    &#125;,</span><br><span class="line"> </span><br><span class="line">    deleteRow(row) &#123;</span><br><span class="line">      // 删除行数据</span><br><span class="line">      const index = this.tableData.indexOf(row);</span><br><span class="line">      if (index !== -1) &#123;</span><br><span class="line">        this.tableData.splice(index, 1);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>写了一个动态表格，点下面按钮，动态添加带<a href="https://so.csdn.net/so/search?q=%E8%BE%93%E5%85%A5%E6%A1%86&amp;spm=1001.2101.3001.7020">输入框</a>和选择框的一条数据</p><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081544809.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现下拉框的多选功能</title>
      <link href="/posts/383b738a.html"/>
      <url>/posts/383b738a.html</url>
      
        <content type="html"><![CDATA[<p>参考；<a href="https://blog.csdn.net/liu__yuan/article/details/129926542">https://blog.csdn.net/liu__yuan/article/details/129926542</a></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>表单展示树形</title>
      <link href="/posts/feffb2ad.html"/>
      <url>/posts/feffb2ad.html</url>
      
        <content type="html"><![CDATA[<h1>前端代码</h1><p><strong>参考</strong><br><a href="https://element.eleme.cn/#/zh-CN/component/tree">https://element.eleme.cn/#/zh-CN/component/tree</a></p><h2 id="父代码">父代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 新增菜单 --&gt;</span><br><span class="line">      &lt;RoleAdd</span><br><span class="line">          :dialogVisible=&quot;dialogVisible&quot;</span><br><span class="line">          @Visible=&quot;getVisible&quot;</span><br><span class="line">          :formType=&quot;formType == &#x27;add&#x27; ? &#x27;add&#x27; : &#x27;update&#x27;&quot;</span><br><span class="line">          :rule-form=&quot;ruleForm&quot;</span><br><span class="line">          :title=&quot;tilte&quot;</span><br><span class="line">          :menus=&quot;menus&quot;</span><br><span class="line">          :menuOptions=&quot;tableData&quot;</span><br><span class="line">      &gt;&lt;/RoleAdd&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;searchRole&#125; from &quot;@/assets/js/role&quot;;</span><br><span class="line">import &#123;searchUserMenu&#125; from &quot;@/assets/js/menu&quot;;</span><br><span class="line">import RoleAdd from &#x27;@/views/role/RoleAdd&#x27;</span><br><span class="line">    </span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;Role&#x27;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    AsideNav, HeadTop, RoleAdd</span><br><span class="line">  &#125;,  </span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          // 菜单</span><br><span class="line">          menus: &#123;</span><br><span class="line">            id: &quot;&quot;,</span><br><span class="line">            label: &quot;&quot;,</span><br><span class="line">            children: &#123;</span><br><span class="line">              id: &quot;&quot;,</span><br><span class="line">              label: &quot;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          // 新增弹窗</span><br><span class="line">          dialogVisible: false,</span><br><span class="line">          // 是新增还是更新</span><br><span class="line">          formType: &quot;add&quot;,</span><br><span class="line">          //新增还是编辑</span><br><span class="line">          tilte: &quot;&quot;,</span><br><span class="line">          // 选中行的数据</span><br><span class="line">          ruleForm: &#123;&#125;,</span><br><span class="line">        &#125;</span><br><span class="line">  &#125;,methods: &#123;</span><br><span class="line">      //获取菜单</span><br><span class="line">    menuList() &#123;</span><br><span class="line">      searchUserMenu().then((res) =&gt; &#123;</span><br><span class="line">        this.menus = res.data;</span><br><span class="line">        let ids = [];</span><br><span class="line">        let labels = [];</span><br><span class="line">        let cids = [];</span><br><span class="line">        let clabels = [];</span><br><span class="line">        res.data.forEach((item) =&gt; &#123;</span><br><span class="line">          ids.push(item.menuId);</span><br><span class="line">          labels.push(item.menuName);</span><br><span class="line">          if (item.children != null) &#123;</span><br><span class="line">            item.children.forEach((citem) =&gt; &#123;</span><br><span class="line">              cids.push(citem.menuId)</span><br><span class="line">              clabels.push(citem.menuName)</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        this.menus.forEach((item, index) =&gt; &#123;</span><br><span class="line">          item.id = ids[index]</span><br><span class="line">          item.label = labels[index]</span><br><span class="line">          if (item.children != null) &#123;</span><br><span class="line">            item.children.forEach((citem, cindex) =&gt; &#123;</span><br><span class="line">              item.children[cindex].id = cids[cindex]</span><br><span class="line">              item.children[cindex].label = clabels[cindex]</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,// 添加用户</span><br><span class="line">    add() &#123;</span><br><span class="line">      this.dialogVisible = !this.dialogVisible</span><br><span class="line">      //是新增</span><br><span class="line">      this.formType = &quot;add&quot;</span><br><span class="line">      this.tilte = &quot;新增页面&quot;</span><br><span class="line">      this.ruleForm = &#123;&#125;</span><br><span class="line">      this.menuList();</span><br><span class="line">    &#125;,</span><br><span class="line">    update(id) &#123;</span><br><span class="line">      this.menuList();</span><br><span class="line">      this.dialogVisible = !this.dialogVisible</span><br><span class="line">      //是编辑</span><br><span class="line">      this.formType = &quot;update&quot;</span><br><span class="line">      this.tilte = &quot;编辑页面&quot;</span><br><span class="line">      //将当前数据传给子组件</span><br><span class="line">      //TODO 调用详情</span><br><span class="line">      this.ruleForm = &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;    </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="子代码">子代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog</span><br><span class="line">      title=&quot;提示&quot;</span><br><span class="line">      :visible.sync=&quot;dialogVisible&quot;</span><br><span class="line">      width=&quot;30%&quot;</span><br><span class="line">      :before-close=&quot;handleClose&quot;</span><br><span class="line">      @close=&quot;cancel&quot;&gt;</span><br><span class="line">    &lt;el-form :model=&quot;ruleForm&quot; :rules=&quot;rules&quot; ref=&quot;ruleForm&quot; label-width=&quot;100px&quot; class=&quot;demo-ruleForm&quot;&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;角色名称&quot; prop=&quot;roleName&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;ruleForm.roleName&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-form-item label=&quot;权限字符&quot; prop=&quot;roleKey&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;ruleForm.roleKey&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-form-item label=&quot;状态&quot; prop=&quot;status&quot;&gt;</span><br><span class="line">        &lt;el-radio-group v-model=&quot;ruleForm.status&quot;&gt;</span><br><span class="line">          &lt;el-radio label=&quot;0&quot; value=&quot;0&quot;&gt;正常&lt;/el-radio&gt;</span><br><span class="line">          &lt;el-radio label=&quot;1&quot; value=&quot;1&quot;&gt;停用&lt;/el-radio&gt;</span><br><span class="line">        &lt;/el-radio-group&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;菜单权限&quot;&gt;</span><br><span class="line">        &lt;el-tree</span><br><span class="line">            v-model=&quot;ruleForm.menuId&quot;</span><br><span class="line">            :data=&quot;menus&quot;</span><br><span class="line">            show-checkbox</span><br><span class="line">            default-expand-all</span><br><span class="line">            node-key=&quot;menuId&quot;</span><br><span class="line">            ref=&quot;tree&quot;</span><br><span class="line">            lazy</span><br><span class="line">            highlight-current</span><br><span class="line">            :props=&quot;defaultProps&quot;&gt;</span><br><span class="line">        &lt;/el-tree&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;备注&quot; prop=&quot;remark&quot;&gt;</span><br><span class="line">        &lt;el-input type=&quot;textarea&quot; v-model=&quot;ruleForm.remark&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">      &lt;el-button type=&quot;primary&quot; @click=&quot;add()&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">      &lt;el-button @click=&quot;handleClose()&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">import &#123;addRole&#125; from &quot;@/assets/js/role&quot;;</span><br><span class="line">import &#123;searchUserMenu&#125; from &quot;@/assets/js/menu&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;RoleAdd&quot;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    dialogVisible: &#123;</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: false</span><br><span class="line">    &#125;,</span><br><span class="line">    formType: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      default: &quot;&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    ruleForm: &#123; // 接收父组件传递的行数据</span><br><span class="line">      type: Object,</span><br><span class="line">      default: &#123;&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    title: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 菜单</span><br><span class="line">      menus: &#123;</span><br><span class="line">        id: &quot;&quot;,</span><br><span class="line">        label: &quot;&quot;,</span><br><span class="line">        children: &#123;</span><br><span class="line">          id: &quot;&quot;,</span><br><span class="line">          label: &quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      defaultProps: &#123;</span><br><span class="line">        children: &quot;children&quot;,</span><br><span class="line">        label: &quot;label&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      //是否弹窗</span><br><span class="line">      dialogVisible: false,</span><br><span class="line">      //回显的数据</span><br><span class="line">      ruleForm: &#123;</span><br><span class="line">        roleName: &quot;&quot;,</span><br><span class="line">        roleKey: &quot;&quot;,</span><br><span class="line">        status: &quot;&quot;,</span><br><span class="line">        remark: &quot;&quot;,</span><br><span class="line">        menuId: []</span><br><span class="line">      &#125;,</span><br><span class="line">      //校验</span><br><span class="line">      rules: &#123;</span><br><span class="line">        roleName: [</span><br><span class="line">          &#123;required: true, message: &#x27;请输入活动名称&#x27;, trigger: &#x27;blur&#x27;&#125;,</span><br><span class="line">        ],</span><br><span class="line">        roleKey: [</span><br><span class="line">          &#123;required: true, message: &#x27;请输入权限字符&#x27;, trigger: &#x27;change&#x27;&#125;</span><br><span class="line">        ],</span><br><span class="line">        status: [</span><br><span class="line">          &#123;required: true, message: &#x27;请选择活动状态&#x27;, trigger: &#x27;change&#x27;&#125;</span><br><span class="line">        ],</span><br><span class="line">        status111: [</span><br><span class="line">          &#123;type: &#x27;array&#x27;, required: true, message: &#x27;请至少选择一个活动性质&#x27;, trigger: &#x27;change&#x27;&#125;</span><br><span class="line">        ],</span><br><span class="line">        remark: [</span><br><span class="line">          &#123;required: true, message: &#x27;请填写备注&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.menuList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    //获取菜单</span><br><span class="line">    menuList() &#123;</span><br><span class="line">      searchUserMenu().then((res) =&gt; &#123;</span><br><span class="line">        this.menus = res.data;</span><br><span class="line">        let ids = [];</span><br><span class="line">        let labels = [];</span><br><span class="line">        let cids = [];</span><br><span class="line">        let clabels = [];</span><br><span class="line">        res.data.forEach((item) =&gt; &#123;</span><br><span class="line">          ids.push(item.menuId);</span><br><span class="line">          labels.push(item.menuName);</span><br><span class="line">          if (item.children != null) &#123;</span><br><span class="line">            item.children.forEach((citem) =&gt; &#123;</span><br><span class="line">              cids.push(citem.menuId)</span><br><span class="line">              clabels.push(citem.menuName)</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        let length = 0</span><br><span class="line">        this.menus.forEach((item, index) =&gt; &#123;</span><br><span class="line">          item.id = ids[index]</span><br><span class="line">          item.label = labels[index]</span><br><span class="line">          if (item.children != null) &#123;</span><br><span class="line"></span><br><span class="line">            item.children.forEach((citem, cindex) =&gt; &#123;</span><br><span class="line">              item.children[cindex].id = cids[cindex + length]</span><br><span class="line">              item.children[cindex].label = clabels[cindex + length]</span><br><span class="line">            &#125;)</span><br><span class="line">            console.log(&quot;index&quot;, index)</span><br><span class="line">            length = length + item.children.length</span><br><span class="line">            console.log(&quot;length&quot;, length)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        console.log(&quot;this.menus&quot;, this.menus)</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    cancel() &#123;</span><br><span class="line">      // 需要在弹框打开时对表单的校验结果进行移除</span><br><span class="line">      if (this.$refs.ruleForm) &#123;</span><br><span class="line">        this.$nextTick(() =&gt; &#123;</span><br><span class="line">          this.$refs.ruleForm.resetFields();</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      //将表单数据清空</span><br><span class="line">      this.ruleForm = &#123;&#125;</span><br><span class="line">      //将菜单权限清空</span><br><span class="line">      this.$refs.tree.setCheckedKeys([]);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 新增</span><br><span class="line">    add() &#123;</span><br><span class="line">      if (this.formType == &#x27;add&#x27;) &#123;</span><br><span class="line">        //获取key</span><br><span class="line">        this.ruleForm.menuId = this.$refs.tree.getCheckedKeys();</span><br><span class="line">        addRole(this.ruleForm).then(res =&gt; &#123;</span><br><span class="line">          console.log(res)</span><br><span class="line">          // if (res.Result.ResponseStatus.Errors.length == &#x27;0&#x27;) &#123;</span><br><span class="line">          //     // 给出提示信息</span><br><span class="line">          //     this.$notify(&#123;</span><br><span class="line">          //       title: &#x27;成功&#x27;,</span><br><span class="line">          //       message: &#x27;新增成功&#x27;,</span><br><span class="line">          //       type: &#x27;success&#x27;</span><br><span class="line">          //     &#125;);</span><br><span class="line">          //   &#125; else &#123;</span><br><span class="line">          //     this.$notify.error(&#123;</span><br><span class="line">          //       title: &#x27;失败&#x27;,</span><br><span class="line">          //       message: &#x27;新增失败&#x27;</span><br><span class="line">          //     &#125;);</span><br><span class="line">          //   &#125;</span><br><span class="line">          //   //关闭弹窗</span><br><span class="line">          //   this.dialogVisible = false;</span><br><span class="line">          //   // 将数据返回给父组件</span><br><span class="line">          //   this.$emit(&#x27;dialogVisible&#x27;, false)</span><br><span class="line">          //   // 将数据返回给父组件</span><br><span class="line">          //   this.$emit(&#x27;refresh&#x27;, true)</span><br><span class="line">          // &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        // addProcure(data).then(res =&gt; &#123;</span><br><span class="line">        //   if (res.Result.ResponseStatus.Errors.length == &#x27;0&#x27;) &#123;</span><br><span class="line">        //     // 给出提示信息</span><br><span class="line">        //     this.$notify(&#123;</span><br><span class="line">        //       title: &#x27;成功&#x27;,</span><br><span class="line">        //       message: &#x27;编辑成功&#x27;,</span><br><span class="line">        //       type: &#x27;success&#x27;</span><br><span class="line">        //     &#125;);</span><br><span class="line">        //   &#125; else &#123;</span><br><span class="line">        //     this.$notify.error(&#123;</span><br><span class="line">        //       title: &#x27;失败&#x27;,</span><br><span class="line">        //       message: &#x27;编辑失败&#x27;</span><br><span class="line">        //     &#125;);</span><br><span class="line">        //   &#125;</span><br><span class="line">        //   //关闭弹窗</span><br><span class="line">        //   this.dialogVisible = false;</span><br><span class="line">        //   // 将数据返回给父组件</span><br><span class="line">        //   this.$emit(&#x27;dialogVisible&#x27;, false)</span><br><span class="line">        //   // 将数据返回给父组件</span><br><span class="line">        //   this.$emit(&#x27;refresh&#x27;, true)</span><br><span class="line">        // &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    handleClose(done) &#123;</span><br><span class="line">      this.$confirm(&#x27;确认关闭？&#x27;)</span><br><span class="line">          .then(_ =&gt; &#123;</span><br><span class="line">            this.dialogVisible = false;</span><br><span class="line">            this.$emit(&#x27;Visible&#x27;, false);</span><br><span class="line">            this.ruleForm = &#123;&#125;</span><br><span class="line">            this.$refs.tree.setCheckedKeys([]);</span><br><span class="line">            done();</span><br><span class="line">          &#125;)</span><br><span class="line">          .catch(_ =&gt; &#123;</span><br><span class="line">          &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1>后端代码</h1><p><strong>参考</strong><br><a href="https://doc.hutool.cn/pages/TreeUtil/">树结构工具-TreeUtil | Hutool</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户权限菜单</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sysMenuVo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pageNumer</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Tree&lt;String&gt;&gt; <span class="title function_">menuSearch</span><span class="params">(SysMenuVo sysMenuVo, Long id, PageNumer pageNumer)</span> &#123;</span><br><span class="line"></span><br><span class="line">        List&lt;SysMenuExtend&gt; sysMenuExtendList = sysMenuMapper.menuSearch(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;SysMenu&gt;()</span><br><span class="line">                .eq(<span class="string">&quot;user_id&quot;</span>, id)</span><br><span class="line">                .eq(<span class="string">&quot;r.status&quot;</span>, StateConstant.COMMON_ZROE)</span><br><span class="line">                .eq(<span class="string">&quot;m.status&quot;</span>, StateConstant.COMMON_ZROE)</span><br><span class="line">                .likeRight(!StringUtils.isEmpty(sysMenuVo.getMenuName()), <span class="string">&quot;m.menu_name&quot;</span>, sysMenuVo.getMenuName())</span><br><span class="line">                .likeRight(!StringUtils.isEmpty(sysMenuVo.getStatus()), <span class="string">&quot;m.status&quot;</span>, sysMenuVo.getStatus())</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.isEmpty(pageNumer.getPageNum())) &#123;</span><br><span class="line">            PageHelper.startPage(pageNumer.getPageNum(), pageNumer.getPageSize());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 配置</span></span><br><span class="line">        <span class="type">TreeNodeConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNodeConfig</span>();</span><br><span class="line">        <span class="comment">// 自定义属性名 都要默认值的</span></span><br><span class="line">        config.setIdKey(<span class="string">&quot;menuId&quot;</span>);</span><br><span class="line">        config.setWeightKey(<span class="string">&quot;indexNo&quot;</span>);</span><br><span class="line">        config.setNameKey(<span class="string">&quot;menuName&quot;</span>);</span><br><span class="line">        config.setChildrenKey(<span class="string">&quot;children&quot;</span>);</span><br><span class="line">        <span class="comment">// 最大递归深度</span></span><br><span class="line">        config.setDeep(<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">return</span> TreeUtil.build(sysMenuExtendList, <span class="string">&quot;0&quot;</span>, config, (treeNode, tree) -&gt; &#123;</span><br><span class="line">            tree.setId(treeNode.getMenuId().toString());</span><br><span class="line">            tree.setParentId(treeNode.getParentId().toString());</span><br><span class="line">            tree.setWeight(treeNode.getMenuId());</span><br><span class="line">            tree.setName(treeNode.getMenuName());</span><br><span class="line">            <span class="comment">// 扩展属性 ...</span></span><br><span class="line">            tree.putExtra(<span class="string">&quot;icon&quot;</span>, treeNode.getIcon());</span><br><span class="line">            tree.putExtra(<span class="string">&quot;path&quot;</span>, treeNode.getPath());</span><br><span class="line">            tree.putExtra(<span class="string">&quot;perms&quot;</span>, treeNode.getPerms());</span><br><span class="line">            tree.putExtra(<span class="string">&quot;createBy&quot;</span>, treeNode.getCreateBy());</span><br><span class="line">            tree.putExtra(<span class="string">&quot;createTime&quot;</span>, treeNode.getCreateTime());</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>表格树形展示</title>
      <link href="/posts/7657960f.html"/>
      <url>/posts/7657960f.html</url>
      
        <content type="html"><![CDATA[<h1>前端代码</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table</span><br><span class="line">  :data=&quot;tableData&quot;</span><br><span class="line">  style=&quot;width: 100%&quot;</span><br><span class="line">  row-key=&quot;menuId&quot;</span><br><span class="line">  border</span><br><span class="line">  lazy</span><br><span class="line">  :load=&quot;load&quot;</span><br><span class="line">  :tree-props=&quot;&#123; children: &#x27;children&#x27;, hasChildren: &#x27;hasChildren&#x27; &#125;&quot;</span><br><span class="line">  &gt;</span><br><span class="line">  &lt;el-table-column</span><br><span class="line">    prop=&quot;menuName&quot;</span><br><span class="line">    label=&quot;菜单名称&quot;</span><br><span class="line">    width=&quot;140&quot;</span><br><span class="line">    &gt;&lt;/el-table-column&gt;</span><br><span class="line">  &lt;el-table-column</span><br><span class="line">    prop=&quot;createBy&quot;</span><br><span class="line">    label=&quot;创建者&quot;</span><br><span class="line">    width=&quot;120&quot;</span><br><span class="line">    &gt;&lt;/el-table-column&gt;</span><br><span class="line">  &lt;el-table-column prop=&quot;createTime&quot; label=&quot;创建时间&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">  &lt;el-table-column</span><br><span class="line">    fixed=&quot;right&quot;</span><br><span class="line">    label=&quot;操作&quot;</span><br><span class="line">    width=&quot;250&quot;</span><br><span class="line">    align=&quot;center&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">      &lt;el-button type=&quot;success&quot; @click=&quot;update(scope.row)&quot;</span><br><span class="line">        &gt;编辑 &lt;i class=&quot;el-icon-edit&quot;&gt;&lt;/i</span><br><span class="line">                                      &gt;&lt;/el-button&gt;</span><br><span class="line">      &lt;el-button type=&quot;danger&quot;</span><br><span class="line">        &gt;删除 &lt;i class=&quot;el-icon-remove-outline&quot;&gt;&lt;/i</span><br><span class="line">                                                &gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/el-table-column&gt;</span><br><span class="line">&lt;/el-table&gt;</span><br></pre></td></tr></table></figure><p>tableDate：获取的列表数据<br>row-key：key<br>lazy：懒加载<br>:load：调用获取列表数据方法</p><h1>后端代码</h1><p><strong>参考代码</strong><br><a href="https://doc.hutool.cn/pages/TreeUtil/">树结构工具-TreeUtil | Hutool</a><br><strong>实现层</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户权限菜单</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sysMenuVo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pageNumer</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Tree&lt;String&gt;&gt; <span class="title function_">menuSearch</span><span class="params">(SysMenuVo sysMenuVo, Long id, PageNumer pageNumer)</span> &#123;</span><br><span class="line"></span><br><span class="line">    List&lt;SysMenuExtend&gt; sysMenuExtendList = sysMenuMapper.menuSearch(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;SysMenu&gt;()</span><br><span class="line">                                                                     .eq(<span class="string">&quot;user_id&quot;</span>, id)</span><br><span class="line">                                                                     .eq(<span class="string">&quot;r.status&quot;</span>, StateConstant.COMMON_ZROE)</span><br><span class="line">                                                                     .eq(<span class="string">&quot;m.status&quot;</span>, StateConstant.COMMON_ZROE)</span><br><span class="line">                                                                     .likeRight(!StringUtils.isEmpty(sysMenuVo.getMenuName()), <span class="string">&quot;m.menu_name&quot;</span>, sysMenuVo.getMenuName())</span><br><span class="line">                                                                     .likeRight(!StringUtils.isEmpty(sysMenuVo.getStatus()), <span class="string">&quot;m.status&quot;</span>, sysMenuVo.getStatus())</span><br><span class="line">                                                                    );</span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(pageNumer.getPageNum())) &#123;</span><br><span class="line">        PageHelper.startPage(pageNumer.getPageNum(), pageNumer.getPageSize());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 配置</span></span><br><span class="line">    <span class="type">TreeNodeConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNodeConfig</span>();</span><br><span class="line">    <span class="comment">// 自定义属性名 都要默认值的</span></span><br><span class="line">    config.setIdKey(<span class="string">&quot;menuId&quot;</span>);</span><br><span class="line">    config.setWeightKey(<span class="string">&quot;indexNo&quot;</span>);</span><br><span class="line">    config.setNameKey(<span class="string">&quot;menuName&quot;</span>);</span><br><span class="line">    config.setChildrenKey(<span class="string">&quot;children&quot;</span>);</span><br><span class="line">    <span class="comment">// 最大递归深度</span></span><br><span class="line">    config.setDeep(<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> TreeUtil.build(sysMenuExtendList, <span class="string">&quot;0&quot;</span>, config, (treeNode, tree) -&gt; &#123;</span><br><span class="line">        tree.setId(treeNode.getMenuId().toString());</span><br><span class="line">        tree.setParentId(treeNode.getParentId().toString());</span><br><span class="line">        tree.setWeight(treeNode.getMenuId());</span><br><span class="line">        tree.setName(treeNode.getMenuName());</span><br><span class="line">        <span class="comment">// 扩展属性 ...</span></span><br><span class="line">        tree.putExtra(<span class="string">&quot;icon&quot;</span>, treeNode.getIcon());</span><br><span class="line">        tree.putExtra(<span class="string">&quot;path&quot;</span>, treeNode.getPath());</span><br><span class="line">        tree.putExtra(<span class="string">&quot;perms&quot;</span>, treeNode.getPerms());</span><br><span class="line">        tree.putExtra(<span class="string">&quot;createBy&quot;</span>, treeNode.getCreateBy());</span><br><span class="line">        tree.putExtra(<span class="string">&quot;createTime&quot;</span>, treeNode.getCreateTime());</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>新增、编辑</title>
      <link href="/posts/87c6f57f.html"/>
      <url>/posts/87c6f57f.html</url>
      
        <content type="html"><![CDATA[<h1>父组件</h1><p><strong>按钮</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081543980.png" alt="image.png"><img src="https://cdn.nlark.com/yuque/0/2023/png/29786728/1697763373399-0006efd4-ba11-40b6-9e11-96d34ea087c2.png#averageHue=%23292d36&amp;clientId=udbf106f1-a496-4&amp;from=paste&amp;height=300&amp;id=u1f4227d4&amp;originHeight=300&amp;originWidth=883&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=64735&amp;status=done&amp;style=none&amp;taskId=u8afab045-0f24-4d7a-957b-40e74b8ad6f&amp;title=&amp;width=883" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=&quot;margin: 10px 0&quot;&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot; @click=&quot;add()&quot;&gt;新增 &lt;i class=&quot;el-icon-circle-plus-outline&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">  &lt;el-button type=&quot;danger&quot;&gt;批量删除 &lt;i class=&quot;el-icon-remove-outline&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot;&gt;导入 &lt;i class=&quot;el-icon-bottom&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot;&gt;导出 &lt;i class=&quot;el-icon-top&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">  &lt;el-button type=&quot;primary&quot; @click=&quot;onPrint()&quot;&gt;打印 &lt;i class=&quot;el-icon-top&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label=&quot;操作&quot; width=&quot;250&quot; align=&quot;center&quot;&gt;</span><br><span class="line">  &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">    &lt;el-button type=&quot;success&quot; @click=&quot;update(scope.row)&quot;&gt;编辑 &lt;i class=&quot;el-icon-edit&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;danger&quot;&gt;删除 &lt;i class=&quot;el-icon-remove-outline&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure><p><strong>导入与引用子组件</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081543402.png" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import UserAdd from &#x27;./UserAdd.vue&#x27;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">components: &#123;</span><br><span class="line">    AsideNav, UserAdd</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p><strong>使用子组件</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081543700.png" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--新增弹窗--&gt;</span><br><span class="line">&lt;UserAdd</span><br><span class="line">    :dialogVisible=&quot;dialogVisible&quot;</span><br><span class="line">    @Visible=&quot;getVisible&quot;</span><br><span class="line">    :formType=&quot;formType ==&#x27;add&#x27;?&#x27;add&#x27;:&#x27;update&#x27;&quot;</span><br><span class="line">    :rule-form=&quot;procureDatils&quot;</span><br><span class="line">    :title=tilte</span><br><span class="line">&gt;&lt;/UserAdd&gt;</span><br></pre></td></tr></table></figure><p><strong>定义属性</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081543001.png" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 新增弹窗</span><br><span class="line">dialogVisible: false,</span><br><span class="line">// 是新增还是更新</span><br><span class="line">formType: &quot;add&quot;,</span><br><span class="line">//新增还是编辑</span><br><span class="line">tilte: &quot;&quot;,</span><br><span class="line">// 选中行的数据</span><br><span class="line">procureDatils: &#123;&#125;,</span><br></pre></td></tr></table></figure><p><strong>新增、编辑与获取子组件数据方法</strong><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081543223.png" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 添加用户</span><br><span class="line">add() &#123;</span><br><span class="line">  this.dialogVisible = !this.dialogVisible</span><br><span class="line">  //是新增</span><br><span class="line">  this.formType = &quot;add&quot;</span><br><span class="line">  this.tilte = &quot;新增页面&quot;</span><br><span class="line">  this.procureDatils = &#123;&#125;</span><br><span class="line">&#125;,</span><br><span class="line">update(data) &#123;</span><br><span class="line">  this.dialogVisible = !this.dialogVisible</span><br><span class="line">  //是编辑</span><br><span class="line">  this.formType = &quot;update&quot;</span><br><span class="line">  this.tilte = &quot;编辑页面&quot;</span><br><span class="line">  //将当前数据传给子组件</span><br><span class="line">  this.procureDatils = data</span><br><span class="line">&#125;,</span><br><span class="line">// 获取子组件的数据</span><br><span class="line">getVisible(data) &#123;</span><br><span class="line">  this.dialogVisible = data</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h1>子组件</h1><h1>完整代码</h1><h2 id="父组件">父组件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-container style=&quot;min-height: 100vh&quot;&gt;</span><br><span class="line">    &lt;!--侧边栏--&gt;</span><br><span class="line">    &lt;AsideNav</span><br><span class="line">        :logo-text-show=&quot;logoTextShow&quot;</span><br><span class="line">    &gt;&lt;/AsideNav&gt;</span><br><span class="line">    &lt;el-container&gt;</span><br><span class="line">      &lt;el-header style=&quot;font-size: 12px; border-bottom: 1px solid #ccc; line-height: 60px; display: flex&quot;&gt;</span><br><span class="line">        &lt;div style=&quot;flex: 1; font-size: 20px&quot;&gt;</span><br><span class="line">          &lt;!--&lt;span :class=&quot;collapseBtnClass&quot; style=&quot;cursor: pointer&quot; @click=&quot;collapse&quot;&gt;&lt;/span&gt;--&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;el-dropdown style=&quot;width: 70px; cursor: pointer&quot;&gt;</span><br><span class="line">          &lt;span&gt;&#123;&#123; user.name &#125;&#125;&lt;/span&gt;&lt;i class=&quot;el-icon-arrow-down&quot; style=&quot;margin-left: 5px&quot;&gt;&lt;/i&gt;</span><br><span class="line">          &lt;el-dropdown-menu slot=&quot;dropdown&quot;&gt;</span><br><span class="line">            &lt;el-dropdown-item style=&quot;font-size: 14px; padding: 5px 10px&quot; @click=&quot;userselect&quot;&gt;个人信息</span><br><span class="line">            &lt;/el-dropdown-item&gt;</span><br><span class="line">            &lt;el-dropdown-item style=&quot;font-size: 14px; padding: 5px 10px&quot; @click.native=&quot;logout&quot;&gt;退出</span><br><span class="line">            &lt;/el-dropdown-item&gt;</span><br><span class="line">          &lt;/el-dropdown-menu&gt;</span><br><span class="line">        &lt;/el-dropdown&gt;</span><br><span class="line">      &lt;/el-header&gt;</span><br><span class="line">      &lt;el-main&gt;</span><br><span class="line">        &lt;div style=&quot;margin-bottom: 30px&quot;&gt;</span><br><span class="line">          &lt;el-breadcrumb separator=&quot;/&quot;&gt;</span><br><span class="line">            &lt;el-breadcrumb-item :to=&quot;&#123; path: &#x27;/&#x27; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">            &lt;el-breadcrumb-item&gt;用户管理&lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;/el-breadcrumb&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div style=&quot;margin: 10px 0&quot;&gt;</span><br><span class="line">          &lt;el-input style=&quot;width: 200px; margin-left:2px&quot; placeholder=&quot;请输入名称&quot; suffix-icon=&quot;el-icon-search&quot;</span><br><span class="line">                    v-model=&quot;form.name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">          &lt;el-input style=&quot;width: 200px; margin-left:10px&quot; placeholder=&quot;请输入邮箱&quot; suffix-icon=&quot;el-icon-message&quot;</span><br><span class="line">                    class=&quot;ml-5&quot;</span><br><span class="line">                    v-model=&quot;form.email&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">          &lt;el-button class=&quot;ml-5&quot; style=&quot;margin-left:10px&quot; type=&quot;primary&quot; @click=&quot;load&quot;&gt;搜索&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button class=&quot;ml-5&quot; style=&quot;margin-left:10px&quot; type=&quot;primary&quot; @click=&quot;resetting&quot;&gt;重置&lt;/el-button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div style=&quot;margin: 10px 0&quot;&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;add()&quot;&gt;新增 &lt;i class=&quot;el-icon-circle-plus-outline&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type=&quot;danger&quot;&gt;批量删除 &lt;i class=&quot;el-icon-remove-outline&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot;&gt;导入 &lt;i class=&quot;el-icon-bottom&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot;&gt;导出 &lt;i class=&quot;el-icon-top&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;onPrint()&quot;&gt;打印 &lt;i class=&quot;el-icon-top&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-table :data=&quot;tableData&quot; border stripe :header-cell-class-name=&quot;headerBg&quot;&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;id&quot; label=&quot;ID&quot; width=&quot;80&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;name&quot; label=&quot;用户名&quot; width=&quot;140&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;age&quot; label=&quot;昵称&quot; width=&quot;120&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column prop=&quot;email&quot; label=&quot;邮箱&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">          &lt;el-table-column label=&quot;操作&quot; width=&quot;250&quot; align=&quot;center&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">              &lt;el-button type=&quot;success&quot; @click=&quot;update(scope.row)&quot;&gt;编辑 &lt;i class=&quot;el-icon-edit&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type=&quot;danger&quot;&gt;删除 &lt;i class=&quot;el-icon-remove-outline&quot;&gt;&lt;/i&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">        &lt;div style=&quot;padding: 10px 0&quot;&gt;</span><br><span class="line">          &lt;el-pagination</span><br><span class="line">              @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">              @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">              :current-page=&quot;pageNum&quot;</span><br><span class="line">              :page-sizes=&quot;[2, 5, 10, 20]&quot;</span><br><span class="line">              :page-size=&quot;pageSize&quot;</span><br><span class="line">              layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">              :total=&quot;total&quot;&gt;</span><br><span class="line">          &lt;/el-pagination&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-main&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!--新增弹窗--&gt;</span><br><span class="line">      &lt;UserAdd</span><br><span class="line">          :dialogVisible=&quot;dialogVisible&quot;</span><br><span class="line">          @Visible=&quot;getVisible&quot;</span><br><span class="line">          :formType=&quot;formType ==&#x27;add&#x27;?&#x27;add&#x27;:&#x27;update&#x27;&quot;</span><br><span class="line">          :rule-form=&quot;procureDatils&quot;</span><br><span class="line">          :title=tilte</span><br><span class="line">      &gt;&lt;/UserAdd&gt;</span><br><span class="line">      &lt;!-- 打印清册表 --&gt;</span><br><span class="line">      &lt;el-dialog</span><br><span class="line">          title=&quot;打印订单表&quot;</span><br><span class="line">          :visible.sync=&quot;openSave&quot;</span><br><span class="line">          append-to-body</span><br><span class="line">          :close-on-click-modal=&quot;false&quot;</span><br><span class="line">          width=&quot;1000px&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;div id=&quot;printId&quot;&gt;</span><br><span class="line">          &lt;table width=&quot;900&quot; border=&quot;1&quot; cellspacing=&quot;0&quot; style=&quot;margin: auto&quot;&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;td style=&quot;font-weight: bold&quot;&gt;用户名&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr v-for=&quot;(item,index) of tableData&quot; :key=&quot;item.id+index&quot;&gt;</span><br><span class="line">              &lt;td width=&quot;100px&quot; v-text=&quot;item.name&quot;&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">          &lt;/table&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">          &lt;el-button @click=&quot;addDealsBut&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button @click=&quot;cancelBut&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-dialog&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/el-container&gt;</span><br><span class="line">  &lt;/el-container&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">import &#123;list&#125; from &quot;@/assets/js/user&quot;;</span><br><span class="line">import AsideNav from &quot;@/components/AsideNav.vue&quot;;</span><br><span class="line">import UserAdd from &#x27;./UserAdd.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;Home&#x27;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    AsideNav, UserAdd</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 新增弹窗</span><br><span class="line">      dialogVisible: false,</span><br><span class="line">      // 是新增还是更新</span><br><span class="line">      formType: &quot;add&quot;,</span><br><span class="line">      //新增还是编辑</span><br><span class="line">      tilte: &quot;&quot;,</span><br><span class="line">      // 选中行的数据</span><br><span class="line">      procureDatils: &#123;&#125;,</span><br><span class="line">      // 打印弹窗</span><br><span class="line">      openSave: false,</span><br><span class="line">      tableData: [],</span><br><span class="line">      total: 0,</span><br><span class="line">      pageNum: 1,</span><br><span class="line">      user: &quot;&quot;,</span><br><span class="line">      pageSize: 2,</span><br><span class="line">      collapseBtnClass: &#x27;el-icon-s-fold&#x27;,</span><br><span class="line">      logoTextShow: true,</span><br><span class="line">      headerBg: &#x27;headerBg&#x27;,</span><br><span class="line">      form: &#123;</span><br><span class="line">        name: &quot;&quot;,</span><br><span class="line">        email: &quot;&quot;,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    // 请求分页查询数据</span><br><span class="line">    this.load()</span><br><span class="line">    this.user = this.$route.query.user;</span><br><span class="line">    console.log(this.user)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // 添加用户</span><br><span class="line">    add() &#123;</span><br><span class="line">      this.dialogVisible = !this.dialogVisible</span><br><span class="line">      //是新增</span><br><span class="line">      this.formType = &quot;add&quot;</span><br><span class="line">      this.tilte = &quot;新增页面&quot;</span><br><span class="line">      this.procureDatils = &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    update(data) &#123;</span><br><span class="line">      this.dialogVisible = !this.dialogVisible</span><br><span class="line">      //是编辑</span><br><span class="line">      this.formType = &quot;update&quot;</span><br><span class="line">      this.tilte = &quot;编辑页面&quot;</span><br><span class="line">      //将当前数据传给子组件</span><br><span class="line">      this.procureDatils = data</span><br><span class="line">    &#125;,</span><br><span class="line">    // 获取子组件的数据</span><br><span class="line">    getVisible(data) &#123;</span><br><span class="line">      this.dialogVisible = data</span><br><span class="line">    &#125;,</span><br><span class="line">    //跳转到网页打印</span><br><span class="line">    addDealsBut() &#123;</span><br><span class="line">      let diyHtml = document.querySelector(&quot;#printId&quot;).innerHTML;</span><br><span class="line">      window.document.body.innerHTML = diyHtml;</span><br><span class="line">      window.print();</span><br><span class="line">      window.location.reload();</span><br><span class="line">    &#125;,</span><br><span class="line">    //打印</span><br><span class="line">    onPrint(data) &#123;</span><br><span class="line">      console.log(data)</span><br><span class="line">      this.openSave = true;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 打印取消</span><br><span class="line">    cancelBut() &#123;</span><br><span class="line">      this.openSave = false;</span><br><span class="line">      this.tableData = null;</span><br><span class="line">      this.load()</span><br><span class="line">    &#125;,</span><br><span class="line">    //获取个人信息</span><br><span class="line">    userselect() &#123;</span><br><span class="line">      console.log(&quot;个人信息&quot;)</span><br><span class="line">    &#125;, //异步登出</span><br><span class="line">    async logout() &#123;</span><br><span class="line">      this.$confirm(&quot;确定退出系统吗？&quot;, &quot;提示&quot;, &#123;</span><br><span class="line">        confirmButtonText: &quot;确定&quot;,</span><br><span class="line">        cancelButtonText: &quot;取消&quot;,</span><br><span class="line">        type: &quot;warning&quot;,</span><br><span class="line">      &#125;).then(() =&gt; &#123;</span><br><span class="line">        this.$notify.success(&#123;</span><br><span class="line">          title: &quot;成功&quot;,</span><br><span class="line">          message: &quot;退出成功&quot;,</span><br><span class="line">        &#125;);</span><br><span class="line">        // 取代当前页，页面跳转至 /home 页</span><br><span class="line">        this.$router.replace(&quot;/&quot;);</span><br><span class="line">        //清除缓存</span><br><span class="line">        window.localStorage.setItem(&quot;token&quot;, &quot;&quot;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    //搜索</span><br><span class="line">    load() &#123;</span><br><span class="line">      let data = &#123;</span><br><span class="line">        name: this.form.name,</span><br><span class="line">        email: this.form.email,</span><br><span class="line">        pageNum: this.pageNum,</span><br><span class="line">        pageSize: this.pageSize,</span><br><span class="line">      &#125;</span><br><span class="line">      list(data).then(res =&gt; &#123;</span><br><span class="line">        this.tableData = res.data.list</span><br><span class="line">        console.log(this.tableData)</span><br><span class="line">        this.total = res.data.total</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    //重置</span><br><span class="line">    resetting() &#123;</span><br><span class="line">      //重置数据</span><br><span class="line">      this.form = &#123;</span><br><span class="line">        name: &quot;&quot;,</span><br><span class="line">        email: &quot;&quot;,</span><br><span class="line">      &#125;;</span><br><span class="line">      this.pageNum = 1;</span><br><span class="line">      this.pageSize = 2;</span><br><span class="line">      //调用查询</span><br><span class="line">      this.load();</span><br><span class="line">    &#125;,</span><br><span class="line">    handleSizeChange(pageSize) &#123;</span><br><span class="line">      console.log(pageSize)</span><br><span class="line">      this.pageSize = pageSize</span><br><span class="line">      this.load()</span><br><span class="line">    &#125;,</span><br><span class="line">    handleCurrentChange(pageNum) &#123;</span><br><span class="line">      console.log(pageNum)</span><br><span class="line">      this.pageNum = pageNum</span><br><span class="line">      this.load()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">/* 在h1元素前始终插入分页符 */</span><br><span class="line">@media print &#123;</span><br><span class="line">  @page &#123;</span><br><span class="line">    size: auto;</span><br><span class="line">    margin: 20px 30px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .footer &#123;</span><br><span class="line">    page-break-after: always;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  #mainBody &#123;</span><br><span class="line">    margin-top: 0 !important;</span><br><span class="line">    margin-bottom: 0 !important;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">body &#123;</span><br><span class="line">  font-family: &quot;微软雅黑&quot;, Verdana, SimHei, &quot;Microsoft JhengHei&quot;, Tahoma;</span><br><span class="line">  line-height: 1.5;</span><br><span class="line">  background-color: #ffffff;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  margin: 0;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="子组件">子组件</h2>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>页面跳转传参</title>
      <link href="/posts/5dc6c29e.html"/>
      <url>/posts/5dc6c29e.html</url>
      
        <content type="html"><![CDATA[<p>参考地址：<a href="https://www.jb51.net/article/281056.htm#_label1">https://www.jb51.net/article/281056.htm#_label1</a><br>获取当前行数据 ：scope.row</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button @click=&quot;showDetail(scope.row.FBillNo)&quot; type=&quot;text&quot; size=&quot;small&quot;&gt;查看&lt;/el-button&gt;</span><br></pre></td></tr></table></figure><h3 id="方法一">方法一</h3><p><strong>path，query（）</strong> <strong>这个方法地址栏会出现参数，不太安全</strong><br>传递页面<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081542623.png" alt="image.png"></p><ul><li>item是获取到的所有的数据，将数据赋值给变量。</li><li>this.$router.push是跳转的意思。</li><li>path放要跳转地址（具体可以去看index.js），query里面放参数名和要携带的参数。</li></ul><p>参数名（UserId，UserPhone，Price）要在data里面定义。注意：path要与query一起用。<br>接收页面：<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081542109.png" alt="image.png"></p><h3 id="方法二">方法二</h3><p><strong>name，params 地址栏没有参数，比较安全</strong><br>传递页面：<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081543170.png" alt="image.png"><br>使用与上面类似<br>接收页面：<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081543269.png" alt="image.png"><br>注意：我之前出现过，name和query一起用的情况。一直传递不过去，所以注意name一定与params一起使用。path与query一起使用。</p><h3 id="vue页面跳转，以及携带参数，获取参数">vue页面跳转，以及携带参数，获取参数</h3><p>js操作路由(即编程式的导航)进行页面跳转：<br><strong>1. 返回/前进一页：</strong></p><ul><li>返回：this.$router.go(-1)、this.$router.back()。</li><li>前进：this.$router.go(1)</li></ul><p><strong>2. 跳转到其他页：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//params只能用name来引入路由,类似于post，在浏览器地址栏中不显示参数，</span></span><br><span class="line"><span class="comment">//而query 要用path引入,似于我们ajax中get传参，在浏览器地址栏中显示参数</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&quot;/parent&quot;</span>)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;<span class="attr">path</span>:<span class="string">&quot;/parent&quot;</span>,<span class="attr">query</span>:&#123;<span class="attr">name</span>:<span class="string">&quot;ace&quot;</span>&#125;) <span class="comment">//即浏览历史纪录保存着,query是参数。获取参数：this.$route.query.name</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;<span class="attr">path</span>:<span class="string">`/argu/<span class="subst">$&#123;name&#125;</span>`</span>&#125;)  <span class="comment">//es6带参数跳转，针对router.js中配置path: &#x27;/argu/:name&#x27;,。获取参数：this.$route.query.name</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;<span class="attr">name</span>:<span class="string">&quot;parent&quot;</span>,<span class="attr">params</span>:&#123;<span class="attr">name</span>:<span class="string">&quot;ace&quot;</span>&#125;) <span class="comment">//带参数跳转。获取参数：this.$route.params.name</span></span><br></pre></td></tr></table></figure><p><strong>3. 用其他页替换本页：</strong><br>this.$router.replace(“/about”)或this.$router.replace({name:“parent”})，即浏览历史纪录没有了。<br>**4. 基于动态路由的页面（path: ‘/argu/:name’）传值。 **</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/argu/:name&#x27;</span>,</span><br><span class="line">    <span class="attr">props</span>:<span class="literal">true</span>,             <span class="comment">//表示允许Argu.vue组件中props:&#123;&#125;中接受name参数值，然后可以直接渲染在页面&#123;&#123;name&#125;&#125;</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>( <span class="string">&#x27;./views/argu.vue&#x27;</span> )  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>5. 基于普通页面传参,对象模式传参。</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">props</span>:&#123;</span><br><span class="line">        <span class="attr">food</span>:<span class="string">&quot;香蕉&quot;</span></span><br><span class="line">    &#125;,                      <span class="comment">//表示允许about.vue组件中props:&#123;&#125;中接受food参数值，然后可以直接渲染在页面&#123;&#123;food&#125;&#125;</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>( <span class="string">&#x27;./views/argu.vue&#x27;</span>)  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**6. 基于普通页面传参,函数模式传参。   **</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/parent&#x27;</span>,</span><br><span class="line">    <span class="attr">props</span>: <span class="function"><span class="params">route</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">food</span>:route.<span class="property">query</span>.<span class="property">food</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,                      <span class="comment">//表示允许parent.vue组件中props:&#123;&#125;中接受food参数值，然后可以直接渲染在页面&#123;&#123;food&#125;&#125;</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>( <span class="string">&#x27;./views/argu.vue&#x27;</span>)  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现动态路由</title>
      <link href="/posts/7eceed84.html"/>
      <url>/posts/7eceed84.html</url>
      
        <content type="html"><![CDATA[<h1>后端</h1><p><strong>实现类</strong><br>实现树形结构传给前段</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户权限菜单</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sysMenuVo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pageNumer</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Tree&lt;String&gt;&gt; <span class="title function_">searchUserMenu</span><span class="params">(SysMenuVo sysMenuVo, Long id, PageNumer pageNumer)</span> &#123;</span><br><span class="line"></span><br><span class="line">    List&lt;SysMenuExtend&gt; sysMenuExtendList = sysMenuMapper.menuSearch(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;SysMenu&gt;()</span><br><span class="line">                                                                     .eq(!StringUtils.isEmpty(id), <span class="string">&quot;user_id&quot;</span>, id)</span><br><span class="line">                                                                     .eq(<span class="string">&quot;r.status&quot;</span>, StateConstant.COMMON_ZROE)</span><br><span class="line">                                                                     .eq(<span class="string">&quot;m.status&quot;</span>, StateConstant.COMMON_ZROE)</span><br><span class="line">                                                                     .notIn(<span class="string">&quot;m.menu_type&quot;</span>, StateConstant.COMMON_F)</span><br><span class="line">                                                                     .likeRight(!StringUtils.isEmpty(sysMenuVo.getMenuName()), <span class="string">&quot;m.menu_name&quot;</span>, sysMenuVo.getMenuName())</span><br><span class="line">                                                                     .likeRight(!StringUtils.isEmpty(sysMenuVo.getStatus()), <span class="string">&quot;m.status&quot;</span>, sysMenuVo.getStatus())</span><br><span class="line">                                                                    );</span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(pageNumer.getPageNum())) &#123;</span><br><span class="line">        PageHelper.startPage(pageNumer.getPageNum(), pageNumer.getPageSize());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 配置</span></span><br><span class="line">    <span class="type">TreeNodeConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNodeConfig</span>();</span><br><span class="line">    <span class="comment">// 自定义属性名 都要默认值的</span></span><br><span class="line">    config.setIdKey(<span class="string">&quot;menuId&quot;</span>);</span><br><span class="line">    config.setWeightKey(<span class="string">&quot;indexNo&quot;</span>);</span><br><span class="line">    config.setNameKey(<span class="string">&quot;menuName&quot;</span>);</span><br><span class="line">    config.setChildrenKey(<span class="string">&quot;children&quot;</span>);</span><br><span class="line">    <span class="comment">// 最大递归深度</span></span><br><span class="line">    config.setDeep(<span class="number">2</span>);</span><br><span class="line">    List&lt;Tree&lt;String&gt;&gt; trees = TreeUtil.build(sysMenuExtendList, <span class="string">&quot;0&quot;</span>, config, (treeNode, tree) -&gt; &#123;</span><br><span class="line">        tree.setId(String.valueOf(treeNode.getMenuId()));</span><br><span class="line">        tree.setParentId(treeNode.getParentId().toString());</span><br><span class="line">        tree.setWeight(treeNode.getMenuId());</span><br><span class="line">        tree.setName(treeNode.getMenuName());</span><br><span class="line">        <span class="comment">// 扩展属性 ...</span></span><br><span class="line">        tree.putExtra(<span class="string">&quot;icon&quot;</span>, treeNode.getIcon());</span><br><span class="line">        tree.putExtra(<span class="string">&quot;path&quot;</span>, treeNode.getPath());</span><br><span class="line">        tree.putExtra(<span class="string">&quot;perms&quot;</span>, treeNode.getPerms());</span><br><span class="line">        tree.putExtra(<span class="string">&quot;component&quot;</span>, treeNode.getComponent());</span><br><span class="line">        tree.putExtra(<span class="string">&quot;createBy&quot;</span>, treeNode.getCreateBy());</span><br><span class="line">        tree.putExtra(<span class="string">&quot;createTime&quot;</span>, treeNode.getCreateTime());</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> trees;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>mapper</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ew</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;SysMenuExtend&gt; <span class="title function_">menuSearch</span><span class="params">(<span class="meta">@Param(&quot;ew&quot;)</span> Wrapper ew)</span>;</span><br></pre></td></tr></table></figure><p>xml</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span><span class="keyword">select</span> id<span class="operator">=</span>&quot;menuSearch&quot; resultType<span class="operator">=</span>&quot;com.zwl.extend.SysMenuExtend&quot;<span class="operator">&gt;</span></span><br><span class="line">        <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> m.<span class="operator">*</span></span><br><span class="line">        <span class="keyword">FROM</span> sys_role_menu rm</span><br><span class="line">                 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> sys_role r <span class="keyword">ON</span> r.role_id <span class="operator">=</span> rm.role_id</span><br><span class="line">                 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> sys_role_user ru <span class="keyword">ON</span> ru.role_id <span class="operator">=</span> r.role_id</span><br><span class="line">                 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> sys_user u <span class="keyword">ON</span> u.id <span class="operator">=</span> ru.user_id</span><br><span class="line">                 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> sys_menu m <span class="keyword">ON</span> m.menu_id <span class="operator">=</span> rm.menu_id</span><br><span class="line">            $&#123;ew.customSqlSegment&#125;</span><br><span class="line">    <span class="operator">&lt;</span><span class="operator">/</span><span class="keyword">select</span><span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><h1>前端</h1><p><strong>简单的路由调整index.js</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import Vue from <span class="string">&quot;vue&quot;</span>;</span><br><span class="line">import VueRouter from <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line">import <span class="punctuation">&#123;</span>searchUserMenu<span class="punctuation">&#125;</span> from <span class="string">&quot;@/assets/js/menu&quot;</span>;</span><br><span class="line"></span><br><span class="line">import store from <span class="string">&quot;@/store&quot;</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter);</span><br><span class="line"></span><br><span class="line">const routes = <span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    path<span class="punctuation">:</span> <span class="string">&quot;/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    name<span class="punctuation">:</span> <span class="string">&quot;Login&quot;</span><span class="punctuation">,</span></span><br><span class="line">    component<span class="punctuation">:</span> () =&gt; import(<span class="string">&quot;../components/Login.vue&quot;</span>)<span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    path<span class="punctuation">:</span> <span class="string">&quot;/home&quot;</span><span class="punctuation">,</span></span><br><span class="line">    name<span class="punctuation">:</span> <span class="string">&quot;Home&quot;</span><span class="punctuation">,</span></span><br><span class="line">    component<span class="punctuation">:</span> () =&gt; import(<span class="string">&quot;@/views/home&quot;</span>)<span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">]</span>;</span><br><span class="line"></span><br><span class="line">const router = new VueRouter(<span class="punctuation">&#123;</span></span><br><span class="line">  routes<span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span>);</span><br></pre></td></tr></table></figure><p><strong>从后端获取路由</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//调用-获取动态菜单</span></span><br><span class="line"> await searchUserMenu().then((res) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="comment">//将相应数据存入到store中</span></span><br><span class="line">   store.commit(<span class="string">&quot;setMenuList&quot;</span><span class="punctuation">,</span> res.data);</span><br><span class="line"> <span class="punctuation">&#125;</span>);</span><br></pre></td></tr></table></figure><p><strong>转化层级结构菜单为动态路由</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 转化层级结构菜单为动态路由</span></span><br><span class="line">function menuToRouter(menuTree) <span class="punctuation">&#123;</span></span><br><span class="line">  let tempArray = <span class="punctuation">[</span><span class="punctuation">]</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//动态菜单转换为动态路由</span></span><br><span class="line">  if (Array.isArray(menuTree)) <span class="punctuation">&#123;</span></span><br><span class="line">    menuTree.forEach((m) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="comment">//动态路由数据</span></span><br><span class="line">      let routers = <span class="punctuation">&#123;</span></span><br><span class="line">        path<span class="punctuation">:</span> m.path<span class="punctuation">,</span></span><br><span class="line">        <span class="comment">// name: &quot;zwl&quot;, //todo 后端传</span></span><br><span class="line">        component<span class="punctuation">:</span></span><br><span class="line">          m.component != <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">            ? (resolve) =&gt; require(<span class="punctuation">[</span>`@/views$<span class="punctuation">&#123;</span>m.component<span class="punctuation">&#125;</span>`<span class="punctuation">]</span><span class="punctuation">,</span> resolve)</span><br><span class="line">            <span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span> <span class="comment">//todo 后端传</span></span><br><span class="line">        meta<span class="punctuation">:</span> <span class="punctuation">&#123;</span> title<span class="punctuation">:</span> m.menuName <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        children<span class="punctuation">:</span> m.children != <span class="literal"><span class="keyword">null</span></span> ? menuToRouter(m.children) <span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#125;</span>;</span><br><span class="line">      <span class="comment">//将动态路由添加到父路由下面</span></span><br><span class="line">      router.addRoute(routers);</span><br><span class="line">      tempArray.push(routers);</span><br><span class="line">    <span class="punctuation">&#125;</span>);</span><br><span class="line">    return tempArray;</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>将层级数据添加到路由中</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//生成动态路由的函数</span></span><br><span class="line">async function getDynamicRouter() <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">//调用-获取动态菜单</span></span><br><span class="line">  await searchUserMenu().then((res) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">//将相应数据存入到store中</span></span><br><span class="line">    store.commit(<span class="string">&quot;setMenuList&quot;</span><span class="punctuation">,</span> res.data);</span><br><span class="line">  <span class="punctuation">&#125;</span>);</span><br><span class="line">  <span class="comment">//从store中获取动态菜单（层级结构）</span></span><br><span class="line">  let menuArray = store.getters.getMenuList;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//调用-转化层级结构菜单为动态路由</span></span><br><span class="line">  menuToRouter(menuArray);</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//调用生成动态路由</span></span><br><span class="line">getDynamicRouter();</span><br></pre></td></tr></table></figure><p><strong>解决刷新后路由消失问题</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解决刷新后路由消失问题</span></span><br><span class="line"><span class="comment">//导航守卫</span></span><br><span class="line">router.beforeEach(async (to<span class="punctuation">,</span> from<span class="punctuation">,</span> next) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">//动态路由数据生成是</span></span><br><span class="line">  if (!store.getters.getHasDynamicRouter) <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">//调用生成动态路由</span></span><br><span class="line">    await getDynamicRouter();</span><br><span class="line">    <span class="comment">//标记 -hasDynamicRouter</span></span><br><span class="line">    store.commit(<span class="string">&quot;setHasDynamicRouter&quot;</span><span class="punctuation">,</span> <span class="literal"><span class="keyword">true</span></span>);</span><br><span class="line">    return to;</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line">  next();</span><br><span class="line"><span class="punctuation">&#125;</span>);</span><br></pre></td></tr></table></figure><p><strong>完整代码</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">import Vue from <span class="string">&quot;vue&quot;</span>;</span><br><span class="line">import VueRouter from <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line">import <span class="punctuation">&#123;</span> searchUserMenu <span class="punctuation">&#125;</span> from <span class="string">&quot;@/assets/js/menu&quot;</span>;</span><br><span class="line"></span><br><span class="line">import store from <span class="string">&quot;@/store&quot;</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter);</span><br><span class="line"></span><br><span class="line">const routes = <span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    path<span class="punctuation">:</span> <span class="string">&quot;/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    name<span class="punctuation">:</span> <span class="string">&quot;Login&quot;</span><span class="punctuation">,</span></span><br><span class="line">    component<span class="punctuation">:</span> () =&gt; import(<span class="string">&quot;../components/Login.vue&quot;</span>)<span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    path<span class="punctuation">:</span> <span class="string">&quot;/home&quot;</span><span class="punctuation">,</span></span><br><span class="line">    name<span class="punctuation">:</span> <span class="string">&quot;Home&quot;</span><span class="punctuation">,</span></span><br><span class="line">    component<span class="punctuation">:</span> () =&gt; import(<span class="string">&quot;@/views/home&quot;</span>)<span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">]</span>;</span><br><span class="line"></span><br><span class="line">const router = new VueRouter(<span class="punctuation">&#123;</span></span><br><span class="line">  routes<span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 转化层级结构菜单为动态路由</span></span><br><span class="line">function menuToRouter(menuTree) <span class="punctuation">&#123;</span></span><br><span class="line">  let tempArray = <span class="punctuation">[</span><span class="punctuation">]</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//动态菜单转换为动态路由</span></span><br><span class="line">  if (Array.isArray(menuTree)) <span class="punctuation">&#123;</span></span><br><span class="line">    menuTree.forEach((m) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="comment">//动态路由数据</span></span><br><span class="line">      let routers = <span class="punctuation">&#123;</span></span><br><span class="line">        path<span class="punctuation">:</span> m.path<span class="punctuation">,</span></span><br><span class="line">        <span class="comment">// name: &quot;zwl&quot;, //todo 后端传</span></span><br><span class="line">        component<span class="punctuation">:</span></span><br><span class="line">          m.component != <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">            ? (resolve) =&gt; require(<span class="punctuation">[</span>`@/views$<span class="punctuation">&#123;</span>m.component<span class="punctuation">&#125;</span>`<span class="punctuation">]</span><span class="punctuation">,</span> resolve)</span><br><span class="line">            <span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span> <span class="comment">//todo 后端传</span></span><br><span class="line">        meta<span class="punctuation">:</span> <span class="punctuation">&#123;</span> title<span class="punctuation">:</span> m.menuName <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        children<span class="punctuation">:</span> m.children != <span class="literal"><span class="keyword">null</span></span> ? menuToRouter(m.children) <span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#125;</span>;</span><br><span class="line">      <span class="comment">//将动态路由添加到父路由下面</span></span><br><span class="line">      router.addRoute(routers);</span><br><span class="line">      tempArray.push(routers);</span><br><span class="line">    <span class="punctuation">&#125;</span>);</span><br><span class="line">    return tempArray;</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//生成动态路由的函数</span></span><br><span class="line">async function getDynamicRouter() <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">//调用-获取动态菜单</span></span><br><span class="line">  await searchUserMenu().then((res) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">//将相应数据存入到store中</span></span><br><span class="line">    store.commit(<span class="string">&quot;setMenuList&quot;</span><span class="punctuation">,</span> res.data);</span><br><span class="line">  <span class="punctuation">&#125;</span>);</span><br><span class="line">  <span class="comment">//从store中获取动态菜单（层级结构）</span></span><br><span class="line">  let menuArray = store.getters.getMenuList;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//调用-转化层级结构菜单为动态路由</span></span><br><span class="line">  menuToRouter(menuArray);</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//调用生成动态路由</span></span><br><span class="line">getDynamicRouter();</span><br><span class="line"></span><br><span class="line"><span class="comment">//解决刷新后路由消失问题</span></span><br><span class="line"><span class="comment">//导航守卫</span></span><br><span class="line">router.beforeEach(async (to<span class="punctuation">,</span> from<span class="punctuation">,</span> next) =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">//动态路由数据生成是</span></span><br><span class="line">  if (!store.getters.getHasDynamicRouter) <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">//调用生成动态路由</span></span><br><span class="line">    await getDynamicRouter();</span><br><span class="line">    <span class="comment">//标记 -hasDynamicRouter</span></span><br><span class="line">    store.commit(<span class="string">&quot;setHasDynamicRouter&quot;</span><span class="punctuation">,</span> <span class="literal"><span class="keyword">true</span></span>);</span><br><span class="line">    return to;</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line">  next();</span><br><span class="line"><span class="punctuation">&#125;</span>);</span><br><span class="line"></span><br><span class="line">export default router;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>多选框</title>
      <link href="/posts/fd4314c8.html"/>
      <url>/posts/fd4314c8.html</url>
      
        <content type="html"><![CDATA[<p>实现多选非常简单: 手动添加一个el-table-column，设type属性为selection即可；默认情况下若内容过多会折行显示，若需要单行显示可以使用show-overflow-tooltip属性，它接受一个Boolean，为true时多余的内容会在 hover 时以 tooltip 的形式显示出来</p><h1>表单多选框</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-table</span><br><span class="line">    ref=&quot;multipleTable&quot;</span><br><span class="line">    :data=&quot;tableData&quot;</span><br><span class="line">    tooltip-effect=&quot;dark&quot;</span><br><span class="line">    style=&quot;width: 100%&quot;</span><br><span class="line">    @selection-change=&quot;handleSelectionChange&quot;&gt;</span><br><span class="line">    &lt;el-table-column</span><br><span class="line">      type=&quot;selection&quot;</span><br><span class="line">      width=&quot;55&quot;&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column</span><br><span class="line">      label=&quot;日期&quot;</span><br><span class="line">      width=&quot;120&quot;&gt;</span><br><span class="line">      &lt;template slot-scope=&quot;scope&quot;&gt;&#123;&#123; scope.row.date &#125;&#125;&lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column</span><br><span class="line">      prop=&quot;name&quot;</span><br><span class="line">      label=&quot;姓名&quot;</span><br><span class="line">      width=&quot;120&quot;&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column</span><br><span class="line">      prop=&quot;address&quot;</span><br><span class="line">      label=&quot;地址&quot;</span><br><span class="line">      show-overflow-tooltip&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line">  &lt;div style=&quot;margin-top: 20px&quot;&gt;</span><br><span class="line">    &lt;el-button @click=&quot;toggleSelection([tableData[1], tableData[2]])&quot;&gt;切换第二、第三行的选中状态&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button @click=&quot;toggleSelection()&quot;&gt;取消选择&lt;/el-button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        tableData: [&#123;</span><br><span class="line">          date: &#x27;2016-05-03&#x27;,</span><br><span class="line">          name: &#x27;王小虎&#x27;,</span><br><span class="line">          address: &#x27;上海市普陀区金沙江路 1518 弄&#x27;</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          date: &#x27;2016-05-02&#x27;,</span><br><span class="line">          name: &#x27;王小虎&#x27;,</span><br><span class="line">          address: &#x27;上海市普陀区金沙江路 1518 弄&#x27;</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          date: &#x27;2016-05-04&#x27;,</span><br><span class="line">          name: &#x27;王小虎&#x27;,</span><br><span class="line">          address: &#x27;上海市普陀区金沙江路 1518 弄&#x27;</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          date: &#x27;2016-05-01&#x27;,</span><br><span class="line">          name: &#x27;王小虎&#x27;,</span><br><span class="line">          address: &#x27;上海市普陀区金沙江路 1518 弄&#x27;</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          date: &#x27;2016-05-08&#x27;,</span><br><span class="line">          name: &#x27;王小虎&#x27;,</span><br><span class="line">          address: &#x27;上海市普陀区金沙江路 1518 弄&#x27;</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          date: &#x27;2016-05-06&#x27;,</span><br><span class="line">          name: &#x27;王小虎&#x27;,</span><br><span class="line">          address: &#x27;上海市普陀区金沙江路 1518 弄&#x27;</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          date: &#x27;2016-05-07&#x27;,</span><br><span class="line">          name: &#x27;王小虎&#x27;,</span><br><span class="line">          address: &#x27;上海市普陀区金沙江路 1518 弄&#x27;</span><br><span class="line">        &#125;],</span><br><span class="line">        multipleSelection: []</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    methods: &#123;</span><br><span class="line">      toggleSelection(rows) &#123;</span><br><span class="line">        if (rows) &#123;</span><br><span class="line">          rows.forEach(row =&gt; &#123;</span><br><span class="line">            this.$refs.multipleTable.toggleRowSelection(row);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          this.$refs.multipleTable.clearSelection();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      handleSelectionChange(val) &#123;</span><br><span class="line">        this.multipleSelection = val;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1>根据多选实现按钮是否禁用</h1><p>根据 multipleSelection选中的数量控制是否禁用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button</span><br><span class="line">  class=&quot;ml-5&quot;</span><br><span class="line">  style=&quot;margin-left: 10px&quot;</span><br><span class="line">  type=&quot;primary&quot;</span><br><span class="line">  :disabled=&quot;multipleSelection.length == 0 ? true : false&quot;</span><br><span class="line">  @click=&quot;examine()&quot;</span><br><span class="line">  &gt;审核&lt;/el-button&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>process.env关键字</title>
      <link href="/posts/27780c25.html"/>
      <url>/posts/27780c25.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://blog.csdn.net/coinisi_li/article/details/128547778">https://blog.csdn.net/coinisi_li/article/details/128547778</a></p><h3 id="1-process-env-是Node-js-中的一个环境">1.process.env 是Node.js 中的一个环境</h3><p>打开<a href="https://so.csdn.net/so/search?q=%E5%91%BD%E4%BB%A4%E8%A1%8C&amp;spm=1001.2101.3001.7020">命令行</a>查看环境：<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081541505.png" alt=""></p><h3 id="2-process-env与Vue-CLI-项目">2.process.env与<a href="https://so.csdn.net/so/search?q=Vue&amp;spm=1001.2101.3001.7020">Vue</a> CLI 项目</h3><p>Vue <a href="https://so.csdn.net/so/search?q=Cli&amp;spm=1001.2101.3001.7020">Cli</a> 有以下三种运行模式</p><ul><li><strong>development 模式用于 vue-cli-service serve</strong></li><li><strong>test 模式用于 vue-cli-service test:unit</strong></li><li><strong>production 模式用于 vue-cli-service build 和 vue-cli-service test:e2e</strong></li></ul><p>我们查看<strong>package.json</strong>配置信息，运行<strong>Vue CLI</strong>命令：</p><ul><li><strong>开发环境运行npm run dev，</strong></li><li><strong>要部署服务器发布生产环境时运行npm run build</strong>，</li></ul><p>他们正好对应Vue CLI中的development模式和production模式，就会把该模式下的NODE_ENV载入其中了。<br>既然知道项目运行的是那个模式，是不是我们就可以在不同模式下运行不同的变量信息，如开发环境使用端口8080，线上（生产）环境的端口是80，这个时候你会想，我知道不同模式配置不同信息，那信息配置在那个文件呢？<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081541084.png" alt=""></p><p><strong>.env 文件配置</strong></p><blockquote><p>.env：全局默认配置文件，无论什么环境都会加载合并。<strong>.env.development：开发环境的配置文件</strong>.env.production：生产环境的配置文件</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081541877.png" alt=""><br>注意文件名是固定的，不要自定义。<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081541831.png" alt=""><br>属性名必须以 VUE_APP_ 开头，如：VUE_APP_XXX<br>vue 会根据启动命令自动加载相对应的环境配置文件。vue是根据文件名进行加载的，所以不要擅自更改。</p><ul><li>比如执行npm run serve命令，会自动加载.env.development文件</li><li>开发环境加载 .env 和 .env.development 。</li><li>生成环境加载 .env 和 .env.production 。</li></ul><p>运行npm run serve的时候主要还是看package.json中 server属性的–mode后面跟的是啥。如果是development，就会加载.env.development文件。</p><ul><li>vue-cli-service 默认会读取 env.development文件 ；</li><li>vue-cli-service - -mode dev 指定读取env.dev文件；</li></ul><p>在package.json里面配置好，执行serve的时候用开发环境的。build打包用生产或者测试的<br>package.json 配置项：</p><p><strong>环境配置文件 &gt; 全局配置文件</strong><br>当<strong>全局</strong>的配置文件和环境的配置文件有相同配置项时，环境的配置项会覆盖全局的配置项。<br>也就是<strong>全局</strong>的配置文件.env 文件会被.env.development这些覆盖 。<br>在配置文件中定义的属性在其它文件中如何访问：</p><blockquote><p>可以使用 <a href="http://process.env.xxx">process.env.xxx</a> 来访问属性</p></blockquote><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081541782.png" alt=""></p><h3 id="3-process-env-用来做什么">3.process.env 用来做什么</h3><p><strong>由于我们的项目需要在不同环境下进行运行(开发，生产，测试等)，这避免我们需要多次的去切换请求的地址以及相关的配置，vue-cli2是可以直接在config文件中进行配置的，但是vue-cli4和vue-cli3已经简化了，没有config文件怎么办？</strong></p><p><strong>1）建立.env系列文件</strong><br>首先我们在根目录新建3个文件，分别为 .env.development ，.env.production，.env.test<br>（注意文件是只有后缀的）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.env.development 模式用于serve，开发环境，就是开始环境的时候会引用这个文件里面的配置</span><br><span class="line">.env.production模式用于build，线上环境。</span><br><span class="line">.env.test 测试环境</span><br></pre></td></tr></table></figure><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081541420.png" alt=""><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081541650.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关闭页面清除本地缓存</title>
      <link href="/posts/17c3d103.html"/>
      <url>/posts/17c3d103.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://blog.csdn.net/m0_73854403/article/details/131432687">https://blog.csdn.net/m0_73854403/article/details/131432687</a><br>在Vue中，要关闭页面并清除本地存储，你可以使用以下步骤：</p><ol><li>在你的Vue组件中，监听窗口的beforeunload事件。这个事件会在页面即将关闭时触发。</li><li>在beforeunload事件的回调函数中，清除你的本地存储。你可以使用浏览器的localStorage对象来存储和清除数据。</li></ol><p>下面是一个示例代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;  </span><br><span class="line">  &lt;div&gt;  </span><br><span class="line">    &lt;!-- 页面内容 --&gt;  </span><br><span class="line">  &lt;/div&gt;  </span><br><span class="line">&lt;/template&gt;  </span><br><span class="line"></span><br><span class="line">&lt;script&gt;  </span><br><span class="line">  export default &#123;  </span><br><span class="line">    mounted() &#123;  </span><br><span class="line">      window.addEventListener(&#x27;beforeunload&#x27;, this.beforeUnloadHandler);  </span><br><span class="line">    &#125;,  </span><br><span class="line">    beforeDestroy() &#123;  </span><br><span class="line">      window.removeEventListener(&#x27;beforeunload&#x27;, this.beforeUnloadHandler);  </span><br><span class="line">    &#125;,  </span><br><span class="line">    methods: &#123;  </span><br><span class="line">      beforeUnloadHandler(event) &#123;  </span><br><span class="line">        // 清除本地存储  </span><br><span class="line">        localStorage.clear();  </span><br><span class="line"></span><br><span class="line">        // 阻止默认行为和冒泡  </span><br><span class="line">        event.preventDefault();  </span><br><span class="line">        event.stopPropagation();  </span><br><span class="line">      &#125;,  </span><br><span class="line">    &#125;,  </span><br><span class="line">  &#125;;  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>在上面的代码中，我们使用了mounted钩子来添加beforeunload事件监听器，并在beforeDestroy钩子中移除了事件监听器。在beforeUnloadHandler方法中，我们调用localStorage.clear()来清除本地存储。然后，我们通过调用event.preventDefault()和event.stopPropagation()来阻止默认行为和事件冒泡。<br>这样，当用户关闭页面时，本地存储将被清除。请注意，这只是一个简单的示例，你可以根据你的具体需求进行修改和扩展。</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现token的无感刷新</title>
      <link href="/posts/f3c0ee9b.html"/>
      <url>/posts/f3c0ee9b.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://blog.csdn.net/weixin_44582045/article/details/132539037">https://blog.csdn.net/weixin_44582045/article/details/132539037</a></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>转换为相应的字符值</title>
      <link href="/posts/c0aa1845.html"/>
      <url>/posts/c0aa1845.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://blog.csdn.net/weixin_43181470/article/details/127121030">https://blog.csdn.net/weixin_43181470/article/details/127121030</a><br><a href="https://blog.csdn.net/qq_45444035/article/details/119996768">https://blog.csdn.net/qq_45444035/article/details/119996768</a></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node版本控制</title>
      <link href="/posts/66212d29.html"/>
      <url>/posts/66212d29.html</url>
      
        <content type="html"><![CDATA[<p>多工具：<a href="https://blog.csdn.net/zz00008888/article/details/130581786">https://blog.csdn.net/zz00008888/article/details/130581786</a><br>nvm：<a href="https://blog.csdn.net/x550392236/article/details/129624741">https://blog.csdn.net/x550392236/article/details/129624741</a><br><a href="https://zhuanlan.zhihu.com/p/550264306">https://zhuanlan.zhihu.com/p/550264306</a></p><p>先删除电脑中node：<a href="https://blog.csdn.net/weixin_44767973/article/details/131591333">https://blog.csdn.net/weixin_44767973/article/details/131591333</a></p><p>fnm：<a href="https://cloud.tencent.com/developer/article/2324700">https://cloud.tencent.com/developer/article/2324700</a><br><a href="https://juejin.cn/post/7232856799171215420">https://juejin.cn/post/7232856799171215420</a><br>Fnm官网：<a href="https://blog.alanwei.com/blog/2022/11/27/fnm-node-version-manager/">https://blog.alanwei.com/blog/2022/11/27/fnm-node-version-manager/</a><br>GItHub：<a href="https://github.com/Schniz/fnm">https://github.com/Schniz/fnm</a><br><strong>前言</strong><br>最近在折腾Python，并将node升级至v18.14.2。突然发现一个旧项目无法运行，也无法打包，里面的node-sass报错，显然这是因为node版本过高导致的。<br>将node版本降低至以前的v14.16.0，果然立马就能正常运行。</p><p>存在不同项目使用npm时所需要的版本不一致，又不想每次都卸载又重新安装node，建议使用nvm，一个专门的node多版本管理器，下次想更换不同的node操作很方便，下面是nvm安装已经使用。</p><hr><h1>nvm简介</h1><p>nvm（node.js version management），是一个nodejs的版本管理工具。可以简单操作node版本的切换、安装、查看。。。<br>nvm和n都是node.js版本管理工具，为了解决node.js各种版本存在不兼容现象可以通过它可以安装和切换不同版本的node.js。</p><h1>nvm常用命令</h1><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">nvm <span class="keyword">list</span>查看已经安装的版本</span><br><span class="line">nvm <span class="keyword">list</span> installed查看已经安装的版本</span><br><span class="line">nvm <span class="keyword">list</span> available查看网络可以安装的版本</span><br><span class="line">nvm <span class="keyword">arch</span>查看当前系统的位数和当前nodejs的位数</span><br><span class="line">nvm install [<span class="keyword">arch</span>]安装制定版本的node 并且可以指定平台 <span class="keyword">version</span> 版本号 <span class="keyword">arch</span> 平台</span><br><span class="line">nvm <span class="keyword">on</span>打开nodejs版本控制</span><br><span class="line">nvm off关闭nodejs版本控制</span><br><span class="line">nvm proxy [url]查看和设置代理</span><br><span class="line">nvm node_mirror [url]设置或者查看setting.txt中的node_mirror，如果不设置的默认是 https:<span class="comment">//nodejs.org/dist/</span></span><br><span class="line">nvm npm_mirror [url]设置或者查看setting.txt中的npm_mirror,如果不设置的话默认的是：https:<span class="comment">//github.com/npm/npm/archive/.</span></span><br><span class="line">nvm uninstall卸载指定的版本</span><br><span class="line">nvm <span class="keyword">use</span> [<span class="keyword">version</span>] [<span class="keyword">arch</span>]切换指定的node版本和位数</span><br><span class="line">nvm root [path]设置和查看root路径</span><br><span class="line">nvm <span class="keyword">version</span>查看当前的版本</span><br></pre></td></tr></table></figure><h1>nvm下载安装</h1><p><a href="https://github.com/coreybutler/nvm-windows/releases">https://github.com/coreybutler/nvm-windows/releases</a><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/img/202312070840283.png" alt="image.png"></p><p>解压之后是nvm-setup.exe ，直接安装即可。</p><h1>安装nvm</h1><p>1、开始安装nvm<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/img/202312070841876.webp" alt="img"><br>2、选择安装路径，默认是c盘，我自己指定的是d盘的nvm文件夹，nvm和以后所有node版本会下载到你指定的文件夹，如下图所示。（我自己为了节省c盘空间，可以省略）<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081539377.webp" alt="img"><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081539861.webp" alt="img"><br>这是正常使用的时候，安装了node的8.17.0和9.11.2和12.0.0三个版本都是自动下载到了nvm中</p><p>3、 设定当前系统使用node版本的存放位置<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081539938.webp" alt="img"><br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081539766.webp" alt="img"><br>也就是说系统最终使用的是这个文件夹里面的node版本，nvm下载了多个版本，指定某个版本后，这个指定的版本就会放到这个node文件中，供系统使用</p><p>4、 最后点击完成即可<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081540903.webp" alt="img"></p><h1>在cmd控制台进行操作</h1><h3 id="nvm-查询版本号">nvm 查询版本号</h3><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081540381.webp" alt="img"></p><h3 id="查询可以下载的node版本">查询可以下载的node版本</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm list available</span><br></pre></td></tr></table></figure><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081540890.webp" alt="img"></p><h3 id="安装指定版本">安装指定版本</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nvm</span> install <span class="number">14</span>.<span class="number">18</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081540030.webp" alt="img"></p><h3 id="报错">报错</h3><p>但却发现无法找到npm：</p><blockquote><p>bash: npm:command not found</p></blockquote><p>进目录一看，居然是空的<br>确实没有npm<br><strong>原因：</strong><br>NVM将所有安装的Node.js的不同版本存放在这个目录下，当使用nvm use命令时，会将对应版本的Node.js目录中的内容拷贝到C:\Program Files\nodejs目录中，从而达到切换不同Node.js版本的目的。但是这个目录下的node_modules目录为什么是空的呢？<br>npm的仓库已经从<a href="https://github.com/npm/npm">https://github.com/npm/npm</a>移到<a href="https://github.com/npm/cli">https://github.com/npm/cli</a>了，但是NVM v1.1.7并没有做相应的调整，所以通过nvm install安装Node.js时对应的npm实际上并没有安装成功，不过NVM此时并没有报告任何错误，而是仍然显示已安装成功。<br><strong>解决：</strong><br>node官网下载相应版本node压缩包：<a href="https://nodejs.org/dist/v14.16.0">https://nodejs.org/dist/v14.16.0</a><br>将压缩包中的内容直接解压志文件夹(C:\Users\Administrator\AppData\Roaming\nvm\v14.16.0)中<br><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081540681.png" alt="img"><br>这样就行了</p><h3 id="查看已经安装的node版本">查看已经安装的node版本</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nvm list</span></span><br></pre></td></tr></table></figure><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081540917.webp" alt="img"></p><h3 id="切换node版本-如果失败那就用管理员身份打开cmd进行切换">切换node版本(如果失败那就用管理员身份打开cmd进行切换)</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nvm</span> use <span class="number">14</span>.<span class="number">18</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/image/202312081540598.webp" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目打包部署到Tomcat</title>
      <link href="/posts/b439a942.html"/>
      <url>/posts/b439a942.html</url>
      
        <content type="html"><![CDATA[<p>参考：<a href="https://blog.csdn.net/jolinoy/article/details/128399352">https://blog.csdn.net/jolinoy/article/details/128399352</a></p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue模版</title>
      <link href="/posts/a6d6c79.html"/>
      <url>/posts/a6d6c79.html</url>
      
        <content type="html"><![CDATA[<h1>Vue2</h1><h2 id="WebStrom-模版">WebStrom 模版</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 在这里放置组件的模板代码 --&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">name: &quot;$&#123;COMPONENT_NAME&#125;&quot;,</span><br><span class="line">// 在这里初始化组件的数据</span><br><span class="line">data() &#123;</span><br><span class="line">return &#123;&#125;;</span><br><span class="line">&#125;,</span><br><span class="line">// 在这里定义组件的props</span><br><span class="line">props: &#123;&#125;,</span><br><span class="line">// 在这里定义组件的计算属性</span><br><span class="line">computed: &#123;&#125;,</span><br><span class="line">// 在这里定义组件的watcher</span><br><span class="line">watch: &#123;&#125;,</span><br><span class="line">// 在这里定义组件的方法</span><br><span class="line">methods: &#123;&#125;,</span><br><span class="line">// 在这里注册组件的子组件</span><br><span class="line">components: &#123;&#125;,</span><br><span class="line">// 组件创建前执行的逻辑</span><br><span class="line">beforeCreate() &#123;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">// 组件创建时执行的逻辑</span><br><span class="line">created() &#123;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">// 组件挂载时执行的逻辑</span><br><span class="line">mounted() &#123;</span><br><span class="line">&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">/* 在这里编写组件的样式 */</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;$&#123;COMPONENT_NAME&#125;&quot;,</span><br><span class="line">  //引用子组件</span><br><span class="line">  components: &#123;&#125;,</span><br><span class="line">  //父组件传过来的属性</span><br><span class="line">  props: &#123;&#125;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    // 这里存放数据</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  // 计算属性 类似于 data 概念</span><br><span class="line">  computed: &#123;&#125;,</span><br><span class="line">  // 监控 data 中的数据变化</span><br><span class="line">  watch: &#123;&#125;,</span><br><span class="line">  // 方法集合</span><br><span class="line">  methods: &#123;&#125;,</span><br><span class="line">  // 生命周期 - 创建完成（可以访问当前this 实例）</span><br><span class="line">  created () &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  // 生命周期 - 挂载完成（可以访问 DOM 元素）</span><br><span class="line">  mounted () &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  // 组件创建前执行的逻辑</span><br><span class="line">  beforeCreate ()&#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeMount () &#123;</span><br><span class="line">  &#125;, // 生命周期 - 挂载之前</span><br><span class="line">  beforeUpdate () &#123;</span><br><span class="line">  &#125;, // 生命周期 - 更新之前</span><br><span class="line">  updated () &#123;</span><br><span class="line">  &#125;, // 生命周期 - 更新之后</span><br><span class="line">  beforeDestroy () &#123;</span><br><span class="line">  &#125;, // 生命周期 - 销毁之前</span><br><span class="line">  destroyed () &#123;</span><br><span class="line">  &#125;, // 生命周期 - 销毁完成</span><br><span class="line">  activated () &#123;</span><br><span class="line">  &#125; // 如果页面有 keep-alive 缓存功能,这个函数会触发</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="VSCode模版">VSCode模版</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;Print to console&quot;: &#123;</span><br><span class="line">&quot;prefix&quot;: &quot;vue2&quot;,</span><br><span class="line">&quot;body&quot;: [</span><br><span class="line">&quot;&lt;template&gt;&quot;,</span><br><span class="line">&quot;&lt;!-- 在这里放置组件的模板代码 --&gt;&quot;,</span><br><span class="line">&quot;  &lt;div&gt;&lt;/div&gt;&quot;,</span><br><span class="line">&quot;&lt;/template&gt;&quot;,</span><br><span class="line">&quot;&quot;,</span><br><span class="line">&quot;&lt;script&gt;&quot;,</span><br><span class="line">&quot;export default &#123;&quot;,</span><br><span class="line">&quot;  name: &#x27;$&#123;TM_FILENAME_BASE&#125;&#x27;,&quot;,</span><br><span class="line">&quot;  // 父组件传递的属性&quot;,</span><br><span class="line">&quot;  props: &#123;&quot;,</span><br><span class="line">&quot;    // 在这里定义父组件传递的属性&quot;,</span><br><span class="line">&quot;  &#125;,&quot;,</span><br><span class="line">&quot;  // 引用的子组件&quot;,</span><br><span class="line">&quot;  components: &#123;&quot;,</span><br><span class="line">&quot;    // 在这里注册引用的子组件&quot;,</span><br><span class="line">&quot;  &#125;,&quot;,</span><br><span class="line">&quot;  // 组件的数据&quot;,</span><br><span class="line">&quot;  data() &#123;&quot;,</span><br><span class="line">&quot;    return &#123;&quot;,</span><br><span class="line">&quot;      // 在这里定义组件的数据&quot;,</span><br><span class="line">&quot;    &#125;;&quot;,</span><br><span class="line">&quot;  &#125;,&quot;,</span><br><span class="line">&quot;  // 组件创建时执行的逻辑&quot;,</span><br><span class="line">&quot;  created() &#123;&quot;,</span><br><span class="line">&quot;    // 在这里编写组件创建时的逻辑&quot;,</span><br><span class="line">&quot;  &#125;,&quot;,</span><br><span class="line">&quot;  // 组件的方法集合&quot;,</span><br><span class="line">&quot;  methods: &#123;&quot;,</span><br><span class="line">&quot;    // 在这里定义组件的方法&quot;,</span><br><span class="line">&quot;  &#125;,&quot;,</span><br><span class="line">&quot;  // 计算属性&quot;,</span><br><span class="line">&quot;  computed: &#123;&quot;,</span><br><span class="line">&quot;    // 在这里定义计算属性&quot;,</span><br><span class="line">&quot;  &#125;,&quot;,</span><br><span class="line">&quot;  // 监听属性变化&quot;,</span><br><span class="line">&quot;  watch: &#123;&quot;,</span><br><span class="line">&quot;    // 在这里定义属性的监听逻辑&quot;,</span><br><span class="line">&quot;  &#125;,&quot;,</span><br><span class="line">&quot;  // 组件创建前执行的逻辑&quot;,</span><br><span class="line">&quot;  beforeCreate() &#123;&quot;,</span><br><span class="line">&quot;    // 在这里编写组件创建前的逻辑&quot;,</span><br><span class="line">&quot;  &#125;,&quot;,</span><br><span class="line">&quot;  // 组件挂载时执行的逻辑&quot;,</span><br><span class="line">&quot;  mounted() &#123;&quot;,</span><br><span class="line">&quot;    // 在这里编写组件挂载时的逻辑&quot;,</span><br><span class="line">&quot;  &#125;,&quot;,</span><br><span class="line">&quot;&#125;;&quot;,</span><br><span class="line">&quot;&lt;/script&gt;&quot;,</span><br><span class="line">&quot;&quot;,</span><br><span class="line">&quot;&lt;style lang=&#x27;less&#x27; scoped&gt;&lt;/style&gt;&quot;</span><br><span class="line">],</span><br><span class="line">&quot;description&quot;: &quot;vue snippets&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>Vue3</h1><h2 id="WebStrom模版">WebStrom模版</h2><h2 id="VSCode模版-2">VSCode模版</h2><p>script不带setup的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;Print to console&quot;: &#123;</span><br><span class="line">        &quot;prefix&quot;: &quot;vue3&quot;,</span><br><span class="line">        &quot;body&quot;: [</span><br><span class="line">            &quot;&lt;template&gt;&quot; +</span><br><span class="line">            &quot;  &lt;div&gt;&lt;/div&gt;&quot; +</span><br><span class="line">            &quot;&lt;/template&gt;&quot; +</span><br><span class="line">            &quot;&lt;script lang=&#x27;ts&#x27;&gt;&quot; +</span><br><span class="line">            &quot;export default &#123;&quot; +</span><br><span class="line">            &quot;  name: &#x27;&#x27;,&quot; +</span><br><span class="line">            &quot;  component: &#123;&#125;,&quot; +</span><br><span class="line">            &quot;  setup() &#123;&quot; +</span><br><span class="line">            &quot;    return &#123;&quot; +</span><br><span class="line">            &quot;    &#125;;&quot; +</span><br><span class="line">            &quot;  &#125;,&quot; +</span><br><span class="line">            &quot;&#125;;&quot; +</span><br><span class="line">            &quot;&lt;/script&gt;&quot; +</span><br><span class="line">            &quot;&lt;style scoped&gt;&quot; +</span><br><span class="line">            &quot;&lt;/style&gt;&quot;,</span><br><span class="line">        ],</span><br><span class="line">        &quot;description&quot;: &quot;Log output to console&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>script带setup的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;Print to console&quot;: &#123;</span><br><span class="line">  &quot;prefix&quot;: &quot;setup&quot;,</span><br><span class="line">  &quot;body&quot;: [</span><br><span class="line">&quot;&lt;template&gt;&quot;,</span><br><span class="line">&quot;  &lt;div $1&gt;&lt;/div&gt;&quot;,</span><br><span class="line">&quot;&lt;/template&gt;&quot;,</span><br><span class="line">&quot;&quot;,</span><br><span class="line">&quot;&lt;script setup&gt;&quot;,</span><br><span class="line">&quot;import &#123; ref, reactive, toRefs, onBeforeMount, onMounted, watchEffect, computed &#125; from &#x27;vue&#x27;;&quot;,</span><br><span class="line">&quot;import &#123; useStore &#125; from &#x27;vuex&#x27;;&quot;,</span><br><span class="line">&quot;import &#123; useRoute, useRouter &#125; from &#x27;vue-router&#x27;;&quot;,</span><br><span class="line">&quot;/**&quot;,</span><br><span class="line">&quot;* 仓库&quot;,</span><br><span class="line">&quot;*/&quot;,</span><br><span class="line">&quot;const store = useStore();&quot;,</span><br><span class="line">&quot;/**&quot;,</span><br><span class="line">&quot;* 路由对象&quot;,</span><br><span class="line">&quot;*/&quot;,</span><br><span class="line">&quot;const route = useRoute();&quot;,</span><br><span class="line">&quot;/**&quot;,</span><br><span class="line">&quot;* 路由实例&quot;,</span><br><span class="line">&quot;*/&quot;,</span><br><span class="line">&quot;const router = useRouter();&quot;,</span><br><span class="line">&quot;//console.log(&#x27;1-开始创建组件-setup&#x27;)&quot;,</span><br><span class="line">&quot;/**&quot;,</span><br><span class="line">&quot;* 数据部分&quot;,</span><br><span class="line">&quot;*/&quot;,</span><br><span class="line">&quot;const data = reactive(&#123;&#125;)&quot;,</span><br><span class="line">&quot;onBeforeMount(() =&gt; &#123;&quot;,</span><br><span class="line">&quot;  //console.log(&#x27;2.组件挂载页面之前执行----onBeforeMount&#x27;)&quot;,</span><br><span class="line">&quot;&#125;)&quot;,</span><br><span class="line">&quot;onMounted(() =&gt; &#123;&quot;,</span><br><span class="line">&quot;  //console.log(&#x27;3.-组件挂载到页面之后执行-------onMounted&#x27;)&quot;,</span><br><span class="line">&quot;&#125;)&quot;,</span><br><span class="line">&quot;watchEffect(()=&gt;&#123;&quot;,</span><br><span class="line">&quot;&#125;)&quot;,</span><br><span class="line">&quot;// 使用toRefs解构&quot;,</span><br><span class="line">&quot;// let &#123; &#125; = &#123; ...toRefs(data) &#125; &quot;,</span><br><span class="line">&quot;defineExpose(&#123;&quot;,</span><br><span class="line">&quot;  ...toRefs(data)&quot;,</span><br><span class="line">&quot;&#125;)&quot;,</span><br><span class="line">&quot;&quot;,</span><br><span class="line">&quot;&lt;/script&gt;&quot;,</span><br><span class="line">&quot;&lt;style scoped lang=&#x27;less&#x27;&gt;&quot;,</span><br><span class="line">&quot;&lt;/style&gt;&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;description&quot;: &quot;Log output to console&quot;</span><br><span class="line">&#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>代码生成器</title>
      <link href="/posts/9b93c90d.html"/>
      <url>/posts/9b93c90d.html</url>
      
        <content type="html"><![CDATA[<h1>依赖</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--swagger测试工具--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.swagger<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--pagehelper分页工具--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mybatis相关--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--myBatis-plus相关--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsqlparser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.jsqlparser<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h1>代码生成工具</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zwl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.toolkit.StringPool;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.AutoGenerator;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.InjectionConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.DataSourceConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.FileOutConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.GlobalConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.PackageConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.StrategyConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.TemplateConfig;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.po.TableInfo;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zwl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 演示例子，执行 main 方法控制台输入模块表名回车自动生成对应项目目录中</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeGenerator</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">author</span> <span class="operator">=</span> <span class="string">&quot;zwl&quot;</span>;<span class="comment">//作者</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3307/pary-shop?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC&quot;</span>;<span class="comment">//数据库</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">driverName</span> <span class="operator">=</span> <span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>;<span class="comment">//驱动</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">DbType</span> <span class="variable">dbType</span> <span class="operator">=</span> DbType.MYSQL;<span class="comment">//驱动</span></span><br><span class="line">    <span class="comment">//private static final String url = &quot;jdbc:oracle:thin:@172.1.1.44:1521:ecm&quot;;//数据库</span></span><br><span class="line">    <span class="comment">//private static final String driverName = &quot;oracle.jdbc.driver.OracleDriver&quot;;//驱动</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;zwl123&quot;</span>;</span><br><span class="line">    <span class="comment">//private static final String projectName = &quot;&quot;;//无子项目</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">projectName</span> <span class="operator">=</span> <span class="string">&quot;/shopping-server&quot;</span>;<span class="comment">//项目下子项目名称 并需要添加 &#x27;/&#x27; 例如 /shopping-server</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">packageName</span> <span class="operator">=</span> <span class="string">&quot;com.zwl&quot;</span>;<span class="comment">//包名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] tableName = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;</span><br><span class="line">        <span class="string">&quot;address_book&quot;</span></span><br><span class="line">        <span class="comment">//            &quot;sys_role_menu&quot;</span></span><br><span class="line">        <span class="comment">//            &quot;sys_role_user&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 代码生成器</span></span><br><span class="line">        <span class="type">AutoGenerator</span> <span class="variable">mpg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AutoGenerator</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 全局配置</span></span><br><span class="line">        <span class="type">GlobalConfig</span> <span class="variable">gc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GlobalConfig</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">projectPath</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">        gc.setOutputDir(projectPath + projectName + <span class="string">&quot;/src/main/java&quot;</span>);</span><br><span class="line">        gc.setAuthor(author);</span><br><span class="line">        gc.setOpen(<span class="literal">false</span>);</span><br><span class="line">        <span class="comment">// gc.setSwagger2(true); 实体属性 Swagger2 注解</span></span><br><span class="line">        gc.setFileOverride(<span class="literal">true</span>);<span class="comment">// 是否覆盖文件</span></span><br><span class="line">        <span class="comment">//globalConfig.setEnableCache(false)// XML 二级缓存</span></span><br><span class="line">        gc.setBaseColumnList(<span class="literal">true</span>);<span class="comment">// XML columList</span></span><br><span class="line">        gc.setBaseResultMap(<span class="literal">true</span>);<span class="comment">// XML ResultMap</span></span><br><span class="line">        gc.setActiveRecord(<span class="literal">false</span>);<span class="comment">// 不需要ActiveRecord特性的请改为false</span></span><br><span class="line">        gc.setIdType(IdType.ASSIGN_ID);</span><br><span class="line">        <span class="comment">//设置service名</span></span><br><span class="line">        gc.setServiceName(<span class="string">&quot;%sService&quot;</span>);</span><br><span class="line">        gc.setXmlName(<span class="string">&quot;%sMapper&quot;</span>);</span><br><span class="line">        gc.setMapperName(<span class="string">&quot;%sMapper&quot;</span>);</span><br><span class="line">        gc.setControllerName(<span class="string">&quot;%sController&quot;</span>);</span><br><span class="line">        gc.setServiceImplName(<span class="string">&quot;%sServiceImpl&quot;</span>);</span><br><span class="line">        mpg.setGlobalConfig(gc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 数据源配置</span></span><br><span class="line">        <span class="type">DataSourceConfig</span> <span class="variable">dsc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceConfig</span>();</span><br><span class="line">        dsc.setDbType(dbType); <span class="comment">//类型</span></span><br><span class="line">        dsc.setUrl(url);</span><br><span class="line">        <span class="comment">// dsc.setSchemaName(&quot;public&quot;);</span></span><br><span class="line">        dsc.setDriverName(driverName);</span><br><span class="line">        dsc.setUsername(userName);</span><br><span class="line">        dsc.setPassword(password);</span><br><span class="line">        mpg.setDataSource(dsc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 包配置</span></span><br><span class="line">        <span class="type">PackageConfig</span> <span class="variable">pc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PackageConfig</span>();</span><br><span class="line"><span class="comment">//        pc.setModuleName(scanner(&quot;模块名&quot;));</span></span><br><span class="line">        pc.setParent(packageName);</span><br><span class="line">        mpg.setPackageInfo(pc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 自定义配置</span></span><br><span class="line">        <span class="type">InjectionConfig</span> <span class="variable">cfg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InjectionConfig</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initMap</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="comment">// to do nothing</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果模板引擎是 freemarker</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">templatePath</span> <span class="operator">=</span> <span class="string">&quot;/templates/mapper.xml.ftl&quot;</span>;</span><br><span class="line">        <span class="comment">// 如果模板引擎是 velocity</span></span><br><span class="line">        <span class="comment">// String templatePath = &quot;/templates/mapper.xml.vm&quot;;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 自定义输出配置</span></span><br><span class="line">        List&lt;FileOutConfig&gt; focList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 自定义配置会被优先输出</span></span><br><span class="line">        focList.add(<span class="keyword">new</span> <span class="title class_">FileOutConfig</span>(templatePath) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> String <span class="title function_">outputFile</span><span class="params">(TableInfo tableInfo)</span> &#123;</span><br><span class="line">                <span class="comment">// 自定义输出文件名 ， 如果你 Entity 设置了前后缀、此处注意 xml 的名称会跟着发生变化！！</span></span><br><span class="line">                <span class="keyword">return</span> projectPath + projectName + <span class="string">&quot;/src/main/resources/mapper/&quot;</span> + pc.getModuleName()</span><br><span class="line">                        + <span class="string">&quot;/&quot;</span> + tableInfo.getEntityName() + <span class="string">&quot;Mapper&quot;</span> + StringPool.DOT_XML;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        cfg.setFileOutConfigList(focList);</span><br><span class="line">        mpg.setCfg(cfg);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 配置模板</span></span><br><span class="line">        <span class="type">TemplateConfig</span> <span class="variable">templateConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TemplateConfig</span>();</span><br><span class="line">        templateConfig.setXml(<span class="literal">null</span>);</span><br><span class="line">        mpg.setTemplate(templateConfig);</span><br><span class="line">        <span class="comment">// 策略配置</span></span><br><span class="line">        <span class="type">StrategyConfig</span> <span class="variable">strategy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StrategyConfig</span>();</span><br><span class="line">        strategy.setNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">        strategy.setColumnNaming(NamingStrategy.underline_to_camel);</span><br><span class="line"><span class="comment">//        strategy.setSuperEntityClass(&quot;你自己的父类实体,没有就不用设置!&quot;);</span></span><br><span class="line">        strategy.setEntityLombokModel(<span class="literal">true</span>);</span><br><span class="line">        strategy.setRestControllerStyle(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">// 公共父类</span></span><br><span class="line"><span class="comment">//        strategy.setSuperControllerClass(&quot;你自己的父类控制器,没有就不用设置!&quot;);</span></span><br><span class="line">        <span class="comment">// 写于父类中的公共字段</span></span><br><span class="line">        strategy.setSuperEntityColumns(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        strategy.setInclude(tableName);</span><br><span class="line">        strategy.setControllerMappingHyphenStyle(<span class="literal">false</span>); <span class="comment">//取消&quot;-&quot;</span></span><br><span class="line">        strategy.setTablePrefix(pc.getModuleName() + <span class="string">&quot;_&quot;</span>);</span><br><span class="line">        mpg.setStrategy(strategy);</span><br><span class="line">        mpg.setTemplateEngine(<span class="keyword">new</span> <span class="title class_">FreemarkerTemplateEngine</span>());</span><br><span class="line">        mpg.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2生命周期</title>
      <link href="/posts/a8a28006.html"/>
      <url>/posts/a8a28006.html</url>
      
        <content type="html"><![CDATA[<h3 id="Vue生命周期">Vue生命周期</h3><h4 id="vue实例生命周期流程图">vue实例生命周期流程图</h4><p><img src="https://raw.gitmirror.com/qiqiCSDN/pic_img/main/img/202311301641261.png" alt="图片标题"></p><h4 id="Vue实例生命周期钩子函数及其含义">Vue实例生命周期钩子函数及其含义</h4><table><thead><tr><th>钩子函数</th><th>含义</th></tr></thead><tbody><tr><td>beforeCreate</td><td>Vue实例进行初始化，此时实例的各个组件还没有完全初始化，因此不能访问data、computed、watch、methods的方法和数据，同时，Vue实例的挂载点也没有进行初始化</td></tr><tr><td>created</td><td>Vue实例初始化完成，此时可以访问data、computed、watch、methods的方法和数据，但是依旧没有进行Vue实例的挂载点初始化</td></tr><tr><td>beforeMount</td><td>将实例绑定到模板并进行渲染，但并不会讲实例挂载到页面上</td></tr><tr><td>mounted</td><td>讲渲染好的模板绑定到页面上，此时，Vue实例已完全创建好</td></tr><tr><td>beforeUpdate</td><td>数据变更时执行，在实例数据更改之前执行自定义逻辑或操作</td></tr><tr><td>updated</td><td>将Vue实例更新完成的数据重新渲染到内存中的虚拟DOM中，再讲虚拟DOM应用到页面上</td></tr><tr><td>beforeDestroy</td><td>Vue实例进入销毁阶段，此时实例上的data、methods、过滤器、指令等仍处于可用的状态，还没有真正执行销毁的过程（解除与页面DOM元素的绑定）</td></tr><tr><td>detroyed</td><td>实例被销毁（解除Vue实例与页面DOM元素的绑定，但该Vue实例的对象、数据仍然可以使用）</td></tr></tbody></table><h4 id="分析生命周期相关方法的执行时机">分析生命周期相关方法的执行时机</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">//===创建时的四个事件</span><br><span class="line">beforeCreate() &#123; // 第一个被执行的钩子方法：实例被创建出来之前执行</span><br><span class="line">    console.log(this.message) //undefined</span><br><span class="line">    this.show() //TypeError: this.show is not a function</span><br><span class="line">    // beforeCreate执行时，data 和 methods 中的 数据都还没有没初始化</span><br><span class="line">&#125;,</span><br><span class="line">created() &#123; // 第二个被执行的钩子方法</span><br><span class="line">    console.log(this.message) //床前明月光</span><br><span class="line">    this.show() //执行show方法</span><br><span class="line">    // created执行时，data 和 methods 都已经被初始化好了！</span><br><span class="line">    // 如果要调用 methods 中的方法，或者操作 data 中的数据，最早，只能在 created 中操作</span><br><span class="line">&#125;,</span><br><span class="line">beforeMount() &#123; // 第三个被执行的钩子方法</span><br><span class="line">    console.log(document.getElementById(&#x27;h3&#x27;).innerText) //&#123;&#123; message &#125;&#125;</span><br><span class="line">    // beforeMount执行时，模板已经在内存中编辑完成了，尚未被渲染到页面中</span><br><span class="line">&#125;,</span><br><span class="line">mounted() &#123; // 第四个被执行的钩子方法</span><br><span class="line">    console.log(document.getElementById(&#x27;h3&#x27;).innerText) //床前明月光</span><br><span class="line">    // 内存中的模板已经渲染到页面，用户已经可以看见内容</span><br><span class="line">&#125;,</span><br><span class="line">//===运行中的两个事件</span><br><span class="line">beforeUpdate() &#123; // 数据更新的前一刻</span><br><span class="line">    console.log(&#x27;界面显示的内容：&#x27; + document.getElementById(&#x27;h3&#x27;).innerText)</span><br><span class="line">    console.log(&#x27;data 中的 message 数据是：&#x27; + this.message)</span><br><span class="line">    // beforeUpdate执行时，内存中的数据已更新，但是页面尚未被渲染</span><br><span class="line">&#125;,</span><br><span class="line">updated() &#123;</span><br><span class="line">    console.log(&#x27;界面显示的内容：&#x27; + document.getElementById(&#x27;h3&#x27;).innerText)</span><br><span class="line">    console.log(&#x27;data 中的 message 数据是：&#x27; + this.message)</span><br><span class="line">    // updated执行时，内存中的数据已更新，并且页面已经被渲染</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo使用安装</title>
      <link href="/posts/b7b420fd.html"/>
      <url>/posts/b7b420fd.html</url>
      
        <content type="html"><![CDATA[<h1>下载网址</h1><h2 id="模版">模版</h2><p><a href="https://gitee.com/zwlkongjin/hexo-theme-Fomalhaut">hexo-theme-Fomalhaut: 博客初始化 (gitee.com)</a></p><h2 id="完整版">完整版</h2><p><a href="https://gitee.com/zwlkongjin/hexo-pary">hexo-pary: 自己博客 (gitee.com)</a></p><h1>搭建笔记</h1><p>​<a href="https://www.fomal.cc/posts/e593433d.html">🐖抓到你啦～ (fomal.cc)</a></p><p>​<a href="https://fe32.top/articles/hexo1600/">基于 Hexo 从零开始搭建个人博客系列 | 唐志远 (fe32.top)</a></p><h1>安装 hexo</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h1>安装 hexo-deployer-git</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown语法与外挂标签写法汇总</title>
      <link href="/posts/2013454d.html"/>
      <url>/posts/2013454d.html</url>
      
        <content type="html"><![CDATA[<h1>1.Markdown语法自带格式</h1><div class="note info flat"><p>参考：<a href="https://blog.csdn.net/u014061630/article/details/81359144">Markdown语法图文全面详解(10分钟学会)</a></p></div><div class="note warning flat"><p>注意：此页面偶尔会存在CSS冲突问题!</p></div><h2 id="1-1-代码块">1.1 代码块</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">\```shell</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">VSCode终端</span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cmder终端</span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br><span class="line">\```</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">VSCode终端</span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cmder终端</span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-2-多级标题">1.2 多级标题</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># H1</span></span><br><span class="line"><span class="section">## H2</span></span><br><span class="line"><span class="section">### H3</span></span><br><span class="line"><span class="section">#### H4</span></span><br><span class="line"><span class="section">##### H5</span></span><br><span class="line"><span class="section">###### H6</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><p>见本文章标题!</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-3-文字样式">1.3 文字样式</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">u</span>&gt;</span></span>下划线演示<span class="language-xml"><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">文字<span class="strong">**加粗**</span>演示</span><br><span class="line"></span><br><span class="line">文字<span class="emphasis">*斜体*</span>演示</span><br><span class="line"></span><br><span class="line">文本<span class="code">`高亮`</span>演示</span><br><span class="line"></span><br><span class="line">文本~~删除~~线演示</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span> = <span class="string">5</span>&gt;</span></span>5号字<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">&quot;黑体&quot;</span>&gt;</span></span>黑体<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">blue</span>&gt;</span></span>蓝色<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">MistyRose</span>&gt;</span></span>这里的背景色是：MistyRosen，此处输入任意想输入的内容<span class="language-xml"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><p><u>下划线演示</u></p><p>文字<strong>加粗</strong>演示</p><p>文字<em>斜体</em>演示</p><p>文本<code>高亮</code>演示</p><p>文本<s>删除</s>线演示</p><p><font size = 5>5号字</font><br><font face="黑体">黑体</font><br><font color=blue>蓝色</font></p><table><tr><td bgcolor=MistyRose>这里的背景色是：MistyRosen，此处输入任意想输入的内容</td></tr></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="note info flat"><p>上述要点可参考:<a href="https://blog.csdn.net/qq_43732429/article/details/108034518">【Markdown语法】字体颜色大小及文字底色设置</a></p></div><h2 id="1-4-引用">1.4 引用</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt;  Java</span></span><br><span class="line"><span class="quote">&gt; 二级引用演示</span></span><br><span class="line"><span class="quote">&gt; MySQL</span></span><br><span class="line"><span class="quote">&gt; &gt;外键</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;事务</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;<span class="strong">**行级锁**</span>(引用内部一样可以用格式)</span></span><br><span class="line"><span class="quote">&gt; </span></span><br><span class="line"><span class="quote">&gt; ....</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><blockquote><p>Java<br>二级引用演示<br>MySQL</p><blockquote><p>外键</p><p>事务</p><p><strong>行级锁</strong>(引用内部一样可以用格式)</p></blockquote><p>…</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-5-分割线">1.5 分割线</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><hr><hr><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-6-列表-跟空格都可以">1.6 列表(*,+,-跟空格都可以)</h2><h3 id="1-6-1-无序列表">1.6.1 无序列表</h3><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> Java</span><br><span class="line"><span class="bullet">*</span> Python</span><br><span class="line"><span class="bullet">*</span> ...</span><br><span class="line"></span><br><span class="line"><span class="bullet">+</span> Java</span><br><span class="line"><span class="bullet">+</span> Python</span><br><span class="line"><span class="bullet">+</span> ...</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> Java</span><br><span class="line"><span class="bullet">-</span> Python</span><br><span class="line"><span class="bullet">-</span> ...</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ul><li>Java</li><li>Python</li><li>…</li></ul><ul><li>Java</li><li>Python</li><li>…</li></ul><ul><li>Java</li><li>Python</li><li>…</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="1-6-2-有序列表">1.6.2 有序列表</h3><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 注意后面有空格</span></span><br><span class="line"><span class="bullet">1.</span> </span><br><span class="line"><span class="bullet">2.</span> </span><br><span class="line"><span class="bullet">3.</span> </span><br><span class="line"><span class="bullet">4.</span> </span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li></li><li></li><li></li><li></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-7-图片">1.7 图片</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 本地图片</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/assets/pusheencode.webp&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;示例图片&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:50%;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="section"># 在线图片</span></span><br><span class="line">![<span class="string">code</span>](<span class="link">https://cdn.jsdelivr.net/gh/fomalhaut1998/markdown_pic/img/code.png</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><p>本地图片:<br><img src="/assets/pusheencode.webp" alt="示例图片" style="zoom:50%;" /><br>在线图片:<br><img src="https://cdn.jsdelivr.net/gh/fomalhaut1998/markdown_pic/img/code.png" alt="code"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-8-表格">1.8 表格</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| 项目标号 | 资金     | 备注 |</span><br><span class="line">| -------- | -------- | ---- |</span><br><span class="line">| 1        | 100，000 | 无   |</span><br><span class="line">| 2        | 200，000 | 无   |</span><br><span class="line">| 3        | 300,600  | 重要 |</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><table><thead><tr><th>项目标号</th><th>资金</th><th>备注</th></tr></thead><tbody><tr><td>1</td><td>100，000</td><td>无</td></tr><tr><td>2</td><td>200，000</td><td>无</td></tr><tr><td>3</td><td>300,600</td><td>重要</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-9-公式">1.9 公式</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\Gamma(z)=\int<span class="emphasis">_0^\infty t^&#123;z-1&#125;e^&#123;-t&#125;dt.</span></span><br><span class="line"><span class="emphasis">$$</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><p>$$<br>\Gamma(z)=\int_0^\infty t^{z-1}e^{-t}dt.<br>$$</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1>2.Butterfly外挂标签</h1><div class="note info flat"><p>这部分参考安知鱼:<a href="https://anzhiy.cn/posts/7d58.html">基于Butterfly的外挂标签引入</a></p></div><h2 id="2-1-行内文本样式-text">2.1 行内文本样式 text</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-3">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% u 文本内容 %&#125;</span><br><span class="line">&#123;% emp 文本内容 %&#125;</span><br><span class="line">&#123;% wavy 文本内容 %&#125;</span><br><span class="line">&#123;% del 文本内容 %&#125;</span><br><span class="line">&#123;% kbd 文本内容 %&#125;</span><br><span class="line">&#123;% psw 文本内容 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> 带 &#123;% u 下划线 %&#125; 的文本</span><br><span class="line"><span class="bullet">2.</span> 带 &#123;% emp 着重号 %&#125; 的文本</span><br><span class="line"><span class="bullet">3.</span> 带 &#123;% wavy 波浪线 %&#125; 的文本</span><br><span class="line"><span class="bullet">4.</span> 带 &#123;% del 删除线 %&#125; 的文本</span><br><span class="line"><span class="bullet">5.</span> 键盘样式的文本 &#123;% kbd command %&#125; + &#123;% kbd D %&#125;</span><br><span class="line"><span class="bullet">6.</span> 密码样式的文本：&#123;% psw 这里没有验证码 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><ol><li>带 <u>下划线</u> 的文本</li><li>带 <emp>着重号</emp> 的文本</li><li>带 <wavy>波浪线</wavy> 的文本</li><li>带 <del>删除线</del> 的文本</li><li>键盘样式的文本 <kbd>command</kbd> + <kbd>D</kbd></li><li>密码样式的文本：<psw>这里没有验证码</psw></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-2-行内文本-span">2.2 行内文本 span</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% span 样式参数(参数以空格划分), 文本内容 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>字体</code>: logo, code</li><li><code>颜色</code>: red,yellow,green,cyan,blue,gray</li><li><code>大小</code>: small, h4, h3, h2, h1, large, huge, ultra</li><li><code>对齐方向</code>: left, center, right</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> 彩色文字</span><br><span class="line">在一段话中方便插入各种颜色的标签，包括：&#123;% span red, 红色 %&#125;、&#123;% span yellow, 黄色 %&#125;、&#123;% span green, 绿色 %&#125;、&#123;% span cyan, 青色 %&#125;、&#123;% span blue, 蓝色 %&#125;、&#123;% span gray, 灰色 %&#125;。</span><br><span class="line"><span class="bullet">-</span> 超大号文字</span><br><span class="line">文档「开始」页面中的标题部分就是超大号文字。</span><br><span class="line">&#123;% span center logo large, Volantis %&#125;</span><br><span class="line">&#123;% span center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><ul><li>彩色文字<br>在一段话中方便插入各种颜色的标签，包括：<span class='p red'>红色</span>、<span class='p yellow'>黄色</span>、<span class='p green'>绿色</span>、<span class='p cyan'>青色</span>、<span class='p blue'>蓝色</span>、<span class='p gray'>灰色</span>。</li><li>超大号文字<br>文档「开始」页面中的标题部分就是超大号文字。<br><span class='p center logo large'>Volantis</span><br><span class='p center small'>A Wonderful Theme for Hexo</span></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-3-段落文本-p">2.3 段落文本 p</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% p 样式参数(参数以空格划分), 文本内容 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>字体</code>: logo, code</li><li><code>颜色</code>: red,yellow,green,cyan,blue,gray</li><li><code>大小</code>: small, h4, h3, h2, h1, large, huge, ultra</li><li><code>对齐方向</code>: left, center, right</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> 彩色文字</span><br><span class="line">在一段话中方便插入各种颜色的标签，包括：&#123;% p red, 红色 %&#125;、&#123;% p yellow, 黄色 %&#125;、&#123;% p green, 绿色 %&#125;、&#123;% p cyan, 青色 %&#125;、&#123;% p blue, 蓝色 %&#125;、&#123;% p gray, 灰色 %&#125;。</span><br><span class="line"><span class="bullet">-</span> 超大号文字</span><br><span class="line">文档「开始」页面中的标题部分就是超大号文字。</span><br><span class="line">&#123;% p center logo large, Volantis %&#125;</span><br><span class="line">&#123;% p center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><ul><li>彩色文字<br>在一段话中方便插入各种颜色的标签，包括：<p class='p red'>红色</p>、<p class='p yellow'>黄色</p>、<p class='p green'>绿色</p>、<p class='p cyan'>青色</p>、<p class='p blue'>蓝色</p>、<p class='p gray'>灰色</p>。</li><li>超大号文字<br>文档「开始」页面中的标题部分就是超大号文字。</li></ul><p class='p center logo large'>Volantis</p><p class='p center small'>A Wonderful Theme for Hexo</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-4-引用note">2.4 引用note</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">通用配置</button></li><li class="tab"><button type="button" data-href="#分栏-2">语法格式</button></li><li class="tab"><button type="button" data-href="#分栏-3">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-4">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-5">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">note:</span><br><span class="line">  # Note tag style values:</span><br><span class="line">  #  - simple    bs-callout old alert style. Default.</span><br><span class="line">  #  - modern    bs-callout new (v2-v3) alert style.</span><br><span class="line">  #  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span><br><span class="line">  #  - disabled  disable all CSS styles import of note tag.</span><br><span class="line">  style: simple</span><br><span class="line">  icons: false</span><br><span class="line">  border<span class="emphasis">_radius: 3</span></span><br><span class="line"><span class="emphasis">  # Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line"><span class="emphasis">  # Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line"><span class="emphasis">  light_</span>bg<span class="emphasis">_offset: 0</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 自带icon</span></span><br><span class="line">&#123;% note [class] [no-icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"><span class="section"># 外部icon</span></span><br><span class="line">&#123;% note [color] [icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.自带icon</p><table><thead><tr><th>参数</th><th style="text-align:center">用法</th></tr></thead><tbody><tr><td>class</td><td style="text-align:center">【可选】标识，不同的标识有不同的配色 （ default / primary / success / info / warning / danger ）</td></tr><tr><td>no-icon</td><td style="text-align:center">【可选】不显示 icon</td></tr><tr><td>style</td><td style="text-align:center">【可选】可以覆盖配置中的 style （simple/modern/flat/disabled）</td></tr></tbody></table><p>2.外部icon</p><table><thead><tr><th>参数</th><th style="text-align:center">用法</th></tr></thead><tbody><tr><td>class</td><td style="text-align:center">【可选】标识，不同的标识有不同的配色 （ default / blue / pink / red / purple / orange / green ）</td></tr><tr><td>no-icon</td><td style="text-align:center">【可选】可配置自定义 icon (只支持 fontawesome 图标, 也可以配置 no-icon )</td></tr><tr><td>style</td><td style="text-align:center">【可选】可以覆盖配置中的 style （simple/modern/flat/disabled）</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><details class="folding-tag" blue><summary> 1.自带icon </summary>              <div class='content'>              <p>1.<code>simple</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note simple %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note modern %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default modern %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary modern %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success modern %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info modern %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning modern %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger modern %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note flat %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default flat %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note disabled %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default disabled %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary disabled %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success disabled %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info disabled %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning disabled %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger disabled %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default no-icon %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success no-icon %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info no-icon %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning no-icon %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger no-icon %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> 2.外部icon </summary>              <div class='content'>              <p>1.<code>simple</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue no-icon %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink no-icon %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red no-icon %&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange no-icon %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple no-icon %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green no-icon %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-5"><details class="folding-tag" blue><summary> 1.自带icon </summary>              <div class='content'>              <p>1.<code>simple</code>样式</p><div class="note simple"><p>默认 提示块标签</p></div><div class="note default simple"><p>default 提示块标签</p></div><div class="note primary simple"><p>primary 提示块标签</p></div><div class="note success simple"><p>success 提示块标签</p></div><div class="note info simple"><p>info 提示块标签</p></div><div class="note warning simple"><p>warning 提示块标签</p></div><div class="note danger simple"><p>danger 提示块标签</p></div>2.`modern`样式<div class="note modern"><p>默认 提示块标签</p></div><div class="note default modern"><p>default 提示块标签</p></div><div class="note primary modern"><p>primary 提示块标签</p></div><div class="note success modern"><p>success 提示块标签</p></div><div class="note info modern"><p>info 提示块标签</p></div><div class="note warning modern"><p>warning 提示块标签</p></div><div class="note danger modern"><p>danger 提示块标签</p></div><p>3.<code>flat</code>样式</p><div class="note flat"><p>默认 提示块标签</p></div><div class="note default flat"><p>default 提示块标签</p></div><div class="note primary flat"><p>primary 提示块标签</p></div><div class="note success flat"><p>success 提示块标签</p></div><div class="note info flat"><p>info 提示块标签</p></div><div class="note warning flat"><p>warning 提示块标签</p></div><div class="note danger flat"><p>danger 提示块标签</p></div><p>4.<code>disabled</code>样式</p><div class="note disabled"><p>默认 提示块标签</p></div><div class="note default disabled"><p>default 提示块标签</p></div><div class="note primary disabled"><p>primary 提示块标签</p></div><div class="note success disabled"><p>success 提示块标签</p></div><div class="note info disabled"><p>info 提示块标签</p></div><div class="note warning disabled"><p>warning 提示块标签</p></div><div class="note danger disabled"><p>danger 提示块标签</p></div><p>5.<code>no-icon</code>样式</p><div class="note no-icon flat"><p>默认 提示块标签</p></div><div class="note default no-icon flat"><p>default 提示块标签</p></div><div class="note primary no-icon flat"><p>primary 提示块标签</p></div><div class="note success no-icon flat"><p>success 提示块标签</p></div><div class="note info no-icon flat"><p>info 提示块标签</p></div><div class="note warning no-icon flat"><p>warning 提示块标签</p></div><div class="note danger no-icon flat"><p>danger 提示块标签</p></div>              </div>            </details><details class="folding-tag" blue><summary> 2.外部icon </summary>              <div class='content'>              <p>1.<code>simple</code>样式</p><div class="note icon-padding simple"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p></div><div class="note pink icon-padding simple"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p></div><div class="note red icon-padding simple"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p></div><div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple icon-padding simple"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p></div><div class="note green icon-padding simple"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p></div><p>2.<code>modern</code>样式</p><div class="note icon-padding modern"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p></div><div class="note pink icon-padding modern"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p></div><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p></div><div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p></div><div class="note green icon-padding modern"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p></div><p>3.<code>flat</code>样式</p><div class="note icon-padding flat"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p></div><div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p></div><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p></div><p>4.<code>disabled</code>样式</p><div class="note icon-padding disabled"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue icon-padding disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p></div><div class="note pink icon-padding disabled"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p></div><div class="note red icon-padding disabled"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p></div><div class="note orange icon-padding disabled"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple icon-padding disabled"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p></div><div class="note green icon-padding disabled"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p></div><p>5.<code>no-icon</code>样式</p><div class="note no-icon flat"><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue no-icon flat"><p>2021年快到了…</p></div><div class="note pink no-icon flat"><p>小心开车 安全至上</p></div><div class="note red no-icon flat"><p>这是三片呢？还是四片？</p></div><div class="note orange no-icon flat"><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple no-icon flat"><p>剪刀石头布</p></div><div class="note green no-icon flat"><p>前端最讨厌的浏览器</p></div>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-5-上标标签-tip">2.5 上标标签 tip</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [参数，可选] %&#125;文本内容&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>样式</code>: success,error,warning,bolt,ban,home,sync,cogs,key,bell</li><li><code>自定义图标</code>: 支持fontawesome。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip %&#125;default&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip info %&#125;info&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip success %&#125;success&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip error %&#125;error&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip warning %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bolt %&#125;bolt&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban %&#125;ban&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip home %&#125;home&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip sync %&#125;sync&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip cogs %&#125;cogs&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip key %&#125;key&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bell %&#125;bell&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip fa-atom %&#125;自定义font awesome图标&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><div class="tip "><p>default</p></div><div class="tip info"><p>info</p></div><div class="tip success"><p>success</p></div><div class="tip error"><p>error</p></div><div class="tip warning"><p>warning</p></div><div class="tip bolt"><p>bolt</p></div><div class="tip ban"><p>ban</p></div><div class="tip home"><p>home</p></div><div class="tip sync"><p>sync</p></div><div class="tip cogs"><p>cogs</p></div><div class="tip key"><p>key</p></div><div class="tip bell"><p>bell</p></div><div class="tip fa-atom"><p>自定义font awesome图标</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-6-动态标签-anima">2.6 动态标签 anima</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [参数，可选] %&#125;文本内容&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><div class="note info flat"><ol><li>将所需的CSS类添加到图标（或DOM中的任何元素）。</li><li>对于父级悬停样式，需要给目标元素添加指定CSS类，同时还要给目标元素的父级元素添加CSS类<code>faa-parent animated-hover</code>。（详情见示例及示例源码）<br>You can regulate the speed of the animation by adding the CSS class or . faa-fastfaa-slow</li><li>可以通过给目标元素添加CSS类<code>faa-fast</code>或<code>faa-slow</code>来控制动画快慢。</li></ol></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.On DOM load（当页面加载时显示动画）</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>2.调整动画速度</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated faa-fast %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated faa-slow %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>3.On hover（当鼠标悬停时显示动画）</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated-hover %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated-hover %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>4.On parent hover（当鼠标悬停在父级元素时显示动画）</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-horizontal&quot;</span>&gt;</span></span>warning<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-flash&quot;</span>&gt;</span></span>ban<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.On DOM load（当页面加载时显示动画）</p><div class="tip warning faa-horizontal animated"><p>warning</p></div><div class="tip ban faa-flash animated"><p>ban</p></div>2.调整动画速度<div class="tip warning faa-horizontal animated faa-fast"><p>warning</p></div><div class="tip ban faa-flash animated faa-slow"><p>ban</p></div>3.On hover（当鼠标悬停时显示动画）<div class="tip warning faa-horizontal animated-hover"><p>warning</p></div><div class="tip ban faa-flash animated-hover"><p>ban</p></div>4.On parent hover（当鼠标悬停在父级元素时显示动画）<div class="tip warning faa-parent animated-hover"><p class="faa-horizontal">warning</p></div><div class="tip ban faa-parent animated-hover"><p class="faa-flash">ban</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-7-复选列表-checkbox">2.7 复选列表 checkbox</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox 样式参数（可选）, 文本（支持简单md） %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>样式</code>: plus, minus, times</li><li><code>颜色</code>: red,yellow,green,cyan,blue,gray</li><li><code>选中状态</code>: checked</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox 纯文本测试 %&#125;</span><br><span class="line">&#123;% checkbox checked, 支持简单的 [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) 语法 %&#125;</span><br><span class="line">&#123;% checkbox red, 支持自定义颜色 %&#125;</span><br><span class="line">&#123;% checkbox green checked, 绿色 + 默认选中 %&#125;</span><br><span class="line">&#123;% checkbox yellow checked, 黄色 + 默认选中 %&#125;</span><br><span class="line">&#123;% checkbox cyan checked, 青色 + 默认选中 %&#125;</span><br><span class="line">&#123;% checkbox blue checked, 蓝色 + 默认选中 %&#125;</span><br><span class="line">&#123;% checkbox plus green checked, 增加 %&#125;</span><br><span class="line">&#123;% checkbox minus yellow checked, 减少 %&#125;</span><br><span class="line">&#123;% checkbox times red checked, 叉 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><div class='checkbox'><input type="checkbox" />            <p>纯文本测试</p>            </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>支持简单的 <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> 语法</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>支持自定义颜色</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>绿色 + 默认选中</p>            </div><div class='checkbox yellow checked'><input type="checkbox" checked="checked"/>            <p>黄色 + 默认选中</p>            </div><div class='checkbox cyan checked'><input type="checkbox" checked="checked"/>            <p>青色 + 默认选中</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>蓝色 + 默认选中</p>            </div><div class='checkbox plus green checked'><input type="checkbox" checked="checked"/>            <p>增加</p>            </div><div class='checkbox minus yellow checked'><input type="checkbox" checked="checked"/>            <p>减少</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>叉</p>            </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-8-单选列表-radio">2.8 单选列表 radio</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio 样式参数（可选）, 文本（支持简单md） %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>颜色</code>: red,yellow,green,cyan,blue,gray</li><li><code>选中状态</code>: checked</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio 纯文本测试 %&#125;</span><br><span class="line">&#123;% radio checked, 支持简单的 [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) 语法 %&#125;</span><br><span class="line">&#123;% radio red, 支持自定义颜色 %&#125;</span><br><span class="line">&#123;% radio green, 绿色 %&#125;</span><br><span class="line">&#123;% radio yellow, 黄色 %&#125;</span><br><span class="line">&#123;% radio cyan, 青色 %&#125;</span><br><span class="line">&#123;% radio blue, 蓝色 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><div class='checkbox'><input type="radio" />            <p>纯文本测试</p>            </div><div class='checkbox checked'><input type="radio" checked="checked"/>            <p>支持简单的 <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> 语法</p>            </div><div class='checkbox red'><input type="radio" />            <p>支持自定义颜色</p>            </div><div class='checkbox green'><input type="radio" />            <p>绿色</p>            </div><div class='checkbox yellow'><input type="radio" />            <p>黄色</p>            </div><div class='checkbox cyan'><input type="radio" />            <p>青色</p>            </div><div class='checkbox blue'><input type="radio" />            <p>蓝色</p>            </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-9-时间轴-timeline">2.9 时间轴 timeline</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline 时间线标题（可选）[,color] %&#125;</span><br><span class="line">&lt;!-- timeline 时间节点（标题） --&gt;</span><br><span class="line">正文内容</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline 时间节点（标题） --&gt;</span><br><span class="line">正文内容</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>title</code>:标题/时间线</li><li><code>color</code>:<code>timeline</code>颜色:default(留空) / blue / pink / red / purple / orange / green</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline 时间轴样式,blue %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-07-24 [<span class="string">2.6.6 -&gt; 3.0</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 如果有 <span class="code">`hexo-lazyload-image`</span> 插件，需要删除并重新安装最新版本，设置 <span class="code">`lazyload.isSPA: true`</span>。</span><br><span class="line"><span class="bullet">2.</span> 2.x 版本的 css 和 js 不适用于 3.x 版本，如果使用了 <span class="code">`use_cdn: true`</span> 则需要删除。</span><br><span class="line"><span class="bullet">3.</span> 2.x 版本的 fancybox 标签在 3.x 版本中被重命名为 gallery 。</span><br><span class="line"><span class="bullet">4.</span> 2.x 版本的置顶 <span class="code">`top: true`</span> 改为了 <span class="code">`pin: true`</span>，并且同样适用于 <span class="code">`layout: page`</span> 的页面。</span><br><span class="line"><span class="bullet">5.</span> 如果使用了 <span class="code">`hexo-offline`</span> 插件，建议卸载，3.0 版本默认开启了 pjax 服务。</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-05-15 [<span class="string">2.6.3 -&gt; 2.6.6</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6</span>) --&gt;</span><br><span class="line"></span><br><span class="line">不需要额外处理。</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-04-20 [<span class="string">2.6.2 -&gt; 2.6.3</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 全局搜索 <span class="code">`seotitle`</span> 并替换为 <span class="code">`seo_title`</span>。</span><br><span class="line"><span class="bullet">2.</span> group 组件的索引规则有变，使用 group 组件的文章内，<span class="code">`group: group_name`</span> 对应的组件名必须是 <span class="code">`group_name`</span>。</span><br><span class="line"><span class="bullet">2.</span> group 组件的列表名优先显示文章的 <span class="code">`short_title`</span> 其次是 <span class="code">`title`</span>。</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>时间轴样式</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-07-24 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases">2.6.6 -&gt; 3.0</a></p></div></div><div class='timeline-item-content'><ol><li>如果有 <code>hexo-lazyload-image</code> 插件，需要删除并重新安装最新版本，设置 <code>lazyload.isSPA: true</code>。</li><li>2.x 版本的 css 和 js 不适用于 3.x 版本，如果使用了 <code>use_cdn: true</code> 则需要删除。</li><li>2.x 版本的 fancybox 标签在 3.x 版本中被重命名为 gallery 。</li><li>2.x 版本的置顶 <code>top: true</code> 改为了 <code>pin: true</code>，并且同样适用于 <code>layout: page</code> 的页面。</li><li>如果使用了 <code>hexo-offline</code> 插件，建议卸载，3.0 版本默认开启了 pjax 服务。</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-05-15 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6">2.6.3 -&gt; 2.6.6</a></p></div></div><div class='timeline-item-content'><p>不需要额外处理。</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-04-20 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3">2.6.2 -&gt; 2.6.3</a></p></div></div><div class='timeline-item-content'><ol><li>全局搜索 <code>seotitle</code> 并替换为 <code>seo_title</code>。</li><li>group 组件的索引规则有变，使用 group 组件的文章内，<code>group: group_name</code> 对应的组件名必须是 <code>group_name</code>。</li><li>group 组件的列表名优先显示文章的 <code>short_title</code> 其次是 <code>title</code>。</li></ol></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-10-链接卡片-link">2.10 链接卡片 link</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-3">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link 标题, 链接, 图片链接（可选） %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link 糖果屋教程贴, https://akilar.top/posts/615e2dec/, https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><div class="tag link"><a class="link-card" title="糖果屋教程贴" href="https://akilar.top/posts/615e2dec/"><div class="left"><img src="https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico"/></div><div class="right"><p class="text">糖果屋教程贴</p><p class="url">https://akilar.top/posts/615e2dec/</p></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-11-按钮-btns">2.11 按钮 btns</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns 样式参数 %&#125;</span><br><span class="line">&#123;% cell 标题, 链接, 图片或者图标 %&#125;</span><br><span class="line">&#123;% cell 标题, 链接, 图片或者图标 %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li>圆角样式：rounded, circle</li><li>增加文字样式：可以在容器内增加 <code>&lt;b&gt;</code>标题<code>&lt;/b&gt;</code>和<code>&lt;p&gt;</code>描述文字<code>&lt;/p&gt;</code></li><li>布局方式：<br>默认为自动宽度，适合视野内只有一两个的情况。</li></ol><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>wide</td><td>宽一点的按钮</td></tr><tr><td>fill</td><td>填充布局，自动铺满至少一行，多了会换行</td></tr><tr><td>center</td><td>居中，按钮之间是固定间距</td></tr><tr><td>around</td><td>居中分散</td></tr><tr><td>grid2</td><td>等宽最多2列，屏幕变窄会适当减少列数</td></tr><tr><td>grid3</td><td>等宽最多3列，屏幕变窄会适当减少列数</td></tr><tr><td>grid4</td><td>等宽最多4列，屏幕变窄会适当减少列数</td></tr><tr><td>grid5</td><td>等宽最多5列，屏幕变窄会适当减少列数</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.如果需要显示类似「团队成员」之类的一组含有头像的链接</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns circle grid5 %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><p>2.或者含有图标的按钮</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns rounded grid5 %&#125;</span><br><span class="line">&#123;% cell 下载源码, /, fas fa-download %&#125;</span><br><span class="line">&#123;% cell 查看文档, /, fas fa-book-open %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><p>3.圆形图标 + 标题 + 描述 + 图片 + 网格5列 + 居中</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns circle center grid5 %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>心率管家<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p red, 专业版 %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_pro.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>心率管家<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p green, 免费版 %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_lite.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.如果需要显示类似「团队成员」之类的一组含有头像的链接</p><div class="btns circle grid5">            <a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a>          </div>2.或者含有图标的按钮<div class="btns rounded grid5">            <a class="button" href='/' title='下载源码'><i class='fas fa-download'></i>下载源码</a><a class="button" href='/' title='查看文档'><i class='fas fa-book-open'></i>查看文档</a>          </div>3.圆形图标 + 标题 + 描述 + 图片 + 网格5列 + 居中<div class="btns circle center grid5">            <a href='https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1'>  <i class='fab fa-apple'></i>  <b>心率管家</b>  <p class='p red'>专业版</p>  <img src='https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_pro.png'></a><a href='https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1'>  <i class='fab fa-apple'></i>  <b>心率管家</b>  <p class='p green'>免费版</p>  <img src='https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_lite.png'></a>          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-12-github卡片-ghcard">2.12 github卡片 ghcard</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% ghcard 用户名, 其它参数（可选） %&#125;</span><br><span class="line">&#123;% ghcard 用户名/仓库, 其它参数（可选） %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><p>使用<code>,</code>分割各个参数。写法为：<code>参数名=参数值</code><br>以下只写几个常用参数值。</p><table><thead><tr><th><strong>参数名</strong></th><th>取值</th><th>释义</th></tr></thead><tbody><tr><td>hide</td><td>stars,commits,prs,issues,contribs</td><td>隐藏指定统计</td></tr><tr><td>count_private</td><td>true</td><td>将私人项目贡献添加到总提交计数中</td></tr><tr><td>show_icons</td><td>true</td><td>显示图标</td></tr><tr><td>theme</td><td>查阅:<a href="https://github.com/anuraghazra/github-readme-stats/blob/master/themes/README.md">Available Themes</a></td><td>主题</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.用户信息卡片</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| &#123;% ghcard fomalhaut1998 %&#125; | &#123;% ghcard fomalhaut1998, theme=vue %&#125; |</span><br><span class="line">| -- | -- |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=buefy %&#125; | &#123;% ghcard fomalhaut1998, theme=solarized-light %&#125; |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=onedark %&#125; | &#123;% ghcard fomalhaut1998, theme=solarized-dark %&#125; |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=algolia %&#125; | &#123;% ghcard fomalhaut1998, theme=calm %&#125; |</span><br></pre></td></tr></table></figure><p>2.仓库信息卡片</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=vue %&#125; |</span><br><span class="line">| -- | -- |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=buefy %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=solarized-light %&#125; |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=onedark %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=solarized-dark %&#125; |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=algolia %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=calm %&#125; |</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.用户信息卡片</p><table><thead><tr><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&show_owner=true"/></a></th><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=vue&show_owner=true"/></a></th></tr></thead><tbody><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=buefy&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=solarized-light&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=onedark&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=solarized-dark&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=algolia&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=calm&show_owner=true"/></a></td></tr></tbody></table><p>2.仓库信息卡片</p><table><thead><tr><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&show_owner=true"/></a></th><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=vue&show_owner=true"/></a></th></tr></thead><tbody><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=buefy&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=solarized-light&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=onedark&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=solarized-dark&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=algolia&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=calm&show_owner=true"/></a></td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-13-github徽标-ghbdage">2.13 github徽标 ghbdage</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage [right],[left],[logo]||[color],[link],[title]||[option] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>left</code>：徽标左边的信息，必选参数。</li><li><code>right</code>: 徽标右边的信息，必选参数，</li><li><code>logo</code>：徽标图标，图标名称详见<a href="https://simpleicons.org/">simpleicons</a>，可选参数。</li><li><code>color</code>：徽标右边的颜色，可选参数。</li><li><code>link</code>：指向的链接，可选参数。</li><li><code>title</code>：徽标的额外信息，可选参数。主要用于优化SEO，但<code>object</code>标签不会像<code>a</code>标签一样在鼠标悬停显示<code>title</code>信息。</li><li><code>option</code>：自定义参数，支持<a href="https://shields.io/">shields.io</a>的全部API参数支持，具体参数可以参看上文中的拓展写法示例。形式为<code>name1=value2&amp;name2=value2</code>。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.基本参数,定义徽标左右文字和图标</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage Theme,Butterfly %&#125;</span><br><span class="line">&#123;% bdage Frame,Hexo,hexo %&#125;</span><br></pre></td></tr></table></figure><p>2.信息参数，定义徽标右侧内容背景色，指向链接</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage CDN,JsDelivr,jsDelivr||abcdef,https://metroui.org.ua/index.html,本站使用JsDelivr为静态资源提供CDN加速 %&#125;</span><br><span class="line">//如果是跨顺序省略可选参数，仍然需要写个逗号,用作分割</span><br><span class="line">&#123;% bdage Source,GitHub,GitHub||,https://github.com/ %&#125;</span><br></pre></td></tr></table></figure><p>3.拓展参数，支持shields的API的全部参数内容</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage Hosted,Vercel,Vercel||brightgreen,https://vercel.com/,本站采用双线部署，默认线路托管于Vercel||style=social&amp;logoWidth=20 %&#125;</span><br><span class="line">//如果是跨顺序省略可选参数组，仍然需要写双竖线||用作分割</span><br><span class="line">&#123;% bdage Hosted,Vercel,Vercel||||style=social&amp;logoWidth=20&amp;logoColor=violet %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.基本参数,定义徽标左右文字和图标</p><p><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Butterfly-Theme-orange?logo=&color=orange&link=&"></object><br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Hexo-Frame-orange?logo=hexo&color=orange&link=&"></object></p><p>2.信息参数，定义徽标右侧内容背景色，指向链接</p><p><object class="ghbdage" style="margin-inline:5px" title="本站使用JsDelivr为静态资源提供CDN加速" standby="loading..." data="https://img.shields.io/badge/JsDelivr-CDN-orange?logo=jsDelivr&color=abcdef&link=https://metroui.org.ua/index.html&"></object><br>//如果是跨顺序省略可选参数，仍然需要写个逗号,用作分割<br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/GitHub-Source-orange?logo=GitHub&color=orange&link=https://github.com/&"></object></p><p>3.拓展参数，支持shields的API的全部参数内容</p><p><object class="ghbdage" style="margin-inline:5px" title="本站采用双线部署，默认线路托管于Vercel" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=brightgreen&link=https://vercel.com/&style=social&logoWidth=20"></object><br>//如果是跨顺序省略可选参数组，仍然需要写双竖线||用作分割<br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=orange&link=&style=social&logoWidth=20&logoColor=violet"></object></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-14-网站卡片-sites">2.14 网站卡片 sites</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-3">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site 标题, url=链接, screenshot=截图链接, avatar=头像链接（可选）, description=描述（可选） %&#125;</span><br><span class="line">&#123;% site 标题, url=链接, screenshot=截图链接, avatar=头像链接（可选）, description=描述（可选） %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site xaoxuu, url=https://xaoxuu.com, screenshot=https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg, avatar=https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/avatar/avatar.png, description=简约风格 %&#125;</span><br><span class="line">&#123;% site inkss, url=https://inkss.cn, screenshot=https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg, avatar=https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg, description=这是一段关于这个网站的描述文字 %&#125;</span><br><span class="line">&#123;% site MHuiG, url=https://blog.mhuig.top, screenshot=https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png, avatar=https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png, description=这是一段关于这个网站的描述文字 %&#125;</span><br><span class="line">&#123;% site Colsrch, url=https://colsrch.top, screenshot=https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png, avatar=https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg, description=这是一段关于这个网站的描述文字 %&#125;</span><br><span class="line">&#123;% site Linhk1606, url=https://linhk1606.github.io, screenshot=https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png, avatar=https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png, description=这是一段关于这个网站的描述文字 %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><div class="site-card-group"><a class="site-card" href="https://fomalhaut1998.com"><div class="img"><img src="https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/avatar/avatar.png"/><span class="title">fomalhaut1998</span><span class="desc">简约风格</span></div></a><a class="site-card" href="https://inkss.cn"><div class="img"><img src="https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg"/><span class="title">inkss</span><span class="desc">这是一段关于这个网站的描述文字</span></div></a><a class="site-card" href="https://blog.mhuig.top"><div class="img"><img src="https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png"/><span class="title">MHuiG</span><span class="desc">这是一段关于这个网站的描述文字</span></div></a><a class="site-card" href="https://colsrch.top"><div class="img"><img src="https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg"/><span class="title">Colsrch</span><span class="desc">这是一段关于这个网站的描述文字</span></div></a><a class="site-card" href="https://linhk1606.github.io"><div class="img"><img src="https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png"/></div><div class="info"><img src="https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png"/><span class="title">Linhk1606</span><span class="desc">这是一段关于这个网站的描述文字</span></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-15-行内图片-inlineimage">2.15 行内图片 inlineimage</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% inlineimage 图片链接, height=高度（可选） %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>高度</code>：height=20px</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">这是 &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif %&#125; 一段话。</span><br><span class="line"></span><br><span class="line">这又是 &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif, height=40px %&#125; 一段话。</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>这是 <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif" style="height:1.5em"/> 一段话。</p><p>这又是 <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif" style="height:40px;"/> 一段话。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-16-单张图片-image">2.16 单张图片 image</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image 链接, width=宽度（可选）, height=高度（可选）, alt=描述（可选）, bg=占位颜色（可选） %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li>图片宽度高度：width=300px, height=32px</li><li>图片描述：alt=图片描述（butterfly需要在主题配置文件中开启图片描述）</li><li>占位背景色：bg=#f2f2f2</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.添加描述：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, alt=每天下课回宿舍的路，没有什么故事。 %&#125;</span><br></pre></td></tr></table></figure><p>2.指定宽度</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px %&#125;</span><br></pre></td></tr></table></figure><p>3.指定宽度并添加描述：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px, alt=每天下课回宿舍的路，没有什么故事。 %&#125;</span><br></pre></td></tr></table></figure><p>4.设置占位背景色：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px, bg=#1D0C04, alt=优化不同宽度浏览的观感 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.添加描述：</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="每天下课回宿舍的路，没有什么故事。"/></div><span class="image-caption">每天下课回宿舍的路，没有什么故事。</span></div>2..指定宽度<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" style="width:400px;"/></div></div>3.指定宽度并添加描述：<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="每天下课回宿舍的路，没有什么故事。" style="width:400px;"/></div><span class="image-caption">每天下课回宿舍的路，没有什么故事。</span></div>4.设置占位背景色：<div class="img-wrap"><div class="img-bg" style="background:#1D0C04"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="优化不同宽度浏览的观感" style="width:400px;"/></div><span class="image-caption">优化不同宽度浏览的观感</span></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-17-音频-audio">2.17 音频 audio</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-3">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% audio 音频链接 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% audio https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><div class="audio"><audio controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3' type='audio/mp3'>Your browser does not support the audio tag.</audio></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-18-视频-video">2.18 视频 video</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video 视频链接 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>对齐方向</code>：left, center, right</li><li><code>列数</code>：逗号后面直接写列数，支持 1 ～ 4 列。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.100%宽度</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br></pre></td></tr></table></figure><p>2.50%宽度</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 2 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><p>3.25%宽度</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 4 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.100%宽度</p><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>2.50%宽度<div class="videos" col='2'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div>3.25%宽度<div class="videos" col='4'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-19-相册-gallery">2.19 相册 gallery</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><p>1.gallerygroup 相册图库</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>2.gallery 相册</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">markdown 圖片格式</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ul><li>gallerygroup 相册图库</li></ul><table><thead><tr><th>参数名</th><th>释义</th></tr></thead><tbody><tr><td>name</td><td>图库名字</td></tr><tr><td>description</td><td>图库描述</td></tr><tr><td>link</td><td>链接到对应相册的地址</td></tr><tr><td>img-url</td><td>图库封面</td></tr></tbody></table><ul><li><p>gallery 相册</p><p>区别于旧版的Gallery相册,新的Gallery相册会自动根据图片长度进行排版，书写也更加方便，与markdown格式一样。可根据需要插入到相应的md。无需再自己配置长宽。<strong>建议在粘贴时故意使用长短、大小、横竖不一的图片</strong>，会有更好的效果。（尺寸完全相同的图片只会平铺输出，效果很糟糕）</p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.gallerygroup 相册图库</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup MC 在Rikkaの六花服务器里留下的足迹 &#x27;/gallery/MC/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup Gundam 哦咧哇gundam哒！ &#x27;/gallery/Gundam/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907110508327.png %&#125;</span><br><span class="line">&#123;% galleryGroup I-am-Akilar 某种意义上也算自拍吧 &#x27;/gallery/I-am-Akilar/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907113116651.png %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>2.gallery 相册</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg</span>)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.gallerygroup 相册图库</p><div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">MC</div>  <p>在Rikkaの六花服务器里留下的足迹</p>  <a href='/gallery/MC/'></a>  </figcaption>  </figure>  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907110508327.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">Gundam</div>  <p>哦咧哇gundam哒！</p>  <a href='/gallery/Gundam/'></a>  </figcaption>  </figure>  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907113116651.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">I-am-Akilar</div>  <p>某种意义上也算自拍吧</p>  <a href='/gallery/I-am-Akilar/'></a>  </figcaption>  </figure></div>2.gallery 相册<div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""></p>          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-20-折叠框-folding">2.20 折叠框 folding</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-3">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><p>1.gallerygroup 相册图库</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding 参数（可选）, 标题 %&#125;</span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span>)</span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><!-- tab 参数配置 --><ol><li><p><code>颜色</code>：blue, cyan, green, yellow, red</p></li><li><p><code>状态</code>：状态填写 open 代表默认打开。</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding 查看图片测试 %&#125;</span><br><span class="line"></span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span>)</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding cyan open, 查看默认打开的折叠框 %&#125;</span><br><span class="line"></span><br><span class="line">这是一个默认打开的折叠框。</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding green, 查看代码测试 %&#125;</span><br><span class="line">假装这里有代码块（代码块没法嵌套代码块）</span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding yellow, 查看列表测试 %&#125;</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> haha</span><br><span class="line"><span class="bullet">-</span> hehe</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding red, 查看嵌套测试 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding blue, 查看嵌套测试2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding 查看嵌套测试3 %&#125;</span><br><span class="line"></span><br><span class="line">hahaha <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png&#x27;</span> <span class="attr">style</span>=<span class="string">&#x27;height:24px&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><details class="folding-tag" ><summary> 查看图片测试 </summary>              <div class='content'>              <p><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg" alt=""></p>              </div>            </details><details class="folding-tag" cyan open><summary> 查看默认打开的折叠框 </summary>              <div class='content'>              <p>这是一个默认打开的折叠框。</p>              </div>            </details><details class="folding-tag" green><summary> 查看代码测试 </summary>              <div class='content'>              <p>假装这里有代码块（代码块没法嵌套代码块）</p>              </div>            </details><details class="folding-tag" yellow><summary> 查看列表测试 </summary>              <div class='content'>              <ul><li>haha</li><li>hehe</li></ul>              </div>            </details><details class="folding-tag" red><summary> 查看嵌套测试 </summary>              <div class='content'>              <details class="folding-tag" blue><summary> 查看嵌套测试2 </summary>              <div class='content'>              <details class="folding-tag" ><summary> 查看嵌套测试3 </summary>              <div class='content'>              <p>hahaha <span><img src='https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png' style='height:24px'></span></p>              </div>            </details>              </div>            </details>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-21-分栏-tab">2.21 分栏 tab</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><p>Unique name :</p><ul><li><p>选项卡块标签的唯一名称，不带逗号。</p></li><li><p>将在#id中用作每个标签及其索引号的前缀。</p></li><li><p>如果名称中包含空格，则对于生成#id，所有空格将由破折号代替。</p></li><li><p>仅当前帖子/页面的URL必须是唯一的！</p></li></ul></li><li><p>[index]:</p><ul><li><p>活动选项卡的索引号。</p></li><li><p>如果未指定，将选择第一个标签（1）。</p></li><li><p>如果index为-1，则不会选择任何选项卡。</p></li><li><p>可选参数。</p></li></ul></li><li><p>[Tab caption]:</p><ul><li><p>当前选项卡的标题。</p></li><li><p>如果未指定标题，则带有制表符索引后缀的唯一名称将用作制表符的标题。</p></li><li><p>如果未指定标题，但指定了图标，则标题将为空。</p></li><li><p>可选参数。</p></li></ul></li><li><p>[@icon]:</p><ul><li><p>FontAwesome图标名称（全名，看起来像“ fas fa-font”）</p></li><li><p>可以指定带空格或不带空格；</p></li><li><p>例如’Tab caption @icon’ 和 ‘Tab caption@icon’.</p></li><li><p>可选参数。</p></li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.Demo 1 - 预设选择第一个【默认】</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>2.Demo 2 - 预设选择tabs</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test2, 3 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>3.Demo 3 - 没有预设值</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test3, -1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>4.Demo 4 - 自定义Tab名 + 只有icon + icon和Tab名</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab 第一个Tab --&gt;</span><br><span class="line"><span class="strong">**tab名字为第一个Tab**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"><span class="strong">**只有图标 没有Tab名字**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 炸弹@fas fa-bomb --&gt;</span><br><span class="line"><span class="strong">**名字+icon**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.Demo 1 - 预设选择第一个【默认】</p><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">test1 1</button></li><li class="tab"><button type="button" data-href="#test1-2">test1 2</button></li><li class="tab"><button type="button" data-href="#test1-3">test1 3</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>2.Demo 2 - 预设选择tabs</p><div class="tabs" id="test2"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test2-1">test2 1</button></li><li class="tab"><button type="button" data-href="#test2-2">test2 2</button></li><li class="tab active"><button type="button" data-href="#test2-3">test2 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test2-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test2-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content active" id="test2-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>3.Demo 3 - 没有预设值</p><div class="tabs" id="test3"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test3-1">test3 1</button></li><li class="tab"><button type="button" data-href="#test3-2">test3 2</button></li><li class="tab"><button type="button" data-href="#test3-3">test3 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test3-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>4.Demo 4 - 自定义Tab名 + 只有icon + icon和Tab名</p><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">第一个Tab</button></li><li class="tab"><button type="button" data-href="#test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test4-3"><i class="fas fa-bomb"></i>炸弹</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tab名字为第一个Tab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p><strong>只有图标 没有Tab名字</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p><strong>名字+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-22-诗词标签-poem">2.22 诗词标签 poem</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-2">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-3">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><ol><li><code>title</code>：诗词标题</li><li><code>author</code>：作者，可以不写</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% poem 水调歌头,苏轼 %&#125;</span><br><span class="line">丙辰中秋，欢饮达旦，大醉，作此篇，兼怀子由。</span><br><span class="line">明月几时有？把酒问青天。</span><br><span class="line">不知天上宫阙，今夕是何年？</span><br><span class="line">我欲乘风归去，又恐琼楼玉宇，高处不胜寒。</span><br><span class="line">起舞弄清影，何似在人间？</span><br><span class="line"></span><br><span class="line">转朱阁，低绮户，照无眠。</span><br><span class="line">不应有恨，何事长向别时圆？</span><br><span class="line">人有悲欢离合，月有阴晴圆缺，此事古难全。</span><br><span class="line">但愿人长久，千里共婵娟。</span><br><span class="line">&#123;% endpoem %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><div class='poem'><div class='poem-title'>水调歌头</div><div class='poem-author'>苏轼</div><p>丙辰中秋，欢饮达旦，大醉，作此篇，兼怀子由。<br>明月几时有？把酒问青天。<br>不知天上宫阙，今夕是何年？<br>我欲乘风归去，又恐琼楼玉宇，高处不胜寒。<br>起舞弄清影，何似在人间？</p><p>转朱阁，低绮户，照无眠。<br>不应有恨，何事长向别时圆？<br>人有悲欢离合，月有阴晴圆缺，此事古难全。<br>但愿人长久，千里共婵娟。</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-23-阿里图标-icon">2.23 阿里图标 icon</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon [icon-xxxx],[font-size] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>icon-xxxx</code>：表示图标<code>font-class</code>,可以在自己的阿里矢量图标库项目的<code>font-class</code>引用方案内查询并复制。</li><li><code>font-size</code>：表示图标大小，直接填写数字即可，单位为<code>em</code>。图标大小默认值为<code>1em</code>。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon icon-rat<span class="emphasis">_zi %&#125;&#123;% icon icon-rat,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-ox_</span>chou,3 %&#125;&#123;% icon icon-ox,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-tiger<span class="emphasis">_yin,5 %&#125;&#123;% icon icon-tiger,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rabbit_</span>mao,1 %&#125;&#123;% icon icon-rabbit,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dragon<span class="emphasis">_chen,3 %&#125;&#123;% icon icon-dragon,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-snake_</span>si,5 %&#125;&#123;% icon icon-snake,6 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-horse<span class="emphasis">_wu %&#125;&#123;% icon icon-horse,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-goat_</span>wei,3 %&#125;&#123;% icon icon-goat,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-monkey<span class="emphasis">_shen,5 %&#125;&#123;% icon icon-monkey,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rooster_</span>you %&#125;&#123;% icon icon-rooster,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dog<span class="emphasis">_xu,3 %&#125;&#123;% icon icon-dog,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-boar_</span>hai,5 %&#125;&#123;% icon icon-boar,6 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rat_zi"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rat"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-ox_chou"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-ox"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-tiger_yin"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-tiger"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rabbit_mao"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rabbit"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dragon_chen"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dragon"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-snake_si"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-snake"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-horse_wu"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-horse"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-goat_wei"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-goat"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-monkey_shen"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-monkey"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rooster_you"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rooster"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dog_xu"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dog"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-boar_hai"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-boar"></use></svg></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-24-特效标签wow">2.24 特效标签wow</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow [animete],[duration],[delay],[offset],[iteration] %&#125;</span><br><span class="line">内容</span><br><span class="line">&#123;% endwow %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>animate</code>: 动画样式，效果详见<a href="https://animate.style/">animate.css参考文档</a></li><li><code>duration</code>: 选填项，动画持续时间，单位可以是<code>ms</code>也可以是<code>s</code>。例如<code>3s</code>，<code>700ms</code>。</li><li><code>delay</code>: 选填项，动画开始的延迟时间，单位可以是<code>ms</code>也可以是<code>s</code>。例如<code>3s</code>，<code>700ms</code>。</li><li><code>offset</code>: 选填项，开始动画的距离（相对浏览器底部）</li><li><code>iteration</code>: 选填项，动画重复的次数</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.flip动画效果。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`动画效果，持续`5s`，延时`5s`，离底部`100`距离时启动，重复`10`次</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>2.zoomIn动画效果，持续5s，延时5s，离底部100距离时启动，重复10次</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`动画效果，持续`5s`，延时`5s`，离底部`100`距离时启动，重复`10`次</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>3.slideInRight动画效果，持续5s，延时5s</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__slideInRight,5s,5s %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note orange &#x27;fas fa-car&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`slideInRight`动画效果，持续`5s`，延时`5s`。</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>4.heartBeat动画效果，延时5s，重复10次。此处注意不用的参数位置要留空，用逗号间隔。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__heartBeat,,5s,,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note red &#x27;fas fa-battery-half&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`heartBeat`动画效果，延时`5s`，重复`10`次。</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.flip动画效果。</p><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>动画效果，持续<code>5s</code>，延时<code>5s</code>，离底部<code>100</code>距离时启动，重复<code>10</code>次</p></div></div><p>2.zoomIn动画效果，持续5s，延时5s，离底部100距离时启动，重复10次</p><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>动画效果，持续<code>5s</code>，延时<code>5s</code>，离底部<code>100</code>距离时启动，重复<code>10</code>次</p></div></div><p>3.slideInRight动画效果，持续5s，延时5s</p><div class='wow animate__slideInRight' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='' ><div class="note orange icon-padding modern"><i class="note-icon fas fa-car"></i><p><code>slideInRight</code>动画效果，持续<code>5s</code>，延时<code>5s</code>。</p></div></div><p>4.heartBeat动画效果，延时5s，重复10次。此处注意不用的参数位置要留空，用逗号间隔。</p><div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='10' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><code>heartBeat</code>动画效果，延时<code>5s</code>，重复<code>10</code>次。</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-25-进度条-progress">2.25  进度条 progress</h2><div class="note info flat"><p>进度条标签参考<a href="https://rongbuqiu.com/jdt.html">沂佰孜猫-给HEXO文章添加彩色进度条</a>。<br>源样式提取自<a href="https://zwying0814.gitbook.io/cuteen/">Cuteen</a>主题。</p></div><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-2">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress [width] [color] [text] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>width</code>: 0到100的阿拉伯数字</li><li><code>color</code>: 颜色，取值有red,yellow,green,cyan,blue,gray</li><li><code>text</code>:进度条上的文字内容</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress 10 red 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 30 yellow 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 50 green 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 70 cyan 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 90 blue 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 100 gray 进度条样式预览 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-red"  style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-yellow"  style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-green"  style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-cyan"  style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-blue"  style="width: 90%" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-gray"  style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-26-注释-notation">2.26 注释 notation</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% nota [label] , [text] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><p><code>label</code>: 注释词汇</p></li><li><p><code>text</code>: 悬停显示的注解内容</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% nota 把鼠标移动到我上面试试 ,可以看到注解内容出现在顶栏 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p><span class='nota' data-nota='可以看到注解内容出现在顶栏'>把鼠标移动到我上面试试</span></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-27-气泡注释-bubble">2.27 气泡注释 bubble</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bubble [content] , [notation] ,[background-color] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>content</code>: 注释词汇</li><li><code>notation</code>: 悬停显示的注解内容</li><li><code>background-color</code>: 可选，气泡背景色。默认为“#71a4e3”</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">最近我学到了不少新玩意儿（虽然对很多大佬来说这些已经是旧技术了），比如CSS的&#123;% bubble 兄弟相邻选择器,&quot;例如 h1 + p &#123;margin-top:50px;&#125;&quot; %&#125;，&#123;% bubble flex布局,&quot;Flex 是 Flexible Box 的缩写，意为&quot;弹性布局&quot;，用来为盒状模型提供最大的灵活性&quot;,&quot;#ec5830&quot; %&#125;，&#123;% bubble transform变换,&quot;transform 属性向元素应用 2D 或 3D 转换。该属性允许我们对元素进行旋转、缩放、移动或倾斜。&quot;,&quot;#1db675&quot; %&#125;，animation的&#123;% bubble 贝塞尔速度曲线,&quot;贝塞尔曲线(Bézier curve)，又称贝兹曲线或贝济埃曲线，是应用于二维图形应用程序的数学曲线。一般的矢量图形软件通过它来精确画出曲线，贝兹曲线由线段与节点组成，节点是可拖动的支点，线段像可伸缩的皮筋&quot;,&quot;#de4489&quot; %&#125;写法，还有今天刚看到的&#123;% bubble clip-path,&quot;clip-path属性使用裁剪方式创建元素的可显示区域。区域内的部分显示，区域外的隐藏。&quot;,&quot;#868fd7&quot; %&#125;属性。这些对我来说很新颖的概念狠狠的冲击着我以前积累起来的设计思路。</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>最近我学到了不少新玩意儿（虽然对很多大佬来说这些已经是旧技术了），比如CSS的<span class="bubble-content">兄弟相邻选择器</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#71a4e3;">例如 h1 + p {margin-top:50px;}</span></span>，<span class="bubble-content">flex布局</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#ec5830;">Flex 是 Flexible Box 的缩写，意为弹性布局&quot;，用来为盒状模型提供最大的灵活性&quot;</span></span>，<span class="bubble-content">transform变换</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#1db675;">transform 属性向元素应用 2D 或 3D 转换。该属性允许我们对元素进行旋转、缩放、移动或倾斜。</span></span>，animation的<span class="bubble-content">贝塞尔速度曲线</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#de4489;">贝塞尔曲线(Bézier curve)，又称贝兹曲线或贝济埃曲线，是应用于二维图形应用程序的数学曲线。一般的矢量图形软件通过它来精确画出曲线，贝兹曲线由线段与节点组成，节点是可拖动的支点，线段像可伸缩的皮筋</span></span>写法，还有今天刚看到的<span class="bubble-content">clip-path</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#868fd7;">clip-path属性使用裁剪方式创建元素的可显示区域。区域内的部分显示，区域外的隐藏。</span></span>属性。这些对我来说很新颖的概念狠狠的冲击着我以前积累起来的设计思路。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-28-引用文献-reference">2.28 引用文献 reference</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% referto [id] , [literature] %&#125;</span><br><span class="line">&#123;% referfrom [id] , [literature] , [url] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><p>referto 引用上标</p><ul><li><p><code>id</code>: 上标序号内容，需与referfrom标签的id对应才能实现跳转</p></li><li><p><code>literature</code>: 引用的参考文献名称</p></li></ul></li><li><p>referfrom 引用出处</p><ul><li><p><code>id</code>: 序号内容，需与referto标签的id对应才能实现 跳转</p></li><li><p><code>literature</code>: 引用的参考文献名称</p></li><li><p><code>url</code>: 引用的参考文献链接，可省略</p></li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Akilarの糖果屋(akilar.top)是一个私人性质的博客&#123;% referto &#x27;[1]&#x27;,&#x27;Akilarの糖果屋群聊简介&#x27; %&#125;，从各类教程至生活点滴，无话不谈。建群的目的是提供一个闲聊的场所。博客采用Hexo框架&#123;% referto &#x27;[2]&#x27;,&#x27;Hexo中文文档&#x27; %&#125;，Butterfly主题&#123;% referto &#x27;[3]&#x27;,&#x27;Butterfly 安装文档(一) 快速开始&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">本项目参考了Volantis&#123;% referto &#x27;[4]&#x27;,&#x27;hexo-theme-volantis 标签插件&#x27; %&#125;的标签样式。引入<span class="code">`[tag].js`</span>，并针对<span class="code">`butterfly`</span>主题修改了相应的<span class="code">`[tag].styl`</span>。在此鸣谢<span class="code">`Volantis`</span>主题众开发者。</span><br><span class="line">主要参考内容包括各个volantis的内置标签插件文档&#123;% referto &#x27;[5]&#x27;,&#x27;Volantis文档:内置标签插件&#x27; %&#125;</span><br><span class="line">Butterfly主题的各个衍生魔改&#123;% referto &#x27;[6]&#x27;,&#x27;Butterfly 安装文档:标签外挂（Tag Plugins&#x27; %&#125;&#123;% referto &#x27;[7]&#x27;,&#x27;小弋の生活馆全样式预览&#x27; %&#125;&#123;% referto &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27; %&#125;&#123;% referto &#x27;[9]&#x27;,&#x27;小康的butterfly主题使用文档&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% referfrom &#x27;[1]&#x27;,&#x27;Akilarの糖果屋群聊简介&#x27;,&#x27;https://jq.qq.com/?<span class="emphasis">_wv=1027&amp;k=pGLB2C0N&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[2]&#x27;,&#x27;Hexo中文文档&#x27;,&#x27;https://hexo.io/zh-cn/docs/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[3]&#x27;,&#x27;Butterfly 安装文档(一) 快速开始&#x27;,&#x27;https://butterfly.js.org/posts/21cfbf15/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[4]&#x27;,&#x27;hexo-theme-volantis 标签插件&#x27;,&#x27;https://volantis.js.org/v5/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[5]&#x27;,&#x27;Volantis文档:内置标签插件&#x27;,&#x27;https://volantis.js.org/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[6]&#x27;,&#x27;Butterfly 安装文档:标签外挂（Tag Plugins&#x27;,&#x27;https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[7]&#x27;,&#x27;小弋の生活馆全样式预览&#x27;,&#x27;https://lovelijunyi.gitee.io/posts/c898.html&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27;,&#x27;https://github.com/l-lin/font-awesome-animation&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[9]&#x27;,&#x27;小康的butterfly主题使用文档&#x27;,&#x27;https://www.antmoe.com/posts/3b43914f/&#x27; %&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>Akilarの糖果屋(akilar.top)是一个私人性质的博客<span class="hidden-anchor" id="referto_[1]"></span><sup class="reference"><a href="#referfrom_[1]">[1]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Akilarの糖果屋群聊简介</span><span class="reference-title">参考资料</span></span></span>，从各类教程至生活点滴，无话不谈。建群的目的是提供一个闲聊的场所。博客采用Hexo框架<span class="hidden-anchor" id="referto_[2]"></span><sup class="reference"><a href="#referfrom_[2]">[2]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Hexo中文文档</span><span class="reference-title">参考资料</span></span></span>，Butterfly主题<span class="hidden-anchor" id="referto_[3]"></span><sup class="reference"><a href="#referfrom_[3]">[3]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly 安装文档(一) 快速开始</span><span class="reference-title">参考资料</span></span></span></p><p>本项目参考了Volantis<span class="hidden-anchor" id="referto_[4]"></span><sup class="reference"><a href="#referfrom_[4]">[4]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">hexo-theme-volantis 标签插件</span><span class="reference-title">参考资料</span></span></span>的标签样式。引入<code>[tag].js</code>，并针对<code>butterfly</code>主题修改了相应的<code>[tag].styl</code>。在此鸣谢<code>Volantis</code>主题众开发者。<br>主要参考内容包括各个volantis的内置标签插件文档<span class="hidden-anchor" id="referto_[5]"></span><sup class="reference"><a href="#referfrom_[5]">[5]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Volantis文档:内置标签插件</span><span class="reference-title">参考资料</span></span></span><br>Butterfly主题的各个衍生魔改<span class="hidden-anchor" id="referto_[6]"></span><sup class="reference"><a href="#referfrom_[6]">[6]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly 安装文档:标签外挂（Tag Plugins</span><span class="reference-title">参考资料</span></span></span><span class="hidden-anchor" id="referto_[7]"></span><sup class="reference"><a href="#referfrom_[7]">[7]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">小弋の生活馆全样式预览</span><span class="reference-title">参考资料</span></span></span><span class="hidden-anchor" id="referto_[8]"></span><sup class="reference"><a href="#referfrom_[8]">[8]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">l-lin-font-awesome-animation</span><span class="reference-title">参考资料</span></span></span><span class="hidden-anchor" id="referto_[9]"></span><sup class="reference"><a href="#referfrom_[9]">[9]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">小康的butterfly主题使用文档</span><span class="reference-title">参考资料</span></span></span></p><div class="reference-source"><span class="hidden-anchor" id="referfrom_[1]"></span><a class="reference-anchor" href="#referto_[1]">[1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://jq.qq.com/?_wv=1027&k=pGLB2C0N">Akilarの糖果屋群聊简介</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[2]"></span><a class="reference-anchor" href="#referto_[2]">[2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://hexo.io/zh-cn/docs/">Hexo中文文档</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[3]"></span><a class="reference-anchor" href="#referto_[3]">[3]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/21cfbf15/">Butterfly 安装文档(一) 快速开始</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[4]"></span><a class="reference-anchor" href="#referto_[4]">[4]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/v5/tag-plugins/">hexo-theme-volantis 标签插件</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[5]"></span><a class="reference-anchor" href="#referto_[5]">[5]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/tag-plugins/">Volantis文档:内置标签插件</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[6]"></span><a class="reference-anchor" href="#referto_[6]">[6]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89">Butterfly 安装文档:标签外挂（Tag Plugins</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[7]"></span><a class="reference-anchor" href="#referto_[7]">[7]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://lovelijunyi.gitee.io/posts/c898.html">小弋の生活馆全样式预览</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[8]"></span><a class="reference-anchor" href="#referto_[8]">[8]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://github.com/l-lin/font-awesome-animation">l-lin-font-awesome-animation</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[9]"></span><a class="reference-anchor" href="#referto_[9]">[9]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://www.antmoe.com/posts/3b43914f/">小康的butterfly主题使用文档</a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-29-PDF展示">2.29 PDF展示</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% pdf 文件路径 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>文件路径</code>: 可以是相对路径或者是在线链接</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 1.本地文件:在md文件路径下创建一个同名文件夹，其内放pdf文件名为xxx.pdf的文件</span></span><br><span class="line">&#123;% pdf xxx.pdf %&#125;</span><br><span class="line"><span class="section"># 2.在线链接</span></span><br><span class="line">&#123;% pdf https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/小作文讲义.pdf %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>2.在线链接(要放到最外层才能起作用)</p><pre><code>&lt;div class=&quot;row&quot;&gt;&lt;embed src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/小作文讲义.pdf&quot; width=&quot;100%&quot; height=&quot;550&quot; type=&quot;application/pdf&quot;&gt;&lt;/div&gt;</code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-30-Hexo-tag-map-插件">2.30 Hexo-tag-map 插件</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% + 标签值 + 经度 + 纬度 + 文本 + 缩放等级 + 宽 + 高 + 默认图层 + %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><table><thead><tr><th style="text-align:center">地图名</th><th style="text-align:center">标签值 &lt;必填&gt;</th><th style="text-align:center">宽 (默认 100%) / 高 (默认 360px)</th><th style="text-align:center">缩放等级 (默认 14)</th><th style="text-align:center">宽 (默认 100%) / 高 (默认 360px)</th><th style="text-align:center">默认图层 (默认 1)</th></tr></thead><tbody><tr><td style="text-align:center">混合地图</td><td style="text-align:center">map</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 3~18</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~7</td></tr><tr><td style="text-align:center">谷歌地图</td><td style="text-align:center">googleMap</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~20</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~3</td></tr><tr><td style="text-align:center">高德地图</td><td style="text-align:center">gaodeMap</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 3~18</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~3</td></tr><tr><td style="text-align:center">百度地图</td><td style="text-align:center">baiduMap</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 4~18</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~2</td></tr><tr><td style="text-align:center">Geoq 地图</td><td style="text-align:center">geoqMap</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~18</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~5</td></tr><tr><td style="text-align:center">openstreet 地图</td><td style="text-align:center">openstreetMap</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~18</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">不支持此参数</td></tr></tbody></table><ol><li>参数之间，用英文逗号相隔</li><li>参数必须按上述事例顺序输入，不得为空</li><li>同一个页面，同一组经纬度值，只能插入一个相同标签值的地图 (若有需要，可以将第二个地图上，经度或纬度末尾删除一两个数)</li><li>参数取值必须在上述范围内</li><li>默认图层：即地图叠加层的值，默认常规地图还是卫星地图，可按地图显示顺序取值</li><li>缩放等级，数字越大，地图比例尺越小，显示的越精细</li><li>除标签值外，其他参数选填，但 每个参数的左边的参数必填</li><li>谷歌地图需要外网才能加载查看</li></ol><p>坐标获取：<a href="https://lbs.amap.com/tools/picker">高德地图坐标拾取系统</a> 、<a href="https://api.map.baidu.com/lbsapi/getpoint/index.html">百度地图坐标拾取系统</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% map 120.101101,30.239119 %&#125;</span><br><span class="line">&#123;% googleMap 120.101101,30.239119, 这里是西湖灵隐寺，据说求姻缘很灵验哦！ %&#125;</span><br><span class="line">&#123;% geoqMap 120.101101,30.239119, 这里是西湖灵隐寺，据说求姻缘很灵验哦！, 13, 90%, 320px, 3 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div class="map-box" style="margin: 0.8rem 0 1.6rem 0;"><div id="map-120.101101-30.239119" style="max-width:100%; height:360px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div></div><script type="text/javascript">var normalm=L.tileLayer.chinaProvider('GaoDe.Normal.Map',{maxZoom:20,minZoom:1,attribution:'高德地图'});var imgm=L.tileLayer.chinaProvider('GaoDe.Satellite.Map',{maxZoom:20,minZoom:1,attribution:'高德地图'});var imga=L.tileLayer.chinaProvider('GaoDe.Satellite.Annotion',{maxZoom:20,minZoom:1,attribution:'高德地图'});var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:20,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'});routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:21,minZoom:1});var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'}),routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:21,minZoom:1,attribution:'Google Maps'});var normalm1=L.tileLayer.chinaProvider('Geoq.Normal.Map',{maxZoom:21,minZoom:1,attribution:'GeoQ'});var normal=L.layerGroup([normalm]),image=L.layerGroup([imgm,imga]);var baseLayers={"高德地图":normal,"智图地图":normalm1,"谷歌地图":normalMap,"高德卫星地图":imgm,"谷歌卫星地图":satelliteMap,"高德卫星标注":image,"谷歌卫星标注":routeMap};var mymap=L.map('map-120.101101-30.239119',{center:[30.239119,120.101101],zoom:14,layers:[normal],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'放大',zoomOutTitle:'缩小'}).addTo(mymap);</script><br><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div id="googleMap-120.101101-30.239119" style="max-width:100%; height:360px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div><script type="text/javascript">var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:22,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:22,minZoom:1,attribution:'Google Maps'}),routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:22,minZoom:1,attribution:'Google Maps'});var baseLayers={"谷歌地图":normalMap,"谷歌卫星图":satelliteMap,"谷歌卫星标注": routeMap};var overlayLayers={};var mymap=L.map("googleMap-120.101101-30.239119",{center:[30.239119,120.101101],zoom:14,layers:[normalMap],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'放大',zoomOutTitle:'缩小'}).addTo(mymap);var marker = L.marker(['30.239119','120.101101']).addTo(mymap);marker.bindPopup("这里是西湖灵隐寺，据说求姻缘很灵验哦！").openPopup();</script><br><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div id="geoqMap-120.101101-30.239119" style="max-width:90%; height:320px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div><script type="text/javascript">var normalm1=L.tileLayer.chinaProvider('Geoq.Normal.Map',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm2=L.tileLayer.chinaProvider('Geoq.Normal.PurplishBlue',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm3=L.tileLayer.chinaProvider('Geoq.Normal.Gray',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm4=L.tileLayer.chinaProvider('Geoq.Normal.Warm',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm5=L.tileLayer.chinaProvider('Geoq.Theme.Hydro',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normal=L.layerGroup([normalm1,normalm2,normalm3,normalm4,normalm5]);var baseLayers={"智图地图":normalm1,"午夜蓝":normalm2,"灰色":normalm3,"暖色":normalm4,"水系":normalm5};var mymap=L.map("geoqMap-120.101101-30.239119",{center:[30.239119,120.101101],zoom:13,layers:[normalm3],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'放大',zoomOutTitle:'缩小'}).addTo(mymap);var marker = L.marker(['30.239119','120.101101']).addTo(mymap);marker.bindPopup("这里是西湖灵隐寺，据说求姻缘很灵验哦！").openPopup();</script><br><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-31-隐藏块">2.31 隐藏块</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li>content：要隐藏的内容</li><li>display：展示前按钮显示的文字（可选）</li><li>bg：按钮的背景颜色（可选）</li><li>color：按钮显示的文字的颜色（可选）</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock 点我预览, blue %&#125;</span><br><span class="line">这里有张图片：</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://s1.vika.cn/space/2022/10/30/b35fce448bc9404a8d65c3ce1e6e46eb&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;image (1)&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:67%;&quot;</span> /&gt;</span></span></span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><div class="hide-block"><button type="button" class="hide-button" style="background-color:  blue;">点我预览    </button><div class="hide-content"><p>这里有张图片：<br><img src="https://s1.vika.cn/space/2022/10/30/b35fce448bc9404a8d65c3ce1e6e46eb" alt="image (1)" style="zoom:67%;" /></p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      <categories>
          
          <category> 演示 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
            <tag> 外挂标签 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
